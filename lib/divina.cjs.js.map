{"version":3,"file":"divina.cjs.js","sources":["../src/Renderer/Container.js","../src/Renderer/Renderer.js","../src/constants.js","../src/Renderer/TextElement.js","../src/Renderer/TextureElement.js","../src/Renderer/Loader.js","../src/utils.js","../src/Renderer/Texture.js","../src/TextManager.js","../src/InteractionManager.js","../src/Slice/Slice.js","../src/Slice/SequenceSlice.js","../src/DivinaParser/SliceResource.js","../src/DivinaParser/Transition.js","../src/DivinaParser/LinkObject.js","../src/DivinaParser/DivinaParser.js","../src/ResourceManager/TextureResource.js","../src/ResourceManager/AsyncTaskQueue.js","../src/ResourceManager/ResourceLoadTaskQueue.js","../src/ResourceManager/ResourceManager.js","../src/StoryBuilder/StateHandler.js","../src/StoryBuilder/OverflowHandler/Camera.js","../src/StoryBuilder/OverflowHandler/OverflowHandler.js","../src/StoryBuilder/LayerPile.js","../src/StoryBuilder/PageNavigator.js","../src/StoryBuilder/Slideshow.js","../src/StoryBuilder/Layer.js","../src/StoryBuilder/Page.js","../src/StoryBuilder/Segment.js","../src/StoryBuilder/StoryBuilder.js","../src/EventEmitter.js","../src/Player.js","../src/index.js"],"sourcesContent":["import { Container as PIXIContainer, Graphics as PIXIGraphics } from \"pixi.js-legacy\"\n\nexport default class Container {\n\n\t// Used in TextureElement\n\tget name() { return this._name }\n\n\t// Used in LayerPile (note that parent below is a Container, not a PIXIContainer)\n\tget parent() { return this._parent }\n\n\t// Used in Camera\n\tget positionInSegmentLine() { return this._positionInSegmentLine }\n\n\t// Used below\n\tget pixiContainer() { return this._pixiContainer }\n\n\tconstructor(name = null, parent = null, pixiContainer = null) {\n\t\tthis._pixiContainer = pixiContainer || new PIXIContainer()\n\t\tthis._setName(name)\n\n\t\tif (parent) {\n\t\t\tparent.addChild(this)\n\t\t}\n\n\t\tthis._maskingPixiContainer = null\n\t\tthis._mask = null\n\n\t\tthis._position = { x: 0, y: 0 }\n\t\tthis._positionInSegmentLine = { x: 0, y: 0 }\n\n\t\tthis._scale = 1\n\n\t\tthis._isXPositionUpdating = false\n\t\tthis._isYPositionUpdating = false\n\t}\n\n\t_setName(name, suffix = null) {\n\t\tthis._name = name\n\t\tif (this._pixiContainer) {\n\t\t\tthis._pixiContainer.name = name\n\t\t\tif (suffix !== null) {\n\t\t\t\tthis._pixiContainer.name += suffix\n\t\t\t}\n\t\t}\n\t\tif (this._maskingPixiContainer) {\n\t\t\tthis._setMaskingPixiContainerName()\n\t\t\tthis._setMaskName()\n\t\t}\n\t}\n\n\t_setMaskingPixiContainerName() {\n\t\tthis._maskingPixiContainer.name = `${this._name}MaskingContainer`\n\t}\n\n\t_setMaskName() {\n\t\tthis._mask.name = `${this._name}Mask`\n\t}\n\n\t// Used here and in Player (on changing page navigators)\n\taddChild(child) {\n\t\tconst { pixiContainer } = child\n\t\tthis._pixiContainer.addChild(pixiContainer)\n\t\tchild.setParent(this)\n\t}\n\n\t// Used here, in TextureElement and LayerPile\n\tsetParent(parent) {\n\t\tthis._parent = parent\n\t}\n\n\t// Mask functions are used in Renderer and TextureElement\n\n\taddMask() {\n\t\tthis._maskingPixiContainer = new PIXIContainer()\n\t\tthis._setMaskingPixiContainerName()\n\t\tthis._pixiContainer.addChild(this._maskingPixiContainer)\n\t}\n\n\tsetMaskRect(x, y, w, h) {\n\t\t// The mask is recreated with each resize (it works better)\n\n\t\t// Remove the mask and create it again\n\t\tthis._maskingPixiContainer.removeChildren()\n\t\tthis._mask = new PIXIGraphics()\n\t\tthis._setMaskName()\n\t\tthis._maskingPixiContainer.addChild(this._mask)\n\t\tthis._pixiContainer.mask = this._mask\n\n\t\t// Redraw the mask at the right size\n\t\tthis._mask.beginFill(0x000000)\n\t\tthis._mask.drawRect(x, y, w, h)\n\t\tthis._mask.endFill()\n\t}\n\n\t// Used in Renderer to update the content container on a resize\n\tsetPivot(pivot) {\n\t\tthis._pixiContainer.pivot = pivot\n\t}\n\n\t// Used on destroying TextManager, on changing page navigators and in StateHandler\n\tremoveFromParent() {\n\t\tif (!this._parent) {\n\t\t\treturn\n\t\t}\n\t\tconst { pixiContainer } = this._parent\n\t\tthis.setParent(null)\n\t\tif (!pixiContainer || !this._pixiContainer) {\n\t\t\treturn\n\t\t}\n\t\tpixiContainer.removeChild(this._pixiContainer)\n\t}\n\n\t// Used in StateHandler and LayerPile\n\taddChildAtIndex(container, index) {\n\t\t// First store child PIXI containers above index value away\n\t\tconst { children } = this._pixiContainer\n\t\tlet i = children.length\n\t\tconst zIndex = Math.min(Math.max(index, 0), i)\n\t\tconst tmpPixiContainer = new PIXIContainer()\n\t\ti -= 1\n\t\twhile (i >= 0 && zIndex <= i) {\n\t\t\tconst child = children[i]\n\t\t\ttmpPixiContainer.addChild(child)\n\t\t\ti -= 1\n\t\t}\n\t\t// Now add the new child\n\t\tthis.addChild(container)\n\t\t// Finally put child PIXI containers back\n\t\tconst childrenToPutBack = [...tmpPixiContainer.children].reverse()\n\t\tchildrenToPutBack.forEach((child) => {\n\t\t\tthis._pixiContainer.addChild(child)\n\t\t})\n\t}\n\n\t// Functions used in OverflowHandler to layout segments\n\n\tsetPositionInSegmentLine(positionInSegmentLine) {\n\t\tthis._positionInSegmentLine = positionInSegmentLine\n\t}\n\n\tsetPosition(position) {\n\t\tif (!position) {\n\t\t\treturn\n\t\t}\n\t\tthis._position = position\n\t\tif (this._isXPositionUpdating === false) {\n\t\t\tthis._pixiContainer.position.x = position.x\n\t\t}\n\t\tif (this._isYPositionUpdating === false) {\n\t\t\tthis._pixiContainer.position.y = position.y\n\t\t}\n\t}\n\n\t// Functions used in StateHandler to handle transitions\n\n\tresetPosition() {\n\t\tthis.setPosition(this._position)\n\t}\n\n\tsetIsXPositionUpdating(isXPositionUpdating) {\n\t\tthis._isXPositionUpdating = isXPositionUpdating\n\t}\n\n\tsetIsYPositionUpdating(isYPositionUpdating) {\n\t\tthis._isYPositionUpdating = isYPositionUpdating\n\t}\n\n\tsetXOffset(xOffset) {\n\t\tthis._pixiContainer.position.x = this._position.x + xOffset\n\t}\n\n\tsetYOffset(yOffset) {\n\t\tthis._pixiContainer.position.y = this._position.y + yOffset\n\t}\n\n\tsetAlpha(alpha) {\n\t\tthis._pixiContainer.alpha = alpha\n\t}\n\n\tsetVisibility(shouldBeVisible) {\n\t\tthis._pixiContainer.visible = shouldBeVisible\n\t}\n\n\t// Used in Layer to handle (a multi-layered segment's) slice layers\n\tsetScale(scale) {\n\t\tif (!scale) {\n\t\t\treturn\n\t\t}\n\t\tthis._pixiContainer.scale.set(scale)\n\t\tthis._scale = scale\n\t}\n\n}","import { Application as PIXIApplication } from \"pixi.js-legacy\"\n\nimport Container from \"./Container\"\n\nexport default class Renderer {\n\n\t// Used in Player\n\n\tget mainContainer() { return this._contentContainer }\n\n\tget size() {\n\t\tconst { width, height } = this._app.renderer\n\t\treturn { width, height }\n\t}\n\n\tconstructor(rootElement, backgroundColor) {\n\n\t\t// Create the PIXI application with a default background color\n\t\tthis._app = new PIXIApplication({\n\t\t\tbackgroundColor,\n\t\t\tresolution: window.devicePixelRatio || 1, // Will improve resolution on Retina displays\n\t\t})\n\t\tthis._app.renderer.autoDensity = true\n\n\t\t// Add the PIXI app's canvas to the DOM\n\t\trootElement.appendChild(this._app.view)\n\n\t\t// Create root container\n\t\tconst parent = null\n\t\tthis._rootContainer = new Container(\"stage\", parent, this._app.stage)\n\n\t\t// Create the container that will hold content (i.e. the current pageNavigator's pages)\n\t\tthis._contentContainer = new Container(\"content\", this._rootContainer)\n\n\t\t// Add a global mask (which will be used to express viewportRatio constraints)\n\t\tthis._rootContainer.addMask()\n\t}\n\n\t// Used in Player on a resize\n\tsetSize(width, height) {\n\t\t// Resize the canvas using PIXI's built-in function\n\t\tthis._app.renderer.resize(width, height)\n\t\tthis._app.render() // To avoid flickering\n\t}\n\n\t// Used in Player on a resize or as a consequence of a zoomFactor change\n\tupdateDisplay(viewportRect, zoomFactor = 1) {\n\t\tconst { width, height } = this.size\n\t\tconst actualWidth = Math.min(Math.max(viewportRect.width * zoomFactor, 0), width)\n\t\tconst actualHeight = Math.min(Math.max(viewportRect.height * zoomFactor, 0), height)\n\t\tconst x = (width - actualWidth) / 2\n\t\tconst y = (height - actualHeight) / 2\n\t\tthis._rootContainer.setMaskRect(x, y, actualWidth, actualHeight)\n\n\t\t// Update the pivot used to center containers by default\n\t\tthis._contentContainer.setPivot({\n\t\t\tx: -width / 2,\n\t\t\ty: -height / 2,\n\t\t})\n\t}\n\n\t// Used in Player\n\tdestroy() {\n\t\tthis._rootContainer = null\n\t\tthis._contentContainer = null\n\n\t\tthis._app.view.remove()\n\n\t\tconst shouldRemoveView = true\n\t\tthis._app.destroy(shouldRemoveView)\n\t\tthis._app = null\n\t}\n\n}","// General\nexport const possiblePixelError = 0.5 // Margin of error for pixel computations\nexport const defaultManifestFilename = \"manifest.json\" // Title of the JSON file in a divina folder\nexport const defaultBackgroundColor = 0x000000 // Black to ensure the loading message is visible\nexport const defaultDummyColor = 0x333333\nexport const possibleTagNames = [\"language\", \"resolution\"] // List of allowed tags\n\n// Resources\nexport const acceptableVideoExtensions = [\"mp4\"]\n//export const acceptableImageExtensions = [\"png\", \"jpg\"] // Not used\n\n// Loading message\nexport const textFontFamily = \"Arial\"\nexport const textFontSize = 24\nexport const textFillColor = 0xFFFFFF // White to ensure the message is visible\nexport const wordWrapWidth = 275 // Maximum line width\n\n// Loading parameters\nexport const defaultAllowsDestroy = true\nexport const defaultAllowsParallel = true\n// Nb of pages after the current one for which slice textures should be stored in memory\nexport const defaultMaxNbOfPagesAfter = 1\n// Nb of pages before the current one for which slice textures should be stored in memory,\n// as a share of defaultMaxNbOfPagesAfter\nexport const maxShareOfPagesBefore = 1 / 3\n// Timeout to cancel video load (only in non-parallel loading mode)\nexport const defaultVideoLoadTimeout = 2000\n\n// Story\nexport const defaultContinuous = true // If no value is specified or if the value is invalid\nexport const defaultFit = \"contain\" // If no value is specified or if the value is invalid\nexport const defaultOverflow = \"scrolled\" // If no value is specified or if the value is invalid or \"auto\"\nexport const defaultClipped = false // If no value is specified or if the value is invalid\nexport const defaultSpread = \"none\" // If no value is specified or if the value is invalid or \"auto\"\nexport const defaultDuration = 750 // In milliseconds (used for transitions and snap point jumps)\n\n// User controls\nexport const defaultAllowsZoom = true\nexport const defaultAllowsSwipe = true\nexport const defaultAllowsWheelScroll = true\n// To allow discontinuous gestures to trigger pagination jumps (when overflow === \"scrolled\")\nexport const defaultAllowsPaginatedScroll = true\n// To make pagination sticky (only when overflow === \"paginated\")\nexport const defaultIsPaginationSticky = true\n// To compute automatically-computed snap points from the page start (vs. from the current position)\nexport const defaultIsPaginationGridBased = true\n\n// Interactions\n// Percentage of the relevant viewport dimension (width or height, depending on the story's\n// reading direction) defining an \"active\" hit zone (to detect forward/backward clicks/taps)\nexport const referencePercent = 0.3\nexport const velocityFactor = 10 // For a kinetic scroll\nexport const timeConstant = 325 // For a kinetic scroll\nexport const maxZoomFactor = 3 // Maximum zoom\nexport const zoomSensitivityConstant = 3 // To compute zoom based on scroll\n// Percentage of the relevant dimension to scroll to trigger a valid controlled transition\nexport const viewportDimensionPercent = 0.5\n\n// Snap point speeds: speeds are computed such that the viewport will move by 1 relevant dimension\n// (= the viewport's width or height in pixels) in defaultDuration milliseconds\nexport const snapJumpSpeedFactor = 1 / defaultDuration\n// (with the above, duration of a snap point jump = distance in px / speed,\n// where speed is defaultDuration * snapJumpSpeedFactor (used in Camera))\nexport const stickyMoveSpeedFactor = 1 / defaultDuration\n// (with the above, duration of a sticky snap point move = distance in px / speed,\n// where speed is defaultDuration * stickyMoveSpeedFactor (used in Camera))","import { Text as PIXITextContainer } from \"pixi.js-legacy\"\n\nimport Container from \"./Container\"\n\nimport * as constants from \"../constants\"\n\n// All functions are used in TextManager\n\nexport default class TextElement extends Container {\n\n\tconstructor(name, parent) {\n\t\tconst {\n\t\t\ttextFontFamily,\n\t\t\ttextFontSize,\n\t\t\ttextFillColor,\n\t\t\twordWrapWidth,\n\t\t} = constants\n\t\tconst pixiTextContainer = new PIXITextContainer(\"\", {\n\t\t\tfontFamily: textFontFamily,\n\t\t\tfontSize: textFontSize,\n\t\t\tfill: textFillColor,\n\t\t\twordWrap: true,\n\t\t\twordWrapWidth,\n\t\t})\n\t\tpixiTextContainer.anchor.set(0.5)\n\n\t\tsuper(name, parent, pixiTextContainer)\n\t}\n\n\tsetText(text) {\n\t\tthis._pixiContainer.text = text\n\t}\n\n\tdestroy() {\n\t\tthis._pixiContainer.destroy({ children: true, texture: true, baseTexture: true })\n\t\tthis.removeFromParent()\n\t}\n\n}","import {\n\tSprite as PIXISprite,\n\tAnimatedSprite as PIXIAnimatedSprite,\n\tTexture as PIXITexture,\n} from \"pixi.js-legacy\"\n\nimport Container from \"./Container\"\n\nimport * as constants from \"../constants\"\n\nexport default class TextureElement extends Container {\n\n\t// Used in Slice\n\n\tget role() { return this._role }\n\n\tget resourceManager() {\n\t\treturn (this._player) ? this._player.resourceManager : null\n\t}\n\n\tget texture() { // Not relevant to a sequence slice\n\t\tif (this._playableSprite && this._playableSprite.texture) {\n\t\t\treturn this._playableSprite.texture\n\t\t}\n\t\treturn this._sprite.texture\n\t}\n\n\t// Used in LayerPile\n\n\tget scale() { return this._scale } // For a parent slice (i.e. when role is \"layersParent\")\n\n\tget size() {\n\t\t// If the resource is (possibly) clipped, return the (possibly) clipped size\n\t\tif (this._clipped === true) {\n\t\t\tconst { viewportRect } = this._player\n\t\t\treturn {\n\t\t\t\twidth: Math.min(this._width * this._scale, viewportRect.width),\n\t\t\t\theight: Math.min(this._height * this._scale, viewportRect.height),\n\t\t\t}\n\t\t}\n\t\t// Otherwise just return the actual size of the sprite in the viewport\n\t\treturn {\n\t\t\twidth: this._width * this._scale,\n\t\t\theight: this._height * this._scale,\n\t\t}\n\t}\n\n\t// Used below\n\tget unclippedSize() {\n\t\tif (this._clipped === false) {\n\t\t\treturn this.size\n\t\t}\n\t\treturn {\n\t\t\twidth: this._width * this._scale,\n\t\t\theight: this._height * this._scale,\n\t\t}\n\t}\n\n\tconstructor(resource, player, parentInfo = null, neighbor = null) {\n\t\tsuper()\n\n\t\tthis._role = (resource) ? resource.role : null\n\t\tthis._player = player\n\t\tthis._parentInfo = parentInfo\n\t\tthis._neighbor = neighbor\n\n\t\tthis._sprite = new PIXISprite()\n\t\tthis._sprite.anchor.set(0.5)\n\t\tthis._pixiContainer.addChild(this._sprite)\n\n\t\tthis._playableSprite = null\n\t\tthis._namePrefix = null\n\n\t\tthis._width = 0\n\t\tthis._height = 0\n\t\tthis._scale = 1\n\n\t\tthis._clipped = false\n\n\t\tthis._duration = 0\n\n\t\t// Set a (surely temporary) size\n\t\tconst { viewportRect } = player\n\t\tconst { width, height } = resource || {}\n\t\tconst actualWidth = (width > 0) ? width : viewportRect.width\n\t\tconst actualHeight = (height > 0) ? height : viewportRect.height\n\t\tthis._setSize({ width: actualWidth, height: actualHeight })\n\n\t\tif (this._role === \"layersParent\") {\n\t\t\tthis._sprite.visible = false\n\t\t}\n\t}\n\n\t_setSize(size) {\n\t\tconst { width, height } = size\n\n\t\tthis._width = width\n\t\tthis._height = height\n\n\t\tthis._sprite.width = width\n\t\tthis._sprite.height = height\n\n\t\tif (this._playableSprite) {\n\t\t\tthis._playableSprite.width = this._width\n\t\t\tthis._playableSprite.height = this._height\n\t\t}\n\t}\n\n\t_assignDummyTexture() {\n\t\tthis._setTexture(PIXITexture.WHITE)\n\t\tthis._setTint(constants.defaultDummyColor)\n\t}\n\n\t_setTexture(texture) {\n\t\t// No need to add a texture to a parent slice\n\t\tif (this._role === \"layersParent\") {\n\t\t\treturn\n\t\t}\n\t\tif (!texture) {\n\t\t\tthis._assignDummyTexture()\n\t\t} else {\n\t\t\tthis._sprite.texture = texture\n\t\t\tthis._setTint(0xFFFFFF)\n\t\t}\n\t}\n\n\t_setTint(tint) {\n\t\tthis._sprite.tint = tint\n\t}\n\n\t_assignEmptyTexture() {\n\t\tthis._setTexture(PIXITexture.WHITE)\n\t\tthis._setTint(constants.defaultBackgroundColor)\n\t}\n\n\t_setVideoTexture(texture) {\n\t\tthis._sprite.texture = null\n\t\tif (!this._playableSprite) {\n\t\t\tthis._addPlayableSprite()\n\t\t}\n\t\tthis._playableSprite.texture = texture\n\t}\n\n\t_addPlayableSprite(texturesArray = null) {\n\t\tif (texturesArray && texturesArray.length > 0) { // For a sequence slice\n\t\t\tthis._playableSprite = new PIXIAnimatedSprite(texturesArray)\n\t\t} else { // For a video slice\n\t\t\tthis._playableSprite = new PIXISprite()\n\t\t}\n\t\tthis._playableSprite.anchor.set(0.5)\n\n\t\tconst spriteName = `${this._name}PlayableSprite`\n\t\tthis._playableSprite.name = spriteName\n\n\t\tthis._pixiContainer.addChild(this._playableSprite)\n\n\t\tif (this._maskingPixiContainer) {\n\t\t\tthis._pixiContainer.addChild(this._maskingPixiContainer)\n\t\t}\n\t}\n\n\t// Used in SequenceSlice (since clipped forced to true, a mask will necessarily be created)\n\tsetTexturesArray(texturesArray) {\n\t\tthis._sprite.texture = null\n\t\t// PixiJS does not allow for a direct assignement (playableSprite.textures = texturesArray),\n\t\t// so remove the sequence sprite before recreating it\n\t\tif (this._playableSprite) {\n\t\t\tthis._pixiContainer.removeChild(this._playableSprite)\n\t\t\tthis._playableSprite = null\n\t\t}\n\t\tthis._addPlayableSprite(texturesArray)\n\t}\n\n\t// Used in Container (called with parent = null) and LayerPile (via Slice)\n\t// Bear in mind that the parent of a layersLayer slice is a segment (not the parentSlice!)\n\tsetParent(parent = null) {\n\t\tsuper.setParent(parent)\n\n\t\t// Keep the existing name for a transition slice\n\t\tif (!parent || (this._name && this._role === \"transition\")) {\n\t\t\treturn\n\t\t}\n\n\t\tlet { name } = parent\n\t\tif (this._parentInfo) {\n\t\t\tname += `Layer${this._parentInfo.layerIndex}`\n\t\t}\n\t\tif (this._role === \"transition\") {\n\t\t\tname += \"Transition\"\n\t\t}\n\t\tthis._sprite.name = `${name}Sprite`\n\t\tconst suffix = \"Slice\"\n\t\tthis._setName(name, suffix)\n\t}\n\n\tresize(fit, clipped) {\n\t\tthis._clipped = clipped\n\n\t\tthis._applyFit(fit)\n\t\tif (clipped === true) {\n\t\t\tthis._applyClip()\n\t\t}\n\n\t\t// If the slice has a parent slice, position it respective to that parent slice\n\t\tif (this._role === \"layersLayer\" && this._parentInfo) {\n\t\t\t// Used unclippedSize since to ensure that the position is based\n\t\t\t// on the top left point of the parent slice (instead of the effective viewport)\n\t\t\tconst { unclippedSize } = this._parentInfo.slice\n\t\t\tthis._sprite.position = {\n\t\t\t\tx: (this.size.width - unclippedSize.width) / (2 * this._scale),\n\t\t\t\ty: (this.size.height - unclippedSize.height) / (2 * this._scale),\n\t\t\t}\n\t\t\tif (this._playableSprite) {\n\t\t\t\tthis._playableSprite.position = this._sprite.position\n\t\t\t}\n\t\t\tif (this._maskingPixiContainer) {\n\t\t\t\tthis._maskingPixiContainer.position = this._sprite.position\n\t\t\t}\n\t\t}\n\t}\n\n\t_applyFit(fit) {\n\t\tif (!this._width || !this._height\n\t\t\t|| this._role === \"layersLayer\") { // Scale will remain at 1 for a child\n\t\t\treturn\n\t\t}\n\n\t\tconst ratio = this._width / this._height\n\t\tconst { viewportRect } = this._player\n\t\tconst { height } = viewportRect\n\t\tlet { width } = viewportRect\n\n\t\t// In double reading mode, fit the resource inside a rectangle half the viewport width (maximum)\n\t\tif (this._player.readingMode === \"double\") {\n\t\t\twidth = this._getWidthForHalfSegmentSlice(width)\n\t\t}\n\n\t\t// Compute the scale to be applied to the container based on fit\n\t\tconst viewportRatio = width / height\n\t\tlet scale = 1\n\t\tswitch (fit) {\n\t\tcase \"height\":\n\t\t\tscale = this._getScaleWhenForcingHeight(height)\n\t\t\tbreak\n\t\tcase \"width\":\n\t\t\tscale = this._getScaleWhenForcingWidth(width)\n\t\t\tbreak\n\t\tcase \"contain\":\n\t\t\tif (ratio >= viewportRatio) {\n\t\t\t\tscale = this._getScaleWhenForcingWidth(width)\n\t\t\t} else {\n\t\t\t\tscale = this._getScaleWhenForcingHeight(height)\n\t\t\t}\n\t\t\tbreak\n\t\tcase \"cover\":\n\t\t\tif (ratio >= viewportRatio) {\n\t\t\t\tscale = this._getScaleWhenForcingHeight(height)\n\t\t\t} else {\n\t\t\t\tscale = this._getScaleWhenForcingWidth(width)\n\t\t\t}\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\n\t\t// Now apply the scale to the container\n\t\tif (this._role === \"layersParent\") {\n\t\t\tif (this._scale !== scale) { // To prevent triggering an infinite loop\n\t\t\t\tthis.setScale(scale)\n\t\t\t\tif (this._parent) {\n\t\t\t\t\tthis._parent.resizePage()\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setScale(scale)\n\t\t}\n\t}\n\n\t_getWidthForHalfSegmentSlice(width) {\n\t\tlet actualWidth = width\n\t\tif (this._neighbor) {\n\t\t\tconst { size } = this._neighbor\n\t\t\tactualWidth = Math.min(width / 2, size.width)\n\t\t} else {\n\t\t\tactualWidth /= 2\n\t\t}\n\t\treturn actualWidth\n\t}\n\n\t_getScaleWhenForcingHeight(viewportHeight) {\n\t\tconst scale = viewportHeight / this._height\n\t\treturn scale\n\t}\n\n\t_getScaleWhenForcingWidth(viewportWidth) {\n\t\tconst scale = viewportWidth / this._width\n\t\treturn scale\n\t}\n\n\t// Size the clipping mask based on viewport size if the resource needs to be clipped\n\t_applyClip() {\n\t\tif (!this._maskingPixiContainer) {\n\t\t\tthis.addMask()\n\t\t}\n\t\tconst { viewportRect } = this._player\n\t\tconst { width, height } = viewportRect\n\t\tthis.setMaskRect((-width / this._scale) / 2, (-height / this._scale) / 2,\n\t\t\twidth / this._scale, height / this._scale)\n\t}\n\n\t// Used in Slice on final destroy\n\tdestroy() {\n\t\tthis._sprite.texture = null\n\t\tif (this._playableSprite) {\n\t\t\tthis._playableSprite.texture = null\n\t\t}\n\t}\n\n}","import { Loader as PIXILoader } from \"pixi.js-legacy\"\n\n// Note that the Loader will necessarily store and handle PIXI Textures\n// All functions are used in ResourceManager\n\nexport default class Loader {\n\n\tget hasTasks() { return (Object.values(this._pathsToLoad).length > 0) }\n\n\tconstructor() {\n\t\tthis._pathsToLoad = {}\n\n\t\tthis._loader = new PIXILoader()\n\t\tthis._loader.onError.add((error, loader, resource) => {\n\t\t\tconst { name } = resource\n\t\t\tthis._pathsToLoad[name] = false\n\t\t})\n\t}\n\n\t// Kill the ongoing loading operation (if there is one)\n\treset() {\n\t\tthis._pathsToLoad = {}\n\t\tthis._loader.reset()\n\t}\n\n\t// Add a sourcePath to the list of source paths to load\n\tadd(name, sourcePath) {\n\t\tthis._pathsToLoad[name] = true\n\t\tthis._loader.add(name, sourcePath)\n\t}\n\n\t// Load stored source paths\n\tload() {\n\t\tthis._loader.load()\n\t}\n\n\t// For each array of resources (source paths) that have been correctly loaded...\n\tonComplete(doWithTextureDataArray) {\n\t\tif (!doWithTextureDataArray) {\n\t\t\treturn\n\t\t}\n\t\tthis._loader.onComplete.add((_, resources) => {\n\t\t\tconst textureDataArray = []\n\t\t\tObject.values(resources).forEach((resource) => {\n\t\t\t\tconst { name, texture } = resource\n\t\t\t\tif (this._pathsToLoad[name] === true && texture && texture.baseTexture) {\n\t\t\t\t\tconst textureData = {\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tbaseTexture: texture.baseTexture,\n\t\t\t\t\t\ttexture,\n\t\t\t\t\t}\n\t\t\t\t\ttextureDataArray.push(textureData)\n\t\t\t\t}\n\t\t\t})\n\t\t\tdoWithTextureDataArray(textureDataArray)\n\t\t})\n\t}\n\n}","import * as constants from \"./constants\"\n\n// For type checking (used below)\n\nconst isAString = (value) => ( // Used below\n\t(typeof value === \"string\" || value instanceof String)\n)\n\nconst isANumber = (value) => (Number.isFinite(value)) // Used below\n\n// For handling resources\n\nconst getFileExtension = (path) => {\n\tif (!path) {\n\t\treturn null\n\t}\n\tconst pathParts = path.split(\".\")\n\tconst extension = pathParts[pathParts.length - 1]\n\treturn extension\n}\n\nconst isOfType = (path, acceptableGeneralType, acceptableExtensions) => {\n\tconst extension = getFileExtension(path)\n\tlet isExtensionAcceptable = false\n\tif (extension && acceptableExtensions) {\n\t\tacceptableExtensions.forEach((acceptableExtension) => {\n\t\t\t// Compare the uppercase versions of the extension strings\n\t\t\tif (extension.toUpperCase() === acceptableExtension.toUpperCase()) {\n\t\t\t\tisExtensionAcceptable = true\n\t\t\t}\n\t\t})\n\t}\n\treturn isExtensionAcceptable\n}\n\nconst isAVideo = (path) => (\n\tisOfType(path, \"video\", constants.acceptableVideoExtensions)\n)\n\n/*const isAnImage = (path) => (\n\tisOfType(path, \"image\", constants.acceptableImageExtensions)\n)*/\n\n// For parsing the aspect ratio value written as a string in the divina's viewportRatio property\nconst parseAspectRatio = (ratio) => {\n\tif (!ratio) {\n\t\treturn null\n\t}\n\tconst parts = ratio.split(\":\")\n\tif (parts.length !== 2) {\n\t\treturn null\n\t}\n\tconst width = Number(parts[0])\n\tconst height = Number(parts[1])\n\tif (isANumber(width) === true && isANumber(height) === true && height !== 0) {\n\t\treturn (width / height)\n\t}\n\treturn null\n}\n\n// For splitting an href into path and mediaFragment\nconst getPathAndMediaFragment = (href) => {\n\tconst hrefParts = (href && href.split) ? href.split(\"#\") : []\n\tconst path = hrefParts[0]\n\tconst mediaFragment = (hrefParts.length > 1) ? hrefParts[1] : null\n\treturn { path, mediaFragment }\n}\n\n// For parsing a media fragment string\nconst parseMediaFragment = (mediaFragment) => {\n\tif (!mediaFragment) {\n\t\treturn null\n\t}\n\tconst mediaFragmentParts = mediaFragment.split(\"=\")\n\tif (mediaFragmentParts.length !== 2) {\n\t\treturn null\n\t}\n\n\tlet unit = \"pixel\"\n\tlet xywh = null\n\tlet fragmentInfo = mediaFragmentParts[1]\n\tfragmentInfo = fragmentInfo.split(\":\")\n\tif (fragmentInfo.length === 1) {\n\t\t[xywh] = fragmentInfo\n\t} else if (fragmentInfo.length === 2) {\n\t\t[unit, xywh] = fragmentInfo\n\t} else {\n\t\treturn null\n\t}\n\n\tif (unit !== \"percent\" && unit !== \"pixel\") {\n\t\treturn null\n\t}\n\tconst xywhArray = xywh.split(\",\")\n\tif (xywhArray.length !== 4) {\n\t\treturn null\n\t}\n\n\tlet [x, y, w, h] = xywhArray\n\tx = Number(x)\n\ty = Number(y)\n\tw = Number(w)\n\th = Number(h)\n\tif (isANumber(x) === false\n\t\t|| isANumber(y) === false\n\t\t|| isANumber(w) === false\n\t\t|| isANumber(h) === false) {\n\t\treturn null\n\t}\n\n\treturn {\n\t\tunit, x, y, w, h,\n\t}\n}\n\nconst getRectForMediaFragmentAndSize = (mediaFragment, { width, height }) => {\n\tif (!mediaFragment) {\n\t\treturn null\n\t}\n\tconst parsedString = parseMediaFragment(mediaFragment)\n\n\tif (!parsedString\n\t\t|| (parsedString.unit !== \"percent\" && parsedString.unit !== \"pixel\")) {\n\t\treturn null\n\t}\n\n\tconst { unit } = parsedString\n\tlet {\n\t\tx, y, w, h,\n\t} = parsedString\n\tif (isANumber(x) === false\n\t\t|| isANumber(y) === false\n\t\t|| isANumber(w) === false\n\t\t|| isANumber(h) === false) {\n\t\treturn null\n\t}\n\n\tif (unit === \"percent\") {\n\t\tx *= width / 100\n\t\ty *= height / 100\n\t\tw *= width / 100\n\t\th *= height / 100\n\t}\n\n\t// Correct potential mistakes in the way the media fragment was written\n\t// by limiting the fragment to the natural dimensions of the resource\n\tx = Math.min(Math.max(x, 0), width)\n\ty = Math.min(Math.max(y, 0), height)\n\tw = Math.min(Math.max(w, 0), width - x)\n\th = Math.min(Math.max(h, 0), height - y)\n\n\treturn {\n\t\tx, y, width: w, height: h,\n\t}\n}\n\nconst getShortenedHref = (href) => {\n\tif (!href) {\n\t\treturn null\n\t}\n\treturn href.split(\"#\")[0]\n}\n\n// For parsing and computing the coordinate of a relative resource point\nconst parseCoordinate = (value, dimensionLength) => {\n\tif (!value) {\n\t\treturn null\n\t}\n\tif (isAString(value) === false) {\n\t\treturn null\n\t}\n\tlet valueParts = value.split(\"%\")\n\tlet relValue = valueParts[0]\n\tif (valueParts.length !== 2) {\n\t\treturn null\n\t}\n\tif (Number.isNaN(Number(relValue)) === false) {\n\t\treturn (Number(relValue) * dimensionLength) / 100\n\t}\n\tvalueParts = relValue.split(\"px\")\n\trelValue = Number(valueParts[0])\n\tif (valueParts.length === 2 && Number.isNaN(Number(relValue)) === false) {\n\t\treturn Number(relValue)\n\t}\n\treturn null\n}\n\n// For measuring a distance between 2 points (used for snap points and pinch)\nconst getDistance = (point1, point2) => (\n\tMath.sqrt((point2.x - point1.x) ** 2 + (point2.y - point1.y) ** 2)\n)\n\nexport {\n\tisANumber,\n\tisAVideo,\n\tparseAspectRatio,\n\tgetPathAndMediaFragment,\n\tgetRectForMediaFragmentAndSize,\n\tgetShortenedHref,\n\tparseCoordinate,\n\tgetDistance,\n}","import { Texture as PIXITexture, Rectangle as PIXIRectangle } from \"pixi.js-legacy\"\n\nimport * as Utils from \"../utils\"\n\n// A texture stored in the loader will need to have the following properties:\n// - If it corresponds to an image: .frame.width and .frame.height\n// - If it corresponds to a video: .video (the video itself will need to be a videoElement,\n//   i.e. it should include videoWidth, videoHeight and duration properties)\n\nexport default class Texture {\n\n\t// Used in TextureResource\n\tstatic createVideoTexture(videoPath) {\n\t\tconst texture = PIXITexture.from(videoPath)\n\t\t// Prevent autoplay at start\n\t\ttexture.baseTexture.resource.autoPlay = false\n\t\t// Store a reference to video at texture level for convenience\n\t\tconst video = texture.baseTexture.resource.source\n\t\ttexture.baseTexture.video = video\n\t\ttexture.video = video\n\t\treturn texture\n\t}\n\n\t// Used in TextureResource\n\tstatic cropToFragment(uncroppedTexture, mediaFragment) {\n\t\tconst texture = uncroppedTexture.clone()\n\n\t\tconst rect = Utils.getRectForMediaFragmentAndSize(mediaFragment, texture)\n\t\tif (rect) {\n\t\t\tconst {\n\t\t\t\tx, y, width, height,\n\t\t\t} = rect\n\t\t\tconst frame = new PIXIRectangle(x, y, width, height)\n\t\t\ttexture.frame = frame\n\t\t\ttexture.updateUvs()\n\t\t}\n\n\t\treturn texture\n\t}\n\n}","import { TextElement, Container } from \"./Renderer\"\n\nexport default class TextManager extends Container {\n\n\tconstructor(mainContainer) {\n\t\tsuper(\"textManager\", mainContainer)\n\n\t\tthis._textElement = new TextElement(\"textElement\", this)\n\t}\n\n\tshowMessage(message) { // Where message should be = { type, data }\n\t\t// Beware: we can have message.text = 0 (when divina loading starts)\n\t\tif (!message || !message.type || message.data === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\t// Write full text based on message type\n\t\tconst { type, data } = message\n\t\tlet text = null\n\t\tswitch (type) {\n\t\tcase \"loading\":\n\t\t\ttext = `Loading... ${data}%`\n\t\t\tbreak\n\t\tcase \"error\":\n\t\t\ttext = `ERROR!\\n${data}`\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\n\t\tif (!this._textElement || !text) {\n\t\t\treturn\n\t\t}\n\t\tthis._textElement.setText(text)\n\t}\n\n\tdestroy() {\n\t\t// Since this destroy function already runs after all first resources have loaded,\n\t\t// ensure the Player's ultimate call to it does not try and achieve the same\n\t\tif (!this._textElement) {\n\t\t\treturn\n\t\t}\n\t\tthis._textElement.destroy()\n\t\tthis._textElement = null\n\n\t\tthis.removeFromParent()\n\t}\n\n}","import * as Hammer from \"hammerjs\"\n\nimport * as Utils from \"./utils\"\nimport * as constants from \"./constants\"\n\nexport default class InteractionManager {\n\n\tconstructor(player, rootElement) {\n\t\tthis._player = player // Useful only to get viewportRect below\n\t\tthis._rootElement = rootElement\n\n\t\t// Create Hammer object to handle user gestures\n\t\tthis._mc = new Hammer.Manager(rootElement)\n\n\t\t// Implement single and double tap detection\n\t\tconst singleTap = new Hammer.Tap({ event: \"singletap\" })\n\t\tconst doubleTap = new Hammer.Tap({ event: \"doubletap\", taps: 2 })\n\t\tthis._mc.add([doubleTap, singleTap])\n\t\tsingleTap.requireFailure(doubleTap)\n\t\tdoubleTap.recognizeWith(singleTap)\n\n\t\t// Only finalize the implementation of single tap detection at this stage\n\t\tthis._handleSingleTap = this._handleSingleTap.bind(this)\n\t\tthis._mc.on(\"singletap\", this._handleSingleTap)\n\n\t\tthis._pageNavigator = null\n\t\tthis._doOnCenterTap = null\n\t\tthis._percentFunction = null // For (non-wheel scroll) viewport drags\n\t\tthis._initialTouchPoint = null // For non-wheel scroll zoom\n\t\tthis._lastScrollEvent = null // For non-wheel scroll in general\n\t\tthis._wasLastEventPanend = false // For (non-wheel scroll) viewport drags\n\t}\n\n\t_handleSingleTap(e) {\n\t\t// If story not loaded yet, only allow a center tap\n\t\tif (!this._pageNavigator) {\n\t\t\tif (this._doOnCenterTap) {\n\t\t\t\tthis._doOnCenterTap()\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tconst { viewportRect } = this._player\n\t\tconst {\n\t\t\tx, y, width, height,\n\t\t} = this._rootElement.getBoundingClientRect()\n\n\t\t// Get coordinates of the canvas' origin in _rootElement\n\t\tconst topLeftCanvasPoint = {\n\t\t\tx: (width - viewportRect.width) / 2,\n\t\t\ty: (height - viewportRect.height) / 2,\n\t\t}\n\n\t\t// Compute the reference lengths used for checking what viewport zone a hit lies in\n\t\tconst { referencePercent } = constants\n\t\tconst referenceXLength = topLeftCanvasPoint.x + viewportRect.width * referencePercent\n\t\tconst referenceYLength = topLeftCanvasPoint.y + viewportRect.height * referencePercent\n\n\t\tconst hitPointer = e.center\n\t\tconst hitX = hitPointer.x - x\n\t\tconst hitY = hitPointer.y - y\n\n\t\t// Based on the PageNavigator's direction and where in the window the user tap lied in,\n\t\t// decide whether the tap was a forward, center or backward tap\n\t\tthis._handleDiscontinuousGesture(true, (hitX >= width - referenceXLength),\n\t\t\t(hitX <= referenceXLength), (hitY >= height - referenceYLength),\n\t\t\t(hitY <= referenceYLength), this._doOnCenterTap)\n\t}\n\n\t_handleDiscontinuousGesture(expression, goRightIntentExpression, goLeftIntentExpression,\n\t\tgoDownIntentExpression, goUpIntentExpression, doOtherwise = null) {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { currentPage } = this._pageNavigator\n\t\tconst { hitZoneToPrevious, hitZoneToNext } = currentPage || {}\n\n\t\tlet { goForward, goBackward } = this._pageNavigator\n\t\tgoForward = goForward.bind(this._pageNavigator)\n\t\tgoBackward = goBackward.bind(this._pageNavigator)\n\n\t\tif ((expression === goRightIntentExpression && hitZoneToNext === \"right\")\n\t\t\t|| (expression === goLeftIntentExpression && hitZoneToNext === \"left\")\n\t\t\t|| (expression === goDownIntentExpression && hitZoneToNext === \"bottom\")\n\t\t\t|| (expression === goUpIntentExpression && hitZoneToNext === \"top\")) {\n\t\t\tgoForward()\n\t\t} else if ((expression === goRightIntentExpression && hitZoneToPrevious === \"right\")\n\t\t\t|| (expression === goLeftIntentExpression && hitZoneToPrevious === \"left\")\n\t\t\t|| (expression === goDownIntentExpression && hitZoneToPrevious === \"bottom\")\n\t\t\t|| (expression === goUpIntentExpression && hitZoneToPrevious === \"top\")) {\n\t\t\tgoBackward()\n\t\t} else if (doOtherwise) {\n\t\t\tdoOtherwise()\n\t\t}\n\t}\n\n\tsetStoryInteractions(options) {\n\t\tconst {\n\t\t\tdoOnCenterTap,\n\t\t\tallowsZoom,\n\t\t\tallowsSwipe,\n\t\t\tallowsWheelScroll,\n\t\t\tisPaginationSticky,\n\t\t} = options\n\t\tthis._doOnCenterTap = doOnCenterTap\n\t\tthis._allowsZoom = (allowsZoom === true || allowsZoom === false)\n\t\t\t? allowsZoom\n\t\t\t: constants.defaultAllowsZoom\n\t\tthis._allowsSwipe = (allowsSwipe === true || allowsSwipe === false)\n\t\t\t? allowsSwipe\n\t\t\t: constants.defaultAllowsSwipe\n\t\tthis._allowsWheelScroll = (allowsWheelScroll === true || allowsWheelScroll === false)\n\t\t\t? allowsWheelScroll\n\t\t\t: constants.defaultAllowsWheelScroll\n\t\tthis._isPaginationSticky = (isPaginationSticky === true || isPaginationSticky === false)\n\t\t\t? isPaginationSticky\n\t\t\t: constants.defaultIsPaginationSticky\n\t}\n\n\tsetPageNavigator(pageNavigator) {\n\t\tif (!pageNavigator) {\n\t\t\treturn\n\t\t}\n\n\t\t// If this is a pageNavigator change, no need to recreate gesture handlers\n\t\tif (this._pageNavigator) {\n\t\t\tthis._pageNavigator = pageNavigator\n\t\t\treturn\n\t\t}\n\n\t\t// The first time a pageNavigator is set however, gesture handlers neet to be set up\n\n\t\tthis._pageNavigator = pageNavigator\n\n\t\t// Implement key press handling\n\t\tthis._handleKeyUp = this._handleKeyUp.bind(this)\n\t\twindow.addEventListener(\"keyup\", this._handleKeyUp)\n\n\t\t// Implement zoom handling if relevant\n\n\t\tif (this._allowsZoom === true) {\n\n\t\t\t// Finalize the implementation of double tap detection\n\t\t\tthis._handleDoubleTap = this._handleDoubleTap.bind(this)\n\t\t\tthis._mc.on(\"doubletap\", this._handleDoubleTap)\n\n\t\t\t// Implement pinch detection for touch devices\n\t\t\tconst pinch = new Hammer.Pinch()\n\t\t\tthis._mc.add(pinch)\n\t\t\tthis._handlePinch = this._handlePinch.bind(this)\n\t\t\tthis._mc.on(\"pinch\", this._handlePinch)\n\n\t\t\t// Zooming will also be possible via ctrl/alt + scroll\n\t\t}\n\n\t\t// Implement swipe detection if relevant\n\t\tif (this._allowsSwipe === true) {\n\t\t\tconst swipe = new Hammer.Swipe({\n\t\t\t\tdirection: Hammer.DIRECTION_ALL,\n\t\t\t\tvelocity: 0.3, // Default value is 0.3\n\t\t\t})\n\t\t\tthis._mc.add(swipe)\n\t\t\tthis._handleSwipe = this._handleSwipe.bind(this)\n\t\t\tthis._mc.on(\"swipeleft swiperight swipeup swipedown\", this._handleSwipe)\n\t\t}\n\n\t\t// Implement non-wheel (= pan) scroll detection\n\n\t\tconst pan = new Hammer.Pan({ direction: Hammer.DIRECTION_ALL })\n\t\tthis._mc.add(pan)\n\t\tthis._onNonWheelScroll = this._onNonWheelScroll.bind(this)\n\t\tthis._mc.on(\"panleft panright panup pandown panend\", this._onNonWheelScroll)\n\n\t\t// Implement wheel scroll detection if relevant\n\t\tif (this._allowsWheelScroll === true) {\n\t\t\tthis._onWheelScroll = this._onWheelScroll.bind(this)\n\t\t\tthis._rootElement.addEventListener(\"wheel\", this._onWheelScroll)\n\t\t}\n\n\t\t// Reset scroll (works for both wheel and non-wheel scroll)\n\t\tthis._resetScroll()\n\t}\n\n\t// Double tap is used to trigger the \"quick change\" zoom (switching zoomFactor at once\n\t// between the values of 1 and maxZoomFactor - the value defined in constants.js)\n\t_handleDoubleTap(e) {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst touchPoint = e.center\n\t\tconst zoomData = { isContinuous: false, touchPoint }\n\t\tthis._pageNavigator.zoom(zoomData)\n\t}\n\n\t_handlePinch(e) {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tif (e.type === \"pinchend\") {\n\t\t\tthis._lastDistance = null\n\t\t} else {\n\t\t\tconst { viewportRect } = this._player\n\t\t\tconst pointers = [\n\t\t\t\t{ x: viewportRect.width / 2, y: viewportRect.height / 2 },\n\t\t\t\t{ x: e.center.x, y: e.center.y },\n\t\t\t]\n\t\t\tconst distance = Utils.getDistance(pointers[0], pointers[1])\n\t\t\tif (!this._lastDistance) {\n\t\t\t\tthis._lastDistance = distance\n\t\t\t} else if (this._lastDistance > 0) {\n\t\t\t\tconst touchPoint = {\n\t\t\t\t\tx: (pointers[0].x + pointers[1].x) / 2,\n\t\t\t\t\ty: (pointers[0].y + pointers[1].y) / 2,\n\t\t\t\t}\n\t\t\t\tconst zoomData = {\n\t\t\t\t\tisContinuous: true,\n\t\t\t\t\ttouchPoint,\n\t\t\t\t\tmultiplier: distance / this._lastDistance,\n\t\t\t\t}\n\t\t\t\tthis._pageNavigator.zoom(zoomData)\n\t\t\t\tthis._lastDistance = distance\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleKeyUp(e) {\n\t\tthis._handleDiscontinuousGesture(e.code, \"ArrowRight\", \"ArrowLeft\", \"ArrowDown\", \"ArrowUp\")\n\t}\n\n\t_handleSwipe(e) {\n\t\tthis._handleDiscontinuousGesture(e.type, \"swipeleft\", \"swiperight\", \"swipeup\", \"swipedown\")\n\t}\n\n\t// For touch-device and mouse click-and-drag scroll events\n\t_onNonWheelScroll(e) {\n\t\trequestAnimationFrame(() => {\n\t\t\tif (!this._pageNavigator) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tsrcEvent,\n\t\t\t\ttype,\n\t\t\t\tcenter,\n\t\t\t\tdeltaX,\n\t\t\t\tdeltaY,\n\t\t\t} = e\n\n\t\t\t// For a zoom non-wheel scroll (i.e. ctrl/alt + non-wheel scroll)\n\t\t\tif ((srcEvent.ctrlKey || srcEvent.altKey) && this._allowsZoom === true) {\n\n\t\t\t\t// Store the coordinates of the first touch point of the gesture\n\t\t\t\tif (!this._initialTouchPoint) {\n\t\t\t\t\tthis._initialTouchPoint = center\n\t\t\t\t}\n\n\t\t\t\t// If the gesture has finished, reset zoom handling information\n\t\t\t\tif (type === \"panend\") {\n\t\t\t\t\tthis._resetScroll()\n\t\t\t\t\tthis._initialTouchPoint = null\n\n\t\t\t\t// If the gesture is going on, send zoom data to the current page navigator\n\t\t\t\t} else {\n\t\t\t\t\tconst zoomData = {\n\t\t\t\t\t\tisContinuous: true,\n\t\t\t\t\t\ttouchPoint: this._initialTouchPoint,\n\t\t\t\t\t\tdelta: deltaY - this._lastScrollEvent.deltaY,\n\t\t\t\t\t}\n\t\t\t\t\tthis._pageNavigator.zoom(zoomData)\n\t\t\t\t\tthis._lastScrollEvent = e\n\t\t\t\t}\n\n\t\t\t// When a non-zoom non-wheel scroll ends\n\t\t\t} else if (type === \"panend\") {\n\t\t\t\t// If this event immediately follows a panend, cancel it\n\t\t\t\tif (this._wasLastEventPanend === true) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis._resetScroll()\n\t\t\t\tthis._wasLastEventPanend = true\n\n\t\t\t\t// Attempt a sticky page change if possible, and should it fail,\n\t\t\t\t// then only trigger a drag end (via _releaseScroll)\n\t\t\t\tif (this._isPaginationSticky === false\n\t\t\t\t\t|| this._pageNavigator.attemptStickyStep() === false) {\n\t\t\t\t\tthis._releaseScroll(e)\n\t\t\t\t}\n\n\t\t\t// For normal non-wheel scroll\n\t\t\t} else {\n\t\t\t\tconst scrollEvent = {\n\t\t\t\t\tdeltaX: deltaX - this._lastScrollEvent.deltaX,\n\t\t\t\t\tdeltaY: deltaY - this._lastScrollEvent.deltaY,\n\t\t\t\t}\n\t\t\t\tconst isWheelScroll = false\n\t\t\t\tthis._scroll(scrollEvent, isWheelScroll)\n\t\t\t\tthis._lastScrollEvent = e\n\t\t\t\tthis._wasLastEventPanend = false\n\t\t\t}\n\t\t})\n\t}\n\n\t_resetScroll() {\n\t\tthis._lastScrollEvent = {\n\t\t\tdeltaX: 0,\n\t\t\tdeltaY: 0,\n\t\t}\n\t}\n\n\t// Record velocity and timestamp on drag end (i.e. on scroll release)\n\t_releaseScroll(e) {\n\t\tconst velocity = {\n\t\t\tx: -e.velocityX * constants.velocityFactor,\n\t\t\ty: -e.velocityY * constants.velocityFactor,\n\t\t}\n\t\tconst releaseDate = Date.now()\n\t\tthis._autoScroll(velocity, releaseDate)\n\t}\n\n\t// Apply kinetic scrolling formula after drag end (i.e. on scroll release)\n\t_autoScroll(velocity, releaseDate) {\n\t\tconst elapsedTime = Date.now() - releaseDate\n\t\tlet deltaX = -velocity.x * Math.exp(-elapsedTime / constants.timeConstant)\n\t\tlet deltaY = -velocity.y * Math.exp(-elapsedTime / constants.timeConstant)\n\n\t\t// Simple hack to allow for a smoother stop (using half pixels)\n\t\tif (Math.abs(deltaX) < 1 || Math.abs(deltaY) < 1) {\n\t\t\tdeltaX = Math.round(deltaX * 2) / 2\n\t\t\tdeltaY = Math.round(deltaY * 2) / 2\n\t\t} else {\n\t\t\tdeltaX = Math.round(deltaX)\n\t\t\tdeltaY = Math.round(deltaY)\n\t\t}\n\t\tif (Math.abs(deltaX) >= 0.5 || Math.abs(deltaY) >= 0.5) {\n\t\t\tthis._scroll({ deltaX, deltaY })\n\t\t\trequestAnimationFrame(this._autoScroll.bind(this, velocity, releaseDate))\n\t\t}\n\t}\n\n\t// Apply scroll to the current page via the pageNavigator\n\t_scroll(e, isWheelScroll) {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst { deltaX, deltaY } = e\n\t\tthis._pageNavigator.handleScroll({ deltaX, deltaY }, isWheelScroll)\n\t}\n\n\t// For mouse and trackpad scroll events\n\t_onWheelScroll(e) {\n\t\te.preventDefault()\n\t\trequestAnimationFrame(() => {\n\t\t\tif (!this._pageNavigator) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (e.ctrlKey || e.altKey) {\n\t\t\t\tconst zoomData = {\n\t\t\t\t\tisContinuous: true,\n\t\t\t\t\ttouchPoint: { x: e.x, y: e.y },\n\t\t\t\t\tdelta: e.deltaY,\n\t\t\t\t}\n\t\t\t\tthis._pageNavigator.zoom(zoomData)\n\t\t\t} else {\n\t\t\t\tconst isWheelScroll = true\n\t\t\t\tthis._scroll({ deltaX: -e.deltaX, deltaY: -e.deltaY }, isWheelScroll)\n\t\t\t}\n\t\t})\n\t}\n\n\t// For button hits\n\n\tgoRight() {\n\t\tthis._handleDiscontinuousGesture(true, true, false, false, false)\n\t}\n\n\tgoLeft() {\n\t\tthis._handleDiscontinuousGesture(true, false, true, false, false)\n\t}\n\n\tgoDown() {\n\t\tthis._handleDiscontinuousGesture(true, false, false, true, false)\n\t}\n\n\tgoUp() {\n\t\tthis._handleDiscontinuousGesture(true, false, false, false, true)\n\t}\n\n\t// Remove all event listeners on destroy\n\tdestroy() {\n\t\tthis._mc.off(\"singletap\", this._handleSingleTap)\n\t\tthis._mc.off(\"doubletap\", this._handleDoubleTap)\n\t\tthis._mc.off(\"pinch\", this._handlePinch)\n\t\tthis._mc.off(\"swipeleft swiperight swipeup swipedown\", this._handleSwipe)\n\t\tthis._mc.off(\"panleft panright panup pandown panend\", this._onNonWheelScroll)\n\t\tthis._rootElement.removeEventListener(\"wheel\", this._onWheelScroll)\n\t\twindow.removeEventListener(\"keyup\", this._handleKeyUp)\n\t}\n\n}","import { TextureElement } from \"../Renderer\"\n\nexport default class Slice extends TextureElement {\n\n\t// Used in Segment\n\tget resource() { return this._resource }\n\n\t// Used in StoryBuilder\n\tget pageNavInfo() { return this._pageNavInfo }\n\n\t// Used in StateHandler\n\tget canPlay() { return (this._duration > 0) }\n\n\t// Used in Layer and ResourceManager\n\tget loadStatus() { return this._loadStatus }\n\n\t// Used in Segment (and below)\n\tget href() { return (this._resource) ? this._resource.href : null }\n\n\t// Used in Player\n\tget id() { return this._id }\n\n\t// Used below\n\tstatic get counter() {\n\t\tSlice._counter = (Slice._counter === undefined)\n\t\t\t? 0\n\t\t\t: (Slice._counter + 1)\n\t\treturn Slice._counter\n\t}\n\n\t// Note that resource is really a SliceResource, not a (Texture)Resource\n\tconstructor(resource = null, player, parentInfo = null, neighbor = null) {\n\t\tsuper(resource, player, parentInfo, neighbor)\n\n\t\tthis._id = Slice.counter\n\n\t\tthis._resource = resource\n\n\t\tthis._type = `${(resource) ? resource.type : \"untyped\"}Slice`\n\n\t\t// Add a dummy texture to begin with\n\t\tthis._hasLoadedOnce = false\n\t\tif (this.role === \"empty\") {\n\t\t\tthis._assignEmptyTexture()\n\t\t\tthis._loadStatus = 2\n\t\t} else {\n\t\t\tthis._assignDummyTexture()\n\t\t\tthis._loadStatus = 0\n\t\t}\n\n\t\tthis._pageNavInfo = {}\n\t}\n\n\t// Used in StoryBuilder\n\tsetPageNavInfo(type, pageNavInfo) {\n\t\tthis._pageNavInfo[type] = pageNavInfo\n\t}\n\n\t// Used in StoryBuilder (for transition slices) and Layer\n\tsetParent(parent) {\n\t\tsuper.setParent(parent)\n\t}\n\n\t// Used in Layer\n\tgetPathsToLoad() {\n\t\tif (this._loadStatus !== 0) {\n\t\t\treturn []\n\t\t}\n\n\t\tconst { path } = this._getRelevantPathAndMediaFragment(this._resource)\n\n\t\tthis._loadStatus = (!path) ? 0 : 1\n\t\tif (this._parent && this._parent.updateLoadStatus) {\n\t\t\tthis._parent.updateLoadStatus()\n\t\t}\n\n\t\treturn (path) ? [{ pathsArray: [path], sliceId: this._id }] : []\n\t}\n\n\t_getRelevantPathAndMediaFragment(resource) {\n\t\tlet path = (resource) ? resource.path : null\n\t\tlet mediaFragment = (resource) ? resource.mediaFragment : null\n\n\t\tconst { tags = {} } = this._player // Note that this._player actually comes from TextureElement\n\t\tif (resource && resource.alternate) {\n\t\t\tconst { alternate } = resource\n\t\t\tObject.entries(tags).forEach(([tagName, tagData]) => {\n\t\t\t\tconst { array, index } = tagData\n\t\t\t\tif (array && index < array.length) {\n\t\t\t\t\tconst tagValue = array[index]\n\t\t\t\t\tif (alternate[tagName] && alternate[tagName][tagValue]) {\n\t\t\t\t\t\tpath = alternate[tagName][tagValue].path\n\t\t\t\t\t\tmediaFragment = alternate[tagName][tagValue].mediaFragment\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn { path, mediaFragment }\n\t}\n\n\t// Once the associated texture has been created, it can be applied to the slice\n\tupdateTextures(texture, isAFallback) {\n\n\t\tif (!texture) {\n\t\t\tthis._loadStatus = 0\n\t\t\tthis._assignDummyTexture()\n\n\t\t} else if (texture !== this.texture) {\n\t\t\tthis._loadStatus = (isAFallback === true) ? -1 : 2\n\n\t\t\tconst { video } = texture\n\n\t\t\t// If the texture is a video\n\t\t\tif (video && video.duration) {\n\t\t\t\tthis._video = video\n\n\t\t\t\tthis._setVideoTexture(texture)\n\n\t\t\t\tif (this._hasLoadedOnce === false) {\n\t\t\t\t\tthis._duration = video.duration\n\n\t\t\t\t\t// The dimensions are now correct and can be kept\n\t\t\t\t\tthis._setSizeFromActualTexture(texture.frame.width, texture.frame.height)\n\t\t\t\t\tthis._hasLoadedOnce = true\n\t\t\t\t}\n\n\t\t\t\tthis._doOnEnd = null\n\n\t\t\t\tif (this._shouldPlay === true) {\n\t\t\t\t\tthis.play()\n\t\t\t\t}\n\n\t\t\t// Otherwise the texture is a normal image or fallback image\n\t\t\t} else {\n\t\t\t\tthis._setTexture(texture)\n\t\t\t\tif (this._hasLoadedOnce === false) {\n\t\t\t\t\t// The dimensions are now correct and can be kept\n\t\t\t\t\tthis._setSizeFromActualTexture(texture.frame.width, texture.frame.height)\n\t\t\t\t\tthis._hasLoadedOnce = true\n\t\t\t\t}\n\t\t\t}\n\t\t} else { // texture === this.texture\n\t\t\tthis._loadStatus = (isAFallback === true) ? -1 : 2\n\t\t}\n\n\t\tif (this._parent && this._parent.updateLoadStatus) {\n\t\t\tthis._parent.updateLoadStatus()\n\t\t}\n\t}\n\n\t// On the first successful loading of the resource's texture\n\t_setSizeFromActualTexture(width, height) {\n\t\tif (width === this.size.width && height === this.size.height) {\n\t\t\treturn\n\t\t}\n\t\tthis._setSize({ width, height })\n\n\t\t// Now only resize the page where this slice appears (if that page is indeed active)\n\t\tif (this._parent) {\n\t\t\tthis._parent.resizePage()\n\t\t}\n\t}\n\n\tplay() {\n\t\tthis._shouldPlay = true\n\t\tif (this._video) {\n\t\t\tconst playPromise = this._video.play()\n\t\t\tif (playPromise !== undefined) {\n\t\t\t\tplayPromise\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t// Play\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\t// Caught error prevents play\n\t\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t// Stop a video by pausing it and returning to its first frame\n\tstop() {\n\t\tthis._shouldPlay = false\n\t\tif (this._video) {\n\t\t\tthis._video.pause()\n\t\t\tthis._video.currentTime = 0\n\t\t\tthis._video.loop = true\n\t\t}\n\t\t// Since changing pages will force a stop (on reaching the normal end of a transition\n\t\t// or forcing it), now is the appropriate time to remove the \"ended\" event listener\n\t\tif (this._doOnEnd) {\n\t\t\tthis._video.removeEventListener(\"ended\", this._doOnEnd)\n\t\t\tthis._doOnEnd = null\n\t\t}\n\t}\n\n\tsetDoOnEnd(doOnEnd) {\n\t\tif (!this._video) {\n\t\t\treturn\n\t\t}\n\t\tthis._video.loop = false\n\t\tthis._doOnEnd = doOnEnd.bind(this)\n\t\tthis._video.addEventListener(\"ended\", this._doOnEnd)\n\t}\n\n\tresize(sequenceFit) {\n\t\tif (sequenceFit) {\n\t\t\tconst sequenceClipped = true\n\t\t\tsuper.resize(sequenceFit, sequenceClipped)\n\t\t\treturn\n\t\t}\n\n\t\tconst { pageNavigator } = this._player\n\n\t\tconst fit = pageNavigator.metadata.forcedFit || this._resource.fit || pageNavigator.metadata.fit\n\n\t\tlet clipped = false\n\t\tif (pageNavigator.metadata.forcedClipped === true\n\t\t\t|| pageNavigator.metadata.forcedClipped === false) {\n\t\t\tclipped = pageNavigator.metadata.forcedClipped\n\t\t} else if (this._resource.clipped === true || this._resource.clipped === false) {\n\t\t\tclipped = this._resource.clipped\n\t\t} else {\n\t\t\tclipped = pageNavigator.metadata.clipped\n\t\t}\n\n\t\tsuper.resize(fit, clipped)\n\t}\n\n\t// Used in Layer\n\n\tsetupForEntry() {\n\t\tthis.resize()\n\t}\n\n\tfinalizeEntry() {\n\t\tthis.play()\n\t}\n\n\tfinalizeExit() {\n\t\tthis.stop()\n\t}\n\n\tdestroyTexturesIfPossible() {\n\t\tconst pathsArray = this.unlinkTexturesAndGetPaths()\n\n\t\tif (this._parent && this._parent.updateLoadStatus) {\n\t\t\tthis._parent.updateLoadStatus()\n\t\t}\n\n\t\tif (!pathsArray) {\n\t\t\treturn\n\t\t}\n\t\tpathsArray.forEach((path) => {\n\t\t\tthis.resourceManager.notifyTextureRemovalFromSlice(path)\n\t\t})\n\t}\n\n\t// Used above and in Player\n\tunlinkTexturesAndGetPaths() {\n\t\tif (this._loadStatus === 0 || this.role === \"empty\") {\n\t\t\treturn []\n\t\t}\n\n\t\tthis._loadStatus = 0\n\t\t// Note that we don't add this._setTexture(null): we're actually keeping the texture\n\n\t\tconst { path } = this._getRelevantPathAndMediaFragment(this._resource)\n\t\treturn (path) ? [path] : []\n\t}\n\n\t// Used in Layer, ultimately linked to PageNavigator's getFirstHrefInCurrentPage\n\tgetFirstHref() {\n\t\treturn this.href\n\t}\n\n\t// Called by Player on final destroy\n\tdestroy() {\n\t\t// Clear textures\n\t\tsuper.destroy()\n\n\t\t// Remove event listeners\n\t\tif (this._video) {\n\t\t\tif (this._doOnEnd) {\n\t\t\t\tthis._video.removeEventListener(\"ended\", this._doOnEnd)\n\t\t\t\tthis._doOnEnd = null\n\t\t\t}\n\t\t\tthis._video = null\n\t\t}\n\t}\n\n\t// Used in StoryBuilder\n\tstatic createEmptySlice(player, neighbor) {\n\t\tconst resource = { role: \"empty\" }\n\t\tconst parentInfo = null\n\t\tconst slice = new Slice(resource, player, parentInfo, neighbor)\n\t\treturn slice\n\t}\n\n}","import Slice from \"./Slice\"\n\nimport * as Utils from \"../utils\"\n\nexport default class SequenceSlice extends Slice {\n\n\t// Used below and in Player\n\tget resourcesArray() {\n\t\tconst { resourcesArray } = this._resourcesInfo || {}\n\t\treturn resourcesArray || []\n\t}\n\n\t// Used in StateHandler\n\tget canPlay() { return (this._duration > 0 && this._texturesArray.length > 0) }\n\n\tconstructor(resourcesInfo, player) {\n\t\tsuper(resourcesInfo, player)\n\n\t\tthis._resourcesInfo = resourcesInfo\n\t\tconst { duration } = resourcesInfo\n\t\tthis._duration = (Utils.isANumber(duration) === true && duration > 0) ? duration : 0\n\n\t\tthis._type = \"sequenceSlice\"\n\n\t\tthis._hasLoadedOnce = false\n\t\tthis._texturesArray = []\n\t\tthis._nbOfFrames = 0\n\t\tthis._nbOfLoadedFrameTextures = 0\n\t}\n\n\tgetPathsToLoad() {\n\t\tif (this._loadStatus === 1 || this._loadStatus === 2) {\n\t\t\treturn []\n\t\t}\n\n\t\tconst pathsArray = []\n\t\tthis.resourcesArray.forEach((resource) => {\n\t\t\tconst { path } = this._getRelevantPathAndMediaFragment(resource)\n\t\t\tif (path) {\n\t\t\t\tpathsArray.push(path)\n\t\t\t}\n\t\t})\n\n\t\tthis._loadStatus = 1\n\n\t\treturn [{ pathsArray, sliceId: this._id }]\n\t}\n\n\tupdateTextures() {\n\t\tif (!this._duration) {\n\t\t\treturn\n\t\t}\n\n\t\tthis._texturesArray = this._createTexturesArray()\n\t\tif (this._texturesArray.length === 0) {\n\t\t\tthis._loadStatus = 0\n\t\t\treturn\n\t\t}\n\n\t\tif (this._texturesArray.length < this.resourcesArray.length) {\n\t\t\tthis._loadStatus = -1\n\t\t}\n\n\t\tthis._loadStatus = 2\n\t\tthis.setTexturesArray(this._texturesArray)\n\t}\n\n\t_createTexturesArray() {\n\t\tlet texturesArray = []\n\n\t\tif (this.resourcesArray.length > 0) {\n\n\t\t\t// Build texturesList\n\t\t\tconst texturesList = []\n\t\t\tthis.resourcesArray.forEach((resource) => {\n\t\t\t\tconst texture = this._getLoadedTexture(resource)\n\n\t\t\t\tif (texture) {\n\t\t\t\t\t// Get natural dimensions from the first valid texture in the list\n\t\t\t\t\tif (this._hasLoadedOnce === false) {\n\t\t\t\t\t\tthis._setSizeFromActualTexture(texture.frame.width, texture.frame.height)\n\t\t\t\t\t\tthis._hasLoadedOnce = true\n\t\t\t\t\t}\n\t\t\t\t\ttexturesList.push(texture)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// Now build texturesArray with time information\n\t\t\tif (texturesList.length > 0) {\n\t\t\t\tthis._nbOfFrames = texturesList.length\n\t\t\t\t// Compute how long each image will be displayed\n\t\t\t\t// Note that the textures that have not been created are skipped,\n\t\t\t\t// meaning that the total number of textures may be less than planned,\n\t\t\t\t// and thus the time spent on each actual texture longer than expected\n\t\t\t\tconst time = this._duration / texturesList.length\n\t\t\t\ttexturesArray = texturesList.map((texture) => ({ texture, time }))\n\t\t\t}\n\n\t\t}\n\t\treturn texturesArray\n\t}\n\n\t// The associated texture can either come from an image or fallback image\n\t_getLoadedTexture(resource) {\n\t\tif (!resource || !this.resourceManager) {\n\t\t\treturn null\n\t\t}\n\t\tconst { path, mediaFragment } = this._getRelevantPathAndMediaFragment(resource)\n\t\tconst texture = this.resourceManager.getTextureWithPath(path, mediaFragment)\n\t\treturn texture\n\t}\n\n\tplay() {\n\t\tif (!this._playableSprite) {\n\t\t\treturn\n\t\t}\n\t\tthis._playableSprite.gotoAndPlay(0)\n\t}\n\n\tstop() {\n\t\tif (!this._playableSprite) {\n\t\t\treturn\n\t\t}\n\t\tthis._playableSprite.gotoAndStop(0)\n\t}\n\n\tpauseAtPercent(percent) {\n\t\tif (!this._playableSprite || this._nbOfFrames < 1) {\n\t\t\treturn\n\t\t}\n\t\tconst frameIndex = Math.min(Math.floor(percent * this._nbOfFrames), this._nbOfFrames - 1)\n\t\tthis._playableSprite.gotoAndStop(frameIndex)\n\t}\n\n\tresize() {\n\t\tconst { pageNavigator } = this._player\n\t\tconst fit = pageNavigator.metadata.forcedFit || this._resourcesInfo.fit\n\t\t\t|| pageNavigator.metadata.fit\n\t\tsuper.resize(fit)\n\t}\n\n\tdestroyTexturesIfPossible() {\n\t\tconst pathsArray = this.unlinkTexturesAndGetPaths()\n\t\tthis.setTexturesArray(null)\n\n\t\tif (this._parent && this._parent.updateLoadStatus) {\n\t\t\tthis._parent.updateLoadStatus()\n\t\t}\n\n\t\tpathsArray.forEach((path) => {\n\t\t\tthis.resourceManager.notifyTextureRemovalFromSlice(path)\n\t\t})\n\t}\n\n\t// Used above and in Player\n\tunlinkTexturesAndGetPaths() {\n\t\tif (this._loadStatus === 0) {\n\t\t\treturn []\n\t\t}\n\n\t\tthis._loadStatus = 0\n\n\t\tconst pathsArray = []\n\t\tthis.resourcesArray.forEach((resource) => {\n\t\t\tconst { path } = this._getRelevantPathAndMediaFragment(resource)\n\t\t\tif (path) {\n\t\t\t\tpathsArray.push(path)\n\t\t\t}\n\t\t})\n\t\treturn pathsArray\n\t}\n\n}","import * as Utils from \"../utils\"\nimport * as constants from \"../constants\"\n\nexport default class SliceResource {\n\n\tget role() { return this._role }\n\n\tget fit() { return this._fit }\n\n\tget clipped() { return this._clipped }\n\n\tget pageSide() { return this._pageSide }\n\n\tget type() { return this._type }\n\n\tget href() { return this._href }\n\n\tget path() { return this._path }\n\n\tget mediaFragment() { return this._mediaFragment }\n\n\tget width() { return this._width }\n\n\tget height() { return this._height }\n\n\t// Note that fallback and each alternate[tag] objects will have\n\t// the same structure = { type, path, mediaFragment, href }\n\n\tget fallback() { return this._fallback }\n\n\tget alternate() { return this._alternate }\n\n\t// Used in Player to list a story's tags\n\tget usedTags() {\n\t\tconst tags = {}\n\t\tObject.entries(this._alternate || {}).forEach(([tagName, tagData]) => {\n\t\t\ttags[tagName] = Object.keys(tagData)\n\t\t})\n\t\treturn tags\n\t}\n\n\tconstructor(object, role, fit, clipped = true, pageSide = null) {\n\t\tthis._role = role\n\t\tthis._fit = fit\n\t\tthis._clipped = clipped\n\t\tthis._pageSide = pageSide\n\n\t\tconst {\n\t\t\thref,\n\t\t\ttype,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tfallbackHref,\n\t\t\talternate,\n\t\t} = object || {}\n\n\t\tthis._type = type\n\t\tthis._href = href\n\t\tthis._width = width\n\t\tthis._height = height\n\n\t\t// If no href is specified, at least dimensions have already been stored\n\t\t// to allow for correctly-sized dummy slices (i.e. slices with dummy textures)\n\t\tif (!href) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { path, mediaFragment } = Utils.getPathAndMediaFragment(href)\n\t\tthis._path = path\n\t\tthis._mediaFragment = mediaFragment\n\n\t\tlet resourceType = null\n\t\t// To assign a general resourceType, first check the specified value for type\n\t\tif (type) {\n\t\t\tconst generalType = type.split(\"/\")[0]\n\t\t\tif (generalType === \"image\" || generalType === \"video\") {\n\t\t\t\tresourceType = generalType\n\t\t\t}\n\t\t}\n\t\t// If the specified value did not provide a relevant resourceType, check the path's extension\n\t\tif (!resourceType) {\n\t\t\tresourceType = (Utils.isAVideo(path) === true) ? \"video\" : \"image\"\n\t\t\t/*// Other possibility (to allow the image resourceType on allowed extensions only)\n\t\t\tif (isAVideo(path) === true) {\n\t\t\t\tresourceType = \"video\"\n\t\t\t} else if (isAnImage(path) === true) {\n\t\t\t\tresourceType = \"image\"\n\t\t\t} else {\n\t\t\t\treturn\n\t\t\t}*/\n\t\t}\n\t\t// Note that the \"image\" resourceType is thus favored (by default)\n\n\t\tthis._type = resourceType\n\n\t\tif (fallbackHref) {\n\t\t\tconst fallbackInfo = Utils.getPathAndMediaFragment(fallbackHref)\n\t\t\tthis._fallback = {\n\t\t\t\t...fallbackInfo,\n\t\t\t\thref: fallbackHref,\n\t\t\t}\n\t\t}\n\n\t\tthis._alternate = null\n\t\tif (alternate) {\n\t\t\talternate.forEach((alternateObject) => {\n\t\t\t\tif (alternateObject.href) {\n\t\t\t\t\tconstants.possibleTagNames.forEach((possibleTagName) => {\n\t\t\t\t\t\tconst tagValue = alternateObject[possibleTagName]\n\t\t\t\t\t\tif (tagValue !== undefined) { // Assumption: same type and dimensions\n\t\t\t\t\t\t\tif (!this._alternate) {\n\t\t\t\t\t\t\t\tthis._alternate = {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!this._alternate[possibleTagName]) {\n\t\t\t\t\t\t\t\tthis._alternate[possibleTagName] = {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst alternateInfo = Utils.getPathAndMediaFragment(alternateObject.href)\n\t\t\t\t\t\t\tthis._alternate[possibleTagName][tagValue] = {\n\t\t\t\t\t\t\t\t...alternateInfo,\n\t\t\t\t\t\t\t\ttype: resourceType,\n\t\t\t\t\t\t\t\thref: alternateObject.href,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n}","import { SequenceSlice } from \"../Slice\"\nimport LinkObject from \"./LinkObject\"\nimport SliceResource from \"./SliceResource\"\n\nimport * as constants from \"../constants\"\n\nexport default class Transition {\n\n\tget type() { return this._type }\n\n\tget duration() { return this._duration }\n\n\tget direction() { return this._direction }\n\n\tget sliceType() { return this._sliceType }\n\n\tget slice() { return this._slice }\n\n\tconstructor(transition, player) {\n\t\tconst {\n\t\t\ttype, duration, direction, file, sequence,\n\t\t} = transition || {}\n\n\t\tthis._type = type\n\t\tthis._duration = duration\n\n\t\tthis._direction = direction\n\t\tthis._sliceType = null\n\t\tthis._slice = null\n\n\t\tif (type === \"animation\") {\n\n\t\t\tif (file) {\n\t\t\t\tthis._sliceType = \"video\"\n\n\t\t\t\tconst fullObject = {\n\t\t\t\t\t...file,\n\t\t\t\t\ttype: \"video\",\n\t\t\t\t}\n\t\t\t\tconst parentInfo = null\n\t\t\t\tconst forcedRole = \"transition\"\n\t\t\t\tthis._linkObject = new LinkObject(fullObject, parentInfo, player, forcedRole)\n\t\t\t\tconst { slice } = this._linkObject\n\t\t\t\tthis._slice = slice\n\n\t\t\t} else if (sequence) {\n\t\t\t\tthis._sliceType = \"sequence\"\n\n\t\t\t\tconst role = \"transition\"\n\n\t\t\t\tconst resourcesArray = []\n\t\t\t\tlet fit = null\n\t\t\t\tsequence.forEach((object, i) => {\n\t\t\t\t\tif (i === 0 && object.properties && object.properties.fit) {\n\t\t\t\t\t\tfit = object.properties.fit\n\t\t\t\t\t}\n\t\t\t\t\tconst fullObject = {\n\t\t\t\t\t\t...object,\n\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t}\n\t\t\t\t\tconst sliceResource = new SliceResource(fullObject, role, fit)\n\t\t\t\t\tresourcesArray.push(sliceResource)\n\t\t\t\t})\n\n\t\t\t\tconst resourcesInfo = {\n\t\t\t\t\trole,\n\t\t\t\t\tresourcesArray,\n\t\t\t\t\tfit,\n\t\t\t\t\tduration,\n\t\t\t\t}\n\t\t\t\tthis._slice = new SequenceSlice(resourcesInfo, player)\n\n\t\t\t\tthis._duration = duration || constants.defaultDuration\n\t\t\t}\n\t\t}\n\t}\n\n\t// Used in StoryBuilder to split each page transition into two layer transitions\n\tgetEntryAndExitTransitions(isForward) {\n\t\tlet entry = {\n\t\t\ttype: this._type,\n\t\t\tduration: this._duration, // Duration may remain undefined\n\t\t}\n\t\tlet exit = {\n\t\t\ttype: this._type,\n\t\t\tduration: this._duration, // Duration may remain undefined\n\t\t}\n\n\t\tswitch (this._type) {\n\t\tcase \"cut\": // Duration is not taken into account, i.e. the cut occurs at once\n\t\t\tentry = null\n\t\t\texit = null\n\t\t\tbreak\n\t\tcase \"dissolve\":\n\t\t\tif (isForward === true) {\n\t\t\t\tentry.type = \"fade-in\"\n\t\t\t\texit.type = \"remove\" // Will occur after duration\n\t\t\t} else {\n\t\t\t\texit.type = \"fade-out\"\n\t\t\t\tentry = null\n\t\t\t}\n\t\t\tbreak\n\t\tcase \"slide-in\":\n\t\t\tentry.direction = this._direction\n\t\t\texit.type = \"remove\" // Will occur after duration\n\t\t\tbreak\n\t\tcase \"slide-out\":\n\t\t\tentry.type = \"remove\" // Will occur after duration\n\t\t\texit.direction = this._direction\n\t\t\tbreak\n\t\tcase \"push\":\n\t\t\tentry.type = \"slide-in\"\n\t\t\tentry.direction = this._direction\n\t\t\texit.type = \"slide-out\"\n\t\t\texit.direction = this._direction\n\t\t\tbreak\n\t\tcase \"animation\":\n\t\t\tentry.sliceType = this._sliceType\n\t\t\tentry.slice = this._slice\n\t\t\texit = null\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\n\t\treturn { entry, exit }\n\t}\n\n}","import { Slice } from \"../Slice\"\nimport SliceResource from \"./SliceResource\"\nimport Transition from \"./Transition\"\n\nexport default class LinkObject {\n\n\tget slice() { return this._slice }\n\n\tget transitionForward() { return this._transitionForward }\n\n\tget transitionBackward() { return this._transitionBackward }\n\n\tget snapPoints() { return this._snapPoints }\n\n\tget children() { return this._children }\n\n\tconstructor(object, parentInfo, player, forcedRole = null) {\n\t\tthis._slice = null\n\n\t\t// For transitions (will eventually be stored at page level)\n\t\tthis._transitionForward = null\n\t\tthis._transitionBackward = null\n\n\t\t// For link object layers (will eventually result in the creation of a segment with states)\n\t\tthis._children = []\n\n\t\t// For snap points (will eventually be stored at page level)\n\t\tthis._snapPoints = []\n\n\t\t// Now build slice, children (and their slices) and transitions (and their slices) as required\n\t\tthis._buildSlicesAndTransitions(object, parentInfo, player, forcedRole)\n\t}\n\n\t_buildSlicesAndTransitions(object, parentInfo = null, player, forcedRole = null) {\n\t\tconst { properties } = object || {}\n\t\tconst {\n\t\t\tfit,\n\t\t\tclipped,\n\t\t\tpage,\n\t\t\tlayers,\n\t\t\ttransitionForward,\n\t\t\ttransitionBackward,\n\t\t\tsnapPoints,\n\t\t} = properties || {}\n\n\t\tlet sliceFit = null\n\t\tif (fit === \"contain\" || fit === \"cover\" || fit === \"width\" || fit === \"height\") {\n\t\t\tsliceFit = fit\n\t\t} else if (parentInfo) { // If a layer slice\n\t\t\tsliceFit = \"pixel\"\n\t\t}\n\n\t\tconst sliceClipped = (clipped === true || clipped === false)\n\t\t\t? clipped\n\t\t\t: null\n\n\t\tconst pageSide = (page === \"left\" || page === \"right\" || page === \"center\")\n\t\t\t? page\n\t\t\t: null\n\n\t\tlet role = forcedRole || \"standard\"\n\t\tif (parentInfo) {\n\t\t\trole = \"layersLayer\"\n\t\t} else if (layers) {\n\t\t\trole = \"layersParent\"\n\t\t}\n\n\t\tconst sliceResource = new SliceResource(object, role, sliceFit, sliceClipped, pageSide)\n\n\t\tthis._slice = new Slice(sliceResource, player, parentInfo)\n\n\t\tif (!parentInfo && layers) { // No need to consider layers for a child link object\n\t\t\tthis._children = layers.map((layerObject, i) => {\n\t\t\t\tconst layerProperties = layerObject.properties || {}\n\t\t\t\tconst {\n\t\t\t\t\tentryForward, exitForward, entryBackward, exitBackward,\n\t\t\t\t} = layerProperties\n\t\t\t\t// Create a new link object, using this link object's slice as the parent slice\n\t\t\t\tconst parentInformation = {\n\t\t\t\t\tslice: this._slice,\n\t\t\t\t\tlayerIndex: i,\n\t\t\t\t}\n\t\t\t\tconst linkObject = new LinkObject(layerObject, parentInformation, player)\n\t\t\t\treturn {\n\t\t\t\t\tlinkObject, entryForward, exitForward, entryBackward, exitBackward,\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\t// Store more detailed transition information\n\t\tif (transitionForward) {\n\t\t\tthis._transitionForward = new Transition(transitionForward, player)\n\t\t}\n\t\tif (transitionBackward) {\n\t\t\tthis._transitionBackward = new Transition(transitionBackward, player)\n\t\t}\n\n\t\t// Store snap points\n\t\tthis._snapPoints = snapPoints\n\t}\n\n}","import LinkObject from \"./LinkObject\"\n\nimport * as constants from \"../constants\"\n\nexport default class DivinaParser {\n\n\tconstructor(player, textManager, doWithParsedDivinaData) {\n\t\tthis._player = player\n\t\tthis._textManager = textManager\n\t\tthis._doWithParsedDivinaData = doWithParsedDivinaData\n\t}\n\n\tloadFromPath(folderPath) {\n\t\tDivinaParser.loadJson(folderPath)\n\t\t\t.then((json) => {\n\t\t\t\tthis._buildStoryFromJson(json)\n\t\t\t}, (error) => {\n\t\t\t\tif (this._textManager) {\n\t\t\t\t\tthis._textManager.showMessage({\n\t\t\t\t\t\ttype: \"error\", data: error.message,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tstatic loadJson(folderPath) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!folderPath) {\n\t\t\t\treject(Error(\"No folder path was specified\"))\n\t\t\t}\n\t\t\tconst xhr = new XMLHttpRequest()\n\t\t\txhr.open(\"GET\", `${folderPath}/${constants.defaultManifestFilename}`)\n\t\t\txhr.responseType = \"text\"\n\t\t\txhr.onload = () => {\n\t\t\t\tconst text = xhr.response\n\t\t\t\ttry {\n\t\t\t\t\tconst json = JSON.parse(text)\n\t\t\t\t\tresolve(json)\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error)\n\t\t\t\t}\n\t\t\t}\n\t\t\txhr.onerror = (error) => {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t\txhr.send()\n\t\t})\n\t}\n\n\tloadFromData(data) {\n\t\tif (data && data.json) {\n\t\t\tthis._buildStoryFromJson(data.json)\n\t\t}\n\t}\n\n\tloadFromJsonAndPath(json) {\n\t\tthis._buildStoryFromJson(json)\n\t}\n\n\t_buildStoryFromJson(json) {\n\t\tconst { metadata, readingOrder, guided } = json\n\t\tif (!metadata || !readingOrder) {\n\t\t\tif (this._textManager) {\n\t\t\t\tthis._textManager.showMessage({\n\t\t\t\t\ttype: \"error\", data: \"Missing metadata or readingOrder information\",\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tconst parsedMetadata = this._parseMetadata(metadata)\n\t\tif (!parsedMetadata) {\n\t\t\treturn\n\t\t}\n\n\t\tconst parsedDivinaData = {\n\t\t\tmetadata: parsedMetadata,\n\t\t\tmainLinkObjectsArray: this._parseObjectsList(readingOrder),\n\t\t}\n\n\t\tif (guided) {\n\t\t\tparsedDivinaData.guidedLinkObjectsArray = this._parseObjectsList(guided)\n\t\t}\n\n\t\tif (!this._doWithParsedDivinaData) {\n\t\t\treturn\n\t\t}\n\t\tthis._doWithParsedDivinaData(parsedDivinaData)\n\t}\n\n\t_parseMetadata(metadata) {\n\t\tconst { readingProgression, language, presentation } = metadata\n\n\t\tif (!readingProgression) {\n\t\t\tif (this._textManager) {\n\t\t\t\tthis._textManager.showMessage({\n\t\t\t\t\ttype: \"error\", data: \"Missing readingProgression information\",\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn null\n\t\t}\n\t\tif (readingProgression !== \"ltr\" && readingProgression !== \"rtl\"\n\t\t\t&& readingProgression !== \"ttb\" && readingProgression !== \"btt\") {\n\t\t\tif (this._textManager) {\n\t\t\t\tthis._textManager.showMessage({\n\t\t\t\t\ttype: \"error\", data: \"Value for readingProgression is not valid\",\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn null\n\t\t}\n\n\t\tconst {\n\t\t\tcontinuous,\n\t\t\tfit,\n\t\t\toverflow,\n\t\t\tclipped,\n\t\t\tspread,\n\t\t\tviewportRatio,\n\t\t\torientation,\n\t\t} = presentation || {}\n\n\t\tconst storyContinuous = (continuous === true || continuous === false)\n\t\t\t? continuous\n\t\t\t: constants.defaultContinuous\n\t\tconst storyFit = (fit === \"contain\" || fit === \"cover\" || fit === \"width\" || fit === \"height\")\n\t\t\t? fit\n\t\t\t: constants.defaultFit\n\t\tconst storyOverflow = (overflow === \"scrolled\" || overflow === \"paginated\")\n\t\t\t? overflow\n\t\t\t: constants.defaultOverflow\n\t\tconst storyClipped = (clipped === true || clipped === false)\n\t\t\t? clipped\n\t\t\t: constants.defaultClipped\n\t\tconst storySpread = (spread === \"both\" || spread === \"landscape\" || spread === \"none\")\n\t\t\t? spread\n\t\t\t: constants.defaultSpread\n\n\t\tlet languagesArray = []\n\t\tif (language) {\n\t\t\tlanguagesArray = (Array.isArray(language) === true)\n\t\t\t\t? language\n\t\t\t\t: [language]\n\t\t} else {\n\t\t\tlanguagesArray = [\"unspecified\"]\n\t\t}\n\n\t\treturn {\n\t\t\treadingProgression,\n\t\t\tcontinuous: storyContinuous,\n\t\t\tfit: storyFit,\n\t\t\toverflow: storyOverflow,\n\t\t\tclipped: storyClipped,\n\t\t\tspread: storySpread,\n\t\t\tviewportRatio,\n\t\t\torientation,\n\t\t\tlanguagesArray,\n\t\t}\n\t}\n\n\t_parseObjectsList(objectsList) {\n\t\tconst parentLinkObject = null\n\t\tconst linkObjectsArray = objectsList.map((object) => (\n\t\t\tnew LinkObject(object, parentLinkObject, this._player)\n\t\t))\n\t\treturn linkObjectsArray\n\t}\n\n}","import { Texture } from \"../Renderer\"\n\nexport default class TextureResource {\n\n\tget id() { return this._id }\n\n\tget type() { return this._type }\n\n\tget fallback() { return this._fallback }\n\n\tget href() { return this._href }\n\n\tget hasStartedLoading() { return (this._loadStatus !== 0) }\n\n\tget hasLoaded() { return (this._loadStatus === -1 || this._loadStatus === 2) }\n\n\tstatic get counter() {\n\t\tTextureResource._counter = (TextureResource._counter === undefined)\n\t\t\t? 0\n\t\t\t: (TextureResource._counter + 1)\n\t\treturn TextureResource._counter\n\t}\n\n\tconstructor(textureInfo, sliceId) {\n\t\tthis._id = TextureResource.counter\n\n\t\tconst {\n\t\t\ttype, path, href, fallback,\n\t\t} = textureInfo\n\n\t\tthis._type = type\n\t\tthis._path = path\n\t\tthis._href = href\n\t\tthis._fallback = fallback\n\n\t\tthis._video = null\n\t\tthis._timeout = null\n\t\tthis._doOnLoadSuccess = null\n\t\tthis._doOnLoadFail = null\n\n\t\tthis._loadStatus = 0\n\t\tthis._baseTexture = null\n\t\tthis._textures = {}\n\n\t\tthis._addOrUpdateMediaFragment(\"full\")\n\t\tthis.addTextureInfo(textureInfo, sliceId)\n\t}\n\n\t_addOrUpdateMediaFragment(mediaFragment, sliceId) {\n\t\tif (!this._textures[mediaFragment]) {\n\t\t\tthis._textures[mediaFragment] = {\n\t\t\t\ttexture: null,\n\t\t\t\tsliceIdsSet: new Set(),\n\t\t\t}\n\t\t}\n\t\t// On a readingMode change, the baseTexture may already be present,\n\t\t// so adding new media fragments imply that the corresponding textures be created\n\t\tif (this._baseTexture && this._textures.full && this._textures.full.texture) {\n\t\t\tconst fullTexture = this._textures.full.texture\n\t\t\tconst croppedTexture = Texture.cropToFragment(fullTexture, mediaFragment)\n\t\t\tthis._textures[mediaFragment].texture = croppedTexture\n\t\t}\n\t\tif (sliceId !== undefined) {\n\t\t\tthis._textures[mediaFragment].sliceIdsSet.add(sliceId)\n\t\t}\n\t}\n\n\t// Also used in ResourceManager\n\taddTextureInfo(textureInfo, sliceId) {\n\t\tconst { mediaFragment } = textureInfo\n\t\tif (mediaFragment) {\n\t\t\tthis._addOrUpdateMediaFragment(mediaFragment, sliceId)\n\t\t} else {\n\t\t\tthis._addOrUpdateMediaFragment(\"full\", sliceId)\n\t\t}\n\t}\n\n\tresetSliceIdsSets() {\n\t\tObject.keys(this._textures).forEach((mediaFragment) => {\n\t\t\tthis._textures[mediaFragment].sliceIdsSet = new Set()\n\t\t})\n\t}\n\n\tattemptToLoadVideo(src, doOnVideoLoadSuccess, doOnVideoLoadFail, videoLoadTimeout,\n\t\tallowsParallel, resolve) {\n\n\t\t// Create video element\n\t\tconst video = document.createElement(\"video\")\n\t\tvideo.preload = \"auto\"\n\t\tvideo.loop = true // All videos will loop by default\n\t\tvideo.autoplay = false // Prevent autoplay at start\n\t\tvideo.muted = true // Only a muted video can autoplay\n\t\tvideo.setAttribute(\"playsinline\", \"\") // Required to play in iOS\n\t\tvideo.crossOrigin = \"anonymous\"\n\t\tvideo.src = src\n\t\tthis._video = video\n\n\t\tconst doOnLoadFail = () => {\n\t\t\tclearTimeout(this._timeout)\n\t\t\tthis._removeTracesOfVideoLoad()\n\t\t\tthis._video = null\n\n\t\t\tif (this._fallback && doOnVideoLoadFail) {\n\t\t\t\tthis._loadStatus = -1\n\t\t\t\t// Let's create the baseTexture from the fallback image\n\t\t\t\t// (we don't care that the type will thus not be the right one anymore)\n\t\t\t\tdoOnVideoLoadFail(this._path, this._fallback.path)\n\t\t\t} else {\n\t\t\t\tthis._loadStatus = 0\n\t\t\t\tresolve()\n\t\t\t}\n\t\t}\n\t\tthis._doOnLoadFail = doOnLoadFail\n\t\tvideo.addEventListener(\"error\", doOnLoadFail)\n\n\t\t// Event to track should be loadedmetadata, but duration change proved more reliable\n\t\tconst doOnLoadSuccess = () => {\n\t\t\tthis._doOnDurationChange(doOnVideoLoadSuccess)\n\t\t}\n\t\tthis._doOnLoadSuccess = doOnLoadSuccess\n\t\tvideo.addEventListener(\"durationchange\", doOnLoadSuccess)\n\n\t\t// If resources are loaded serially, a failing video load should not block loading\n\t\tif (allowsParallel === false) {\n\t\t\tthis._timeout = setTimeout(doOnLoadFail, videoLoadTimeout)\n\t\t}\n\t}\n\n\t_removeTracesOfVideoLoad() {\n\t\tif (!this._video) {\n\t\t\treturn\n\t\t}\n\t\tif (this._doOnLoadFail) {\n\t\t\tthis._video.removeEventListener(\"error\", this._doOnLoadFail)\n\t\t\tthis._doOnLoadFail = null\n\t\t}\n\t\tif (this._doOnLoadSuccess) {\n\t\t\tthis._video.removeEventListener(\"durationchange\", this._doOnLoadSuccess)\n\t\t\tthis._doOnLoadSuccess = null\n\t\t}\n\t}\n\n\t// Once a video's duration is different from zero, get useful information\n\t_doOnDurationChange(doOnVideoLoadSuccess) {\n\t\tclearTimeout(this._timeout)\n\n\t\tconst { duration } = this._video\n\n\t\tif (duration && doOnVideoLoadSuccess) {\n\t\t\tconst texture = Texture.createVideoTexture(this._video)\n\n\t\t\tthis._removeTracesOfVideoLoad()\n\n\t\t\tconst textureData = {\n\t\t\t\tname: this._path,\n\t\t\t\tbaseTexture: texture.baseTexture,\n\t\t\t\ttexture,\n\t\t\t}\n\t\t\tdoOnVideoLoadSuccess(textureData)\n\n\t\t// If the video failed loading\n\t\t} else if (this._doOnLoadFail) {\n\t\t\tthis._doOnLoadFail() // Which involves removing the event listener too\n\t\t}\n\t}\n\n\tnotifyLoadStart() {\n\t\tif (this._loadStatus === 0) {\n\t\t\tthis._loadStatus = 1 // Means that loader has started loading the resource\n\t\t}\n\t}\n\n\tcancelLoad(slices) {\n\t\tthis._loadStatus = 0\n\t\tObject.values(this._textures).forEach(({ sliceIdsSet }) => {\n\t\t\tsliceIdsSet.forEach((sliceId) => {\n\t\t\t\tconst slice = slices[sliceId]\n\t\t\t\tslice._loadStatus = 0 // UGLY!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t\t})\n\t\t})\n\n\t\tthis.clearVideoTraces()\n\t}\n\n\tclearVideoTraces() {\n\t\tif (this._video) {\n\t\t\tif (this._doOnLoadFail) {\n\t\t\t\tthis._video.removeEventListener(\"error\", this._doOnLoadFail)\n\t\t\t\tthis._doOnLoadFail = null\n\t\t\t}\n\t\t\tif (this._doOnLoadSuccess) {\n\t\t\t\tthis._video.removeEventListener(\"durationchange\", this._doOnLoadSuccess)\n\t\t\t\tthis._doOnLoadSuccess = null\n\t\t\t}\n\t\t\tthis._video = null\n\t\t}\n\t}\n\n\tsetBaseTexture(baseTexture, fullTexture) {\n\t\tif (this._baseTexture || !baseTexture || !fullTexture) {\n\t\t\treturn\n\t\t}\n\t\tthis._baseTexture = baseTexture\n\n\t\t// For the texture, store the (clipped) media fragment texture directly if it is a fallback\n\t\tif (this._loadStatus === -1 && this._fallback && this._fallback.mediaFragment) {\n\t\t\tconst croppedTexture = Texture.cropToFragment(fullTexture, this._fallback.mediaFragment)\n\n\t\t\tthis._textures.full.texture = croppedTexture\n\n\t\t// Otherwise just store the texture as the full texture\n\t\t// (reminder: this._loadStatus = 1 or -1 - if no fallback - at this stage)...\n\t\t} else {\n\t\t\tthis._textures.full.texture = fullTexture\n\t\t\t// ...and create other fragments as needed\n\t\t\tthis._createFragmentsIfNeeded(fullTexture)\n\t\t\tif (this._loadStatus !== -1) {\n\t\t\t\tthis._loadStatus = 2\n\t\t\t}\n\t\t}\n\t}\n\n\t_createFragmentsIfNeeded(fullTexture) {\n\t\tObject.keys(this._textures).forEach((mediaFragment) => {\n\t\t\tif (mediaFragment !== \"full\") {\n\t\t\t\tconst croppedTexture = Texture.cropToFragment(fullTexture, mediaFragment)\n\t\t\t\tthis._textures[mediaFragment].texture = croppedTexture\n\t\t\t}\n\t\t})\n\t}\n\n\tapplyAllTextures(slices) {\n\t\tconst fullTexture = this._textures.full.texture\n\t\tObject.values(this._textures).forEach(({ texture, sliceIdsSet }) => {\n\t\t\tsliceIdsSet.forEach((sliceId) => {\n\t\t\t\tconst slice = slices[sliceId]\n\t\t\t\tif (slice) {\n\t\t\t\t\tconst sliceTexture = (this._loadStatus === -1) ? fullTexture : texture\n\t\t\t\t\tconst isAFallback = (this._loadStatus === -1)\n\t\t\t\t\tslice.updateTextures(sliceTexture, isAFallback)\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\t// Used for a SequenceSlice only\n\tgetTextureForMediaFragment(mediaFragment = null) {\n\t\tconst fragment = (this._loadStatus === -1)\n\t\t\t? \"full\" // The full texture for a fallback is already sized correctly\n\t\t\t: (mediaFragment || \"full\")\n\t\tif (!this._textures[fragment]) {\n\t\t\treturn null\n\t\t}\n\t\tconst { texture } = this._textures[fragment]\n\t\treturn texture\n\t}\n\n\tdestroyTexturesIfPossible(slices) {\n\t\tlet shouldBeKept = false\n\t\tObject.values(this._textures).forEach((mediaFragmentData) => {\n\t\t\tconst { sliceIdsSet } = mediaFragmentData\n\t\t\tsliceIdsSet.forEach((sliceId) => {\n\t\t\t\tconst slice = slices[sliceId]\n\t\t\t\tif (slice) {\n\t\t\t\t\tconst { loadStatus } = slice\n\t\t\t\t\tif (loadStatus === -1 || loadStatus === 1 || loadStatus === 2) {\n\t\t\t\t\t\tshouldBeKept = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t\tif (shouldBeKept === false) {\n\t\t\tthis.forceDestroyTextures()\n\t\t}\n\t}\n\n\tforceDestroyTextures() {\n\t\tif (this._loadStatus === 0) {\n\t\t\treturn\n\t\t}\n\n\t\tObject.keys(this._textures).forEach((mediaFragment) => {\n\t\t\tthis._textures[mediaFragment].texture = null\n\t\t})\n\t\tif (this._baseTexture) {\n\t\t\tthis._baseTexture.destroy()\n\t\t}\n\t\tthis._baseTexture = null\n\n\t\tthis.clearVideoTraces()\n\n\t\tthis._loadStatus = 0\n\t}\n\n}","export default class AsyncTaskQueue {\n\n\tget nbOfTasks() { return this._tasksArray.length }\n\n\tconstructor(maxPriority, allowsParallel, getPriorityFunction) {\n\t\tthis._maxPriority = maxPriority\n\t\tthis._allowsParallel = allowsParallel\n\t\tthis._getPriority = getPriorityFunction || ((task) => (task.priority || 0))\n\n\t\tthis._tasksArray = []\n\t\tthis.reset()\n\n\t\tthis._nbOfInitialTasks = 0\n\t\tthis._doAfterEachInitialTask = null\n\n\t\tthis._hasStarted = false\n\t}\n\n\treset() {\n\t\tthis._tasksArray.forEach((task) => {\n\t\t\tif (task.isRunning === true && task.kill) {\n\t\t\t\ttask.kill()\n\t\t\t}\n\t\t})\n\n\t\t// Useful in serial mode only\n\t\tthis._isRunning = false\n\t}\n\n\tupdatePriorities() {\n\t\tthis._tasksArray.forEach((task, i) => {\n\t\t\t// Allow the task to have a forced priority, otherwise evaluate the priority\n\t\t\tconst priority = (task.forcedPriority !== undefined)\n\t\t\t\t? task.forcedPriority\n\t\t\t\t: this._getPriority(task)\n\n\t\t\t// In serial mode, update task priorities\n\t\t\tif (this._allowsParallel === false) {\n\t\t\t\tthis._tasksArray[i].priority = priority\n\n\t\t\t// Whereas in parallel mode, remove task if relevant\n\t\t\t} else if (priority > this._maxPriority) {\n\t\t\t\tif (task.isRunning === true && task.kill) {\n\t\t\t\t\ttask.kill()\n\t\t\t\t}\n\t\t\t\tthis._tasksArray.splice(i, 1)\n\t\t\t}\n\t\t})\n\t}\n\n\taddOrUpdateTask(task) {\n\t\tconst fullTask = {\n\t\t\t...task,\n\t\t\tisRunning: false,\n\t\t}\n\t\tif (this._allowsParallel === true) {\n\t\t\tthis._tasksArray.push(fullTask)\n\t\t\tif (this._hasStarted === true) {\n\t\t\t\tthis._runTask(fullTask)\n\t\t\t}\n\t\t} else {\n\t\t\t// If in serial mode, only add the task if not already in queue...\n\t\t\tconst { id } = fullTask\n\t\t\tconst index = this._tasksArray.findIndex((arrayTask) => (arrayTask.id === id))\n\t\t\tif (index < 0) {\n\t\t\t\t// ...and add it with a priority property\n\t\t\t\tfullTask.priority = (task.forcedPriority !== undefined)\n\t\t\t\t\t? task.forcedPriority\n\t\t\t\t\t: this._getPriority(task)\n\t\t\t\tthis._tasksArray.push(fullTask)\n\n\t\t\t\tif (this._hasStarted === true && this._isRunning === false) {\n\t\t\t\t\tthis._runNextTaskInQueue()\n\t\t\t\t}\n\t\t\t} else { // Otherwise update the task\n\t\t\t\tthis._tasksArray[index] = task\n\t\t\t}\n\t\t}\n\t}\n\n\t_runTask(task) {\n\t\tconst { id, doAsync, doOnEnd } = task\n\n\t\tif (this._allowsParallel === false) {\n\t\t\tthis._isRunning = true\n\t\t}\n\n\t\ttask.isRunning = true\n\n\t\tconst callback = () => {\n\t\t\t// Remove task from list\n\t\t\tconst index = this._tasksArray.findIndex((arrayTask) => (arrayTask.id === id))\n\t\t\tthis._tasksArray.splice(index, 1)\n\n\t\t\tif (doOnEnd) {\n\t\t\t\tdoOnEnd()\n\t\t\t}\n\n\t\t\tif (this._doAfterEachInitialTask) {\n\t\t\t\tthis._doAfterEachInitialTask()\n\t\t\t\tthis._nbOfInitialTasks -= 1\n\t\t\t\tif (this._nbOfInitialTasks === 0) {\n\t\t\t\t\tthis._doAfterEachInitialTask = null\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._allowsParallel === false) {\n\t\t\t\tthis._isRunning = false\n\t\t\t\tthis._runNextTaskInQueue()\n\t\t\t}\n\t\t}\n\n\t\tif (doAsync) {\n\t\t\tdoAsync()\n\t\t\t\t.then(callback)\n\t\t} else {\n\t\t\tcallback()\n\t\t}\n\t}\n\n\t_runNextTaskInQueue() { // In serial mode only\n\t\tif (this._tasksArray.length === 0 || this._isRunning === true) {\n\t\t\treturn\n\t\t}\n\t\tconst nextTask = this._getTaskWithHighestPriority()\n\t\tif (!nextTask) {\n\t\t\treturn\n\t\t}\n\t\tthis._runTask(nextTask)\n\t}\n\n\t_getTaskWithHighestPriority() { // Actually the *lowest* possible value for the priority key ;)\n\t\tlet nextTask = null\n\t\tthis._tasksArray.forEach((task) => {\n\t\t\tif (!nextTask || task.priority < nextTask.priority) {\n\t\t\t\tnextTask = task\n\t\t\t}\n\t\t})\n\t\treturn nextTask\n\t}\n\n\tstart(doAfterEachInitialTask) {\n\t\tthis._doAfterEachInitialTask = doAfterEachInitialTask\n\n\t\tthis._nbOfInitialTasks = this._tasksArray.length\n\t\tthis._hasStarted = true\n\t\tif (this._allowsParallel === true) {\n\t\t\tthis._tasksArray.forEach((task) => {\n\t\t\t\tthis._runTask(task)\n\t\t\t})\n\t\t} else {\n\t\t\tthis._runNextTaskInQueue()\n\t\t}\n\t}\n\n\tgetTaskWithId(id) {\n\t\tconst foundTask = this._tasksArray.find((task) => (task.id === id))\n\t\treturn foundTask\n\t}\n\n}","import AsyncTaskQueue from \"./AsyncTaskQueue\"\n\nexport default class ResourceLoadTaskQueue extends AsyncTaskQueue {\n\n\tconstructor(maxPriority, priorityFactor, allowsParallel) {\n\n\t\t// Task priorities will be evaluated based on page differences\n\t\tconst getPriority = (task) => {\n\t\t\tif (!task.data || task.data.pageIndex === undefined\n\t\t\t\t|| this._targetPageIndex === undefined) {\n\t\t\t\treturn task.priority || 0\n\t\t\t}\n\t\t\tconst taskPageIndex = task.data.pageIndex\n\t\t\tlet { priority } = task\n\t\t\tif (priority === undefined\n\t\t\t\t|| Math.abs(taskPageIndex - this._targetPageIndex) < Math.abs(priority)) {\n\t\t\t\tpriority = taskPageIndex - this._targetPageIndex\n\t\t\t}\n\t\t\tif (priority < 0) {\n\t\t\t\tif (priorityFactor) {\n\t\t\t\t\tpriority *= -priorityFactor\n\t\t\t\t\tpriority = Math.ceil(priority)\n\t\t\t\t} else {\n\t\t\t\t\tpriority = -priority\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn priority\n\t\t}\n\n\t\tsuper(maxPriority, allowsParallel, getPriority)\n\t}\n\n\tupdatePriorities(targetPageIndex) {\n\t\tthis._targetPageIndex = targetPageIndex\n\t\tsuper.updatePriorities()\n\t}\n\n}","import { Loader } from \"../Renderer\"\nimport TextureResource from \"./TextureResource\"\nimport ResourceLoadTaskQueue from \"./ResourceLoadTaskQueue\"\n\nimport * as constants from \"../constants\"\n\nexport default class ResourceManager {\n\n\tget resourceTextures() { return this._textureResources }\n\n\tconstructor(doWithLoadPercentChange, textureSource, player) {\n\t\tthis._doWithLoadPercentChange = doWithLoadPercentChange\n\t\tthis._textureSource = textureSource\n\t\tthis._player = player\n\n\t\tconst { options } = player\n\t\tconst {\n\t\t\tallowsParallel = constants.defaultAllowsParallel,\n\t\t\tvideoLoadTimeout = constants.defaultVideoLoadTimeout,\n\t\t} = options || {}\n\n\t\tthis._allowsParallel = allowsParallel\n\t\tthis._videoLoadTimeout = videoLoadTimeout\n\n\t\tthis._textureResources = {}\n\n\t\tthis._taskQueue = null\n\t\tthis._nbOfCompletedTasks = 0\n\n\t\tif (this._doWithLoadPercentChange) {\n\t\t\tthis._doWithLoadPercentChange(0)\n\t\t}\n\t}\n\n\t// Used in Player\n\tstoreResourceInfo(resource = null, sliceId) {\n\t\tif (!resource || sliceId === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\tthis._storeTextureInfo(resource, sliceId)\n\n\t\tconst { alternate } = resource\n\t\tif (alternate) {\n\t\t\tObject.keys(alternate).forEach((tagName) => {\n\t\t\t\tObject.keys(alternate[tagName] || {}).forEach((tagValue) => {\n\t\t\t\t\tthis._storeTextureInfo(alternate[tagName][tagValue], sliceId)\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\n\t_storeTextureInfo(textureInfo = null, sliceId) {\n\t\tconst { path } = textureInfo || {}\n\t\tif (!path) {\n\t\t\treturn\n\t\t}\n\t\tif (!this._textureResources[path]) {\n\t\t\tthis._textureResources[path] = new TextureResource(textureInfo, sliceId)\n\t\t} else {\n\t\t\tthis._textureResources[path].addTextureInfo(textureInfo, sliceId)\n\t\t}\n\t}\n\n\t// When setting (including changing) the page navigator (used in Player)\n\treset(maxPriority, priorityFactor) {\n\t\t// Build async task queue if there is none...\n\t\tif (!this._taskQueue) {\n\t\t\tthis._taskQueue = new ResourceLoadTaskQueue(maxPriority, priorityFactor,\n\t\t\t\tthis._allowsParallel)\n\t\t// ...or stop all loading tasks otherwise\n\t\t} else {\n\t\t\tthis._taskQueue.reset()\n\t\t\tthis._nbOfCompletedTasks = 0\n\t\t}\n\n\t\t// Clear sliceIdsSets so they can be populated again for the considered reading mode\n\t\tObject.values(this._textureResources).forEach((textureResource) => {\n\t\t\ttextureResource.resetSliceIdsSets()\n\t\t})\n\t}\n\n\tupdateForTargetPageIndex(targetPageIndex) {\n\t\t// Update priorities for load tasks (if some tasks are still pending)\n\t\tthis._taskQueue.updatePriorities(targetPageIndex)\n\t}\n\n\t// Used in Slice\n\tloadTexturesAtPaths(pathsArray, sliceId, pageIndex) {\n\t\tlet taskId = null\n\n\t\tconst pathsToLoadArray = []\n\t\tpathsArray.forEach((path) => {\n\t\t\tif (path && this._textureResources[path]) {\n\t\t\t\tconst textureResource = this._textureResources[path]\n\t\t\t\tconst { id, hasStartedLoading } = textureResource\n\t\t\t\tif (hasStartedLoading === false) {\n\t\t\t\t\tif (taskId === null) {\n\t\t\t\t\t\ttaskId = id\n\t\t\t\t\t}\n\t\t\t\t\tpathsToLoadArray.push(path)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tconst callback = () => {\n\t\t\tconst { slices } = this._player\n\t\t\tpathsArray.forEach((path) => {\n\t\t\t\tconst textureResource = this._textureResources[path]\n\t\t\t\tif (textureResource) {\n\t\t\t\t\ttextureResource.applyAllTextures(slices)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t// Note that callback will ensure slice.loadStatus = 2 (or -1),\n\t\t// which will prevent re-triggering loadTexturesAtPaths for the slice\n\n\t\tif (pathsToLoadArray.length === 0) {\n\t\t\tcallback()\n\t\t\treturn\n\t\t}\n\n\t\t// If is already loading, still consider if priority order > that of when started loading!!!\n\n\t\t// Add resource load task to queue if not already in queue\n\t\tlet task = this._taskQueue.getTaskWithId(taskId)\n\t\tif (!task) {\n\t\t\tconst loader = new Loader()\n\t\t\ttask = {\n\t\t\t\tid: taskId,\n\t\t\t\tdata: { pageIndex },\n\t\t\t\tdoAsync: () => this._loadResources(pathsToLoadArray, pageIndex, loader),\n\t\t\t\tdoOnEnd: callback,\n\t\t\t\tkill: () => {\n\t\t\t\t\t// Cancel loading for resources not loaded yet\n\t\t\t\t\tconst { slices } = this._player\n\t\t\t\t\tpathsToLoadArray.forEach((path) => {\n\t\t\t\t\t\tif (path && this._textureResources[path]) {\n\t\t\t\t\t\t\tconst textureResource = this._textureResources[path]\n\t\t\t\t\t\t\tif (textureResource.hasLoaded === false) {\n\t\t\t\t\t\t\t\ttextureResource.cancelLoad(slices)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tloader.reset()\n\t\t\t\t},\n\t\t\t}\n\t\t\tthis._taskQueue.addOrUpdateTask(task)\n\n\t\t// In serial mode, if task exists, add data to potentially update its priority\n\t\t} else if (this._allowsParallel === false) {\n\t\t\ttask.data.pageIndex = pageIndex\n\t\t\tthis._taskQueue.addOrUpdateTask(task)\n\t\t}\n\t}\n\n\t_loadResources(pathsToLoadArray, pageIndex, loader) {\n\t\tpathsToLoadArray.forEach((path) => {\n\t\t\tif (path && this._textureResources[path]) {\n\t\t\t\tconst textureResource = this._textureResources[path]\n\t\t\t\ttextureResource.notifyLoadStart()\n\t\t\t}\n\t\t})\n\t\treturn new Promise((resolve) => {\n\t\t\tthis._addResourcesToLoaderAndLoad(pathsToLoadArray, loader, resolve)\n\t\t})\n\t}\n\n\t_addResourcesToLoaderAndLoad(pathsToLoadArray, loader, resolve) {\n\t\tconst firstPath = pathsToLoadArray[0]\n\t\tconst firstTextureResource = this._textureResources[firstPath]\n\n\t\tif (pathsToLoadArray.length === 1 && firstTextureResource\n\t\t\t&& firstTextureResource.type === \"video\") { // Only consider a video if it is alone\n\n\t\t\tconst src = this._getSrc(firstPath)\n\t\t\tconst doOnVideoLoadSuccess = (textureData) => {\n\t\t\t\tthis._acknowledgeResourceHandling([textureData], resolve)\n\t\t\t}\n\t\t\tconst doOnVideoLoadFail = (path, fallbackPath) => {\n\t\t\t\tthis._addToLoaderAndLoad([{ path, fallbackPath }], loader, resolve)\n\t\t\t}\n\t\t\tfirstTextureResource.attemptToLoadVideo(src, doOnVideoLoadSuccess, doOnVideoLoadFail,\n\t\t\t\tthis._videoLoadTimeout, this._allowsParallel, resolve)\n\n\t\t} else {\n\t\t\tconst pathsAndFallbackPathsArray = []\n\t\t\tpathsToLoadArray.forEach((path) => {\n\t\t\t\tif (path && this._textureResources[path]) {\n\t\t\t\t\tconst { type } = this._textureResources[path]\n\t\t\t\t\t// Reminder: a sequence transition forces its resourcesArray\n\t\t\t\t\t// to only contain image types anyway\n\t\t\t\t\tif (type === \"image\") {\n\t\t\t\t\t\tpathsAndFallbackPathsArray.push({ path })\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis._addToLoaderAndLoad(pathsAndFallbackPathsArray, loader, resolve)\n\t\t}\n\t}\n\n\t_getSrc(path, fallbackPath = null) {\n\t\tlet src = fallbackPath || path\n\t\tconst { folderPath, data } = this._textureSource\n\t\tif (folderPath) {\n\t\t\tsrc = `${folderPath}/${src}`\n\t\t// If the story was opened with data (i.e. not from a folder)\n\t\t// and the resource is a video, use the dataURI as src\n\t\t} else if (data && data.base64DataByHref) {\n\t\t\tsrc = data.base64DataByHref[path]\n\t\t}\n\t\treturn src\n\t}\n\n\t_addToLoaderAndLoad(pathsAndFallbackPathsArray, loader, resolve) {\n\t\tpathsAndFallbackPathsArray.forEach(({ path, fallbackPath }) => {\n\t\t\tthis._addToLoader(loader, path, fallbackPath)\n\t\t})\n\t\tthis._load(loader, resolve)\n\t}\n\n\t_addToLoader(loader, path, fallbackPath = null) {\n\t\tconst src = this._getSrc(path, fallbackPath)\n\t\tloader.add(path, src)\n\t}\n\n\t_load(loader, resolve) {\n\t\tif (loader.hasTasks === true) {\n\t\t\tloader.load()\n\t\t\t// If loading succeeds, move on\n\t\t\tloader.onComplete((textureDataArray) => {\n\t\t\t\tthis._acknowledgeResourceHandling(textureDataArray, resolve)\n\t\t\t})\n\t\t} else {\n\t\t\tthis._acknowledgeResourceHandling(null, resolve)\n\t\t}\n\t}\n\n\t_acknowledgeResourceHandling(textureDataArray, resolve) {\n\t\tif (textureDataArray) {\n\t\t\ttextureDataArray.forEach((textureData) => {\n\t\t\t\tconst { name, baseTexture, texture } = textureData || {}\n\t\t\t\t// Store the baseTexture (and compute clipped textures for media fragments as needed),\n\t\t\t\t// knowing that name = path\n\t\t\t\tif (name && this._textureResources[name]) {\n\t\t\t\t\tconst textureResource = this._textureResources[name]\n\t\t\t\t\ttextureResource.setBaseTexture(baseTexture, texture)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tresolve()\n\t}\n\n\t// Used in Player\n\taddStoryOpenTaskAndLoad(doOnLoadEnd, maxPriority) {\n\t\t// Add a last task to trigger doOnLoadEnd\n\t\tconst task = {\n\t\t\tid: -1,\n\t\t\tdoOnEnd: doOnLoadEnd,\n\t\t\tforcedPriority: maxPriority,\n\t\t}\n\t\tthis._taskQueue.addOrUpdateTask(task)\n\n\t\t// Start the async queue with a function to handle a change in load percent\n\t\tthis._nbOfCompletedTasks = 0\n\t\tconst { nbOfTasks } = this._taskQueue\n\t\tconst doAfterEachInitialTask = () => {\n\t\t\tthis._nbOfCompletedTasks += 1\n\t\t\tconst percent = (nbOfTasks > 0) ? (this._nbOfCompletedTasks / nbOfTasks) : 1\n\t\t\tconst loadPercent = Math.round(100 * percent)\n\t\t\tif (this._doWithLoadPercentChange) {\n\t\t\t\tthis._doWithLoadPercentChange(loadPercent)\n\t\t\t}\n\t\t}\n\t\tthis._taskQueue.start(doAfterEachInitialTask)\n\t}\n\n\t// Used in SequenceSlice\n\tgetTextureWithPath(path, mediaFragment = null) {\n\t\tif (!path || !this._textureResources || !this._textureResources[path]) {\n\t\t\treturn null\n\t\t}\n\t\tconst textureResource = this._textureResources[path]\n\t\tconst texture = textureResource.getTextureForMediaFragment(mediaFragment)\n\t\treturn texture\n\t}\n\n\t// Used in Slice (and SequenceSlice)\n\tnotifyTextureRemovalFromSlice(path) {\n\t\tconst { slices } = this._player\n\t\tif (path && this._textureResources[path]) {\n\t\t\tconst textureResource = this._textureResources[path]\n\t\t\ttextureResource.destroyTexturesIfPossible(slices)\n\t\t}\n\t}\n\n\t// Used in PageNavigator\n\tforceDestroyTexturesForPath(path) {\n\t\tif (!path || !this._textureResources[path]) {\n\t\t\treturn\n\t\t}\n\t\tconst textureResource = this._textureResources[path]\n\t\ttextureResource.forceDestroyTextures()\n\t}\n\n\tkillPendingLoads() {\n\t\tthis._taskQueue.reset()\n\t\t// Note that killing all tasks will call their respective textureResource.cancelLoad()\n\t\tthis._nbOfCompletedTasks = 0\n\t}\n\n\tdestroy() {\n\t\tthis.killPendingLoads()\n\t\tObject.values(this._textureResources).forEach((textureResource) => {\n\t\t\ttextureResource.forceDestroyTextures()\n\t\t})\n\t\tthis._textureResources = null\n\t}\n\n}","import * as constants from \"../constants\"\n\nexport default class StateHandler {\n\n\tget type() { return this._type }\n\n\t// Used in LayerPile\n\n\tget isAtStart() { return (this._statesArray.length === 0 || this._stateIndex === 0) }\n\n\tget isAtEnd() {\n\t\treturn (this._statesArray.length === 0\n\t\t\t|| this._stateIndex === this._statesArray.length - 1)\n\t}\n\n\tget isUndergoingChanges() { return (this._currentTransition.status !== \"none\") }\n\n\t// Used in PageNavigator\n\tget stateIndex() { return this._stateIndex }\n\n\tconstructor(layerPile, shouldStateLayersCoexistOutsideTransitions = false, player) {\n\t\tthis._layerPile = layerPile\n\t\tthis._shouldStateLayersCoexistOutsideTransitions = shouldStateLayersCoexistOutsideTransitions\n\t\tthis._player = player // Useful only for viewportRect\n\n\t\tthis._type = \"stateHandler\"\n\n\t\t// this._isLooping = false\n\n\t\tconst { layersArray } = layerPile\n\n\t\t// The _statesArray lists for each state the indices of the layers to add\n\t\t// (shouldStateLayersCoexistOutsideTransitions specifies what to do with already present layers)\n\t\tthis._statesArray = this._createStatesArray(layersArray)\n\n\t\tthis._stateIndex = null\n\t\tthis._reset()\n\t}\n\n\t_createStatesArray(layersArray) {\n\t\t// For a PageNavigator (in particular)\n\t\tif (this._shouldStateLayersCoexistOutsideTransitions === false) {\n\t\t\treturn layersArray.map((_, i) => ([i]))\n\t\t}\n\n\t\t// While for a multi-layer Segment...\n\t\tconst statesArray = []\n\t\tlet newLayerIndicesForState = []\n\t\tfor (let i = 0; i < layersArray.length; i += 1) {\n\t\t\tconst layer = layersArray[i]\n\t\t\tconst { entryForward } = layer || {} // Strong decision: only those are taken into account\n\t\t\t// (i.e. we're not considering possibly mismatched backwardEntries to build the list)\n\t\t\tif (entryForward && entryForward.isDiscontinuous === true && i !== 0) {\n\t\t\t\tstatesArray.push(newLayerIndicesForState)\n\t\t\t\tnewLayerIndicesForState = [i]\n\t\t\t} else {\n\t\t\t\tnewLayerIndicesForState.push(i)\n\t\t\t}\n\t\t}\n\t\tstatesArray.push(newLayerIndicesForState)\n\t\treturn statesArray\n\t}\n\n\t_reset() {\n\t\tthis._currentTransition = {\n\t\t\tstatus: \"none\",\n\t\t\tisGoingForward: true,\n\t\t\tlayerTransitionsArray: [],\n\t\t\tnbOfRunningLayerTransitions: 0,\n\t\t\tshouldForceToEnd: false,\n\t\t\tendCallback: null,\n\t\t\tshouldForceToStop: false,\n\t\t}\n\t}\n\n\t// Used here and in PageNavigator\n\tforceChangesToEnd(callback, isGoingForward) {\n\t\t// Only run the callback if the movement directions differ\n\t\tif (isGoingForward !== this._currentTransition.isGoingForward) {\n\t\t\tif (this._currentTransition.status === \"none\") {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t} // else\n\t\t\tthis._currentTransition.endCallback = callback\n\t\t}\n\t\tthis._currentTransition.shouldForceToEnd = true\n\t}\n\n\tgoToState(stateIndex, isGoingForward, shouldCancelTransition = false) {\n\t\tif (stateIndex < 0 || stateIndex >= this._statesArray.length) {\n\t\t\treturn\n\t\t}\n\n\t\tif (shouldCancelTransition === true) {\n\t\t\t// Ensure layerTransitions will be forced to end\n\t\t\tthis._currentTransition.shouldForceToEnd = true\n\t\t}\n\n\t\tconst oldStateIndex = this._stateIndex\n\n\t\tlet layerIndicesToRemove = []\n\t\tlet layerIndicesToAdd = []\n\n\t\t// For page transitions\n\t\tif (this._shouldStateLayersCoexistOutsideTransitions === false) {\n\t\t\tif (this._stateIndex !== null) { // No this._stateIndex on first goToState\n\t\t\t\tlayerIndicesToRemove = this._statesArray[this._stateIndex]\n\t\t\t}\n\n\t\t\tlayerIndicesToAdd = this._statesArray[stateIndex]\n\n\t\t// For layer transitions\n\t\t} else if (isGoingForward === true\n\t\t\t|| stateIndex === this._statesArray.length - 1) { // Same approach when coming back indeed\n\t\t\tlet i = (stateIndex === this._statesArray.length - 1) ? 0 : (this._stateIndex || 0)\n\t\t\twhile (i < stateIndex && i < this._statesArray.length) {\n\t\t\t\tthis._statesArray[i].forEach((layerIndex) => {\n\t\t\t\t\tconst layer = this._layerPile.getLayerAtIndex(layerIndex)\n\t\t\t\t\tthis._addLayerContent(layer, layerIndex, isGoingForward, this._stateIndex || 0)\n\t\t\t\t\tconst { content } = layer || {}\n\t\t\t\t\tcontent.setVisibility(true)\n\t\t\t\t\tlayer.finalizeEntry()\n\t\t\t\t\t// Do note that those layers are added right away, and thus will not appear\n\t\t\t\t\t// in layerIndicesToAdd, which is only concerned with the final layer,\n\t\t\t\t\t// for which an entry layerTransition may play!\n\t\t\t\t})\n\t\t\t\ti += 1\n\t\t\t}\n\t\t\tif (i === stateIndex) {\n\t\t\t\tlayerIndicesToAdd.push(...this._statesArray[i])\n\t\t\t}\n\t\t} else { // Going backward (i.e. stateIndex < this._stateIndex)\n\t\t\tlet i = this._statesArray.length - 1\n\t\t\twhile (i > stateIndex && i >= 0) {\n\t\t\t\tlayerIndicesToRemove.push(...this._statesArray[i])\n\t\t\t\ti -= 1\n\t\t\t}\n\t\t}\n\n\t\tif (layerIndicesToAdd.length === 0 && layerIndicesToRemove === 0) {\n\t\t\tthis._reset() // To counter the above shouldForceToEnd = true\n\t\t\treturn\n\t\t}\n\n\t\tconst layerTransitionsArray = this._createLayerTransitions(layerIndicesToAdd,\n\t\t\tlayerIndicesToRemove, isGoingForward, oldStateIndex)\n\t\tthis._currentTransition.status = \"started\"\n\t\tthis._currentTransition.oldStateIndex = oldStateIndex\n\t\tthis._currentTransition.newStateIndex = stateIndex\n\t\tthis._currentTransition.isGoingForward = isGoingForward\n\t\tthis._currentTransition.layerTransitionsArray = layerTransitionsArray\n\t\tthis._currentTransition.nbOfRunningLayerTransitions = layerTransitionsArray.length\n\n\t\tif (this._layerPile.doOnStateChangeStart) {\n\t\t\tthis._layerPile.doOnStateChangeStart(stateIndex)\n\t\t}\n\n\t\tthis._currentTransition.status = \"looping\"\n\t\tthis._startAllLayerTransitions()\n\t}\n\n\t_addLayerContent(layer, layerIndex, isGoingForward, oldStateIndex) {\n\t\t// Make content invisible (in case a fade-in has to be run)\n\t\tconst { content } = layer || {}\n\t\tcontent.setVisibility(false)\n\n\t\t// Add new layer at appropriate depth\n\t\tconst depth = this._layerPile.getDepthOfNewLayer(oldStateIndex, isGoingForward)\n\t\tthis._layerPile.addChildAtIndex(content, depth)\n\n\t\tlayer.setupForEntry(isGoingForward)\n\t}\n\n\t_createLayerTransitions(layerIndicesToAdd, layerIndicesToRemove, isGoingForward, oldStateIndex) {\n\t\tconst layerTransitionsArray = []\n\n\t\tlayerIndicesToAdd.forEach((layerIndex) => {\n\t\t\tconst layer = this._layerPile.getLayerAtIndex(layerIndex)\n\n\t\t\t// Add layer content\n\t\t\tthis._addLayerContent(layer, layerIndex, isGoingForward, oldStateIndex)\n\n\t\t\t// Now create layerTransitions\n\n\t\t\tconst { content, entryForward, entryBackward } = layer || {}\n\t\t\tconst entry = (isGoingForward === true) ? entryForward : entryBackward\n\t\t\tconst {\n\t\t\t\ttype, duration, direction, sliceType, slice, controlled,\n\t\t\t} = entry || {}\n\n\t\t\tlet layerTransition = {\n\t\t\t\tlayer,\n\t\t\t\tisExiting: false,\n\t\t\t}\n\n\t\t\tif (entry && (type === \"fade-in\" || type === \"fade-out\" // No \"remove\" transition here\n\t\t\t\t|| type === \"slide-in\" || type === \"slide-out\" || type === \"animation\")) {\n\n\t\t\t\tlet actualDuration = duration // May still be undefined\n\t\t\t\tif (sliceType !== \"video\" || !slice) {\n\t\t\t\t\tactualDuration = (duration !== undefined) ? duration : constants.defaultDuration\n\t\t\t\t}\n\t\t\t\tlayerTransition = {\n\t\t\t\t\t...layerTransition,\n\t\t\t\t\ttype,\n\t\t\t\t\tduration: actualDuration,\n\t\t\t\t} // All start with same zero date as the first one in the list!\n\n\t\t\t\tif (type === \"slide-in\" || type === \"slide-out\") {\n\t\t\t\t\tlayerTransition.direction = direction\n\t\t\t\t\t// Prevent resize from impacting the content's position\n\t\t\t\t\tif (direction === \"ltr\" || direction === \"rtl\") {\n\t\t\t\t\t\tcontent.setIsXPositionUpdating(true)\n\t\t\t\t\t} else if (direction === \"ttb\" || direction === \"btt\") {\n\t\t\t\t\t\tcontent.setIsYPositionUpdating(true)\n\t\t\t\t\t}\n\t\t\t\t} else if (type === \"animation\" && slice) {\n\t\t\t\t\tlayerTransition.sliceType = sliceType\n\t\t\t\t\tlayerTransition.slice = slice\n\t\t\t\t\tif (sliceType === \"video\" && slice && !actualDuration) {\n\t\t\t\t\t\tslice.setDoOnEnd(this.forceChangesToEnd.bind(this, null,\n\t\t\t\t\t\t\tthis._currentTransition.isGoingForward))\n\t\t\t\t\t}\n\t\t\t\t\tslice.resize()\n\t\t\t\t\tthis._layerPile.addChild(slice)\n\t\t\t\t}\n\t\t\t}\n\t\t\tlayerTransitionsArray.push(layerTransition)\n\t\t})\n\n\t\tlayerIndicesToRemove.forEach((layerIndex) => {\n\t\t\tconst layer = this._layerPile.getLayerAtIndex(layerIndex)\n\t\t\tconst { content, exitForward, exitBackward } = layer || {}\n\t\t\tconst exit = (isGoingForward === true) ? exitForward : exitBackward\n\t\t\tconst {\n\t\t\t\ttype, duration, direction, sliceType, slice, controlled,\n\t\t\t} = exit || {}\n\n\t\t\tlet layerTransition = {\n\t\t\t\tlayer,\n\t\t\t\tisExiting: true,\n\t\t\t}\n\n\t\t\tif (exit && (type === \"remove\" || type === \"fade-in\" || type === \"fade-out\"\n\t\t\t\t|| type === \"slide-in\" || type === \"slide-out\" || type === \"animation\")) {\n\n\t\t\t\tlet actualDuration = duration // Can be undefined!\n\t\t\t\tif (type !== \"animation\") {\n\t\t\t\t\tactualDuration = (duration !== undefined) ? duration : constants.defaultDuration\n\t\t\t\t}\n\t\t\t\tlayerTransition = {\n\t\t\t\t\t...layerTransition,\n\t\t\t\t\ttype,\n\t\t\t\t\tduration: actualDuration,\n\t\t\t\t} // All start with same zero date as the first one in the list!\n\n\t\t\t\tif (type === \"slide-in\" || type === \"slide-out\") {\n\t\t\t\t\tlayerTransition.direction = direction\n\t\t\t\t\t// Prevent resize from impacting the content's position\n\t\t\t\t\tif (direction === \"ltr\" || direction === \"rtl\") {\n\t\t\t\t\t\tcontent.setIsXPositionUpdating(true)\n\t\t\t\t\t} else if (direction === \"ttb\" || direction === \"btt\") {\n\t\t\t\t\t\tcontent.setIsYPositionUpdating(true)\n\t\t\t\t\t}\n\t\t\t\t} else if (type === \"animation\" && slice) {\n\t\t\t\t\tlayerTransition.sliceType = sliceType\n\t\t\t\t\tlayerTransition.slice = slice\n\t\t\t\t}\n\t\t\t}\n\t\t\tlayerTransitionsArray.push(layerTransition)\n\t\t})\n\n\t\treturn layerTransitionsArray\n\t}\n\n\t_startAllLayerTransitions() {\n\t\tthis._startTime = Date.now()\n\t\tthis._currentTransition.layerTransitionsArray.forEach((layerTransition) => {\n\t\t\tconst { sliceType, slice } = layerTransition\n\n\t\t\t// If the layerTransition is a video or sequence with no duration,\n\t\t\t// or a sequence with no frames loaded, skip it\n\t\t\tif (sliceType && (!slice || slice.canPlay === false)) {\n\t\t\t\tthis._endLayerTransition(layerTransition)\n\n\t\t\t// Otherwise play the layerTransition\n\t\t\t} else {\n\t\t\t\tif (slice) {\n\t\t\t\t\tslice.finalizeEntry()\n\t\t\t\t}\n\t\t\t\tthis._runLayerTransition(layerTransition, null)\n\t\t\t}\n\t\t})\n\t}\n\n\t// The function will below shall loop if layerTransitionPercent !== null\n\t_runLayerTransition(layerTransition, layerTransitionPercent = null) {\n\t\tconst {\n\t\t\tlayer,\n\t\t\ttype, // Type is layerTransition type (not layer type)\n\t\t\tduration, // Can be undefined for a video (or controlled sequence)\n\t\t\tdirection,\n\t\t\tsliceType,\n\t\t\tslice,\n\t\t} = layerTransition\n\n\t\tlet percent = 1\n\t\tif (layerTransitionPercent !== null) {\n\t\t\tpercent = layerTransitionPercent\n\t\t} else if (duration && duration > 0) {\n\t\t\tpercent = (Date.now() - this._startTime) / duration\n\t\t} else if (sliceType === \"video\" && slice) { // Play a video transition until percent = 1\n\t\t\tpercent = 0\n\t\t}\n\n\t\t// If the user has forced the transition to its end...\n\t\tif (this._currentTransition.shouldForceToEnd === true\n\t\t\t// ... or it is not a video running to its end, and it has actually ended\n\t\t\t|| percent >= 1) {\n\t\t\tthis._endLayerTransition(layerTransition)\n\n\t\t// Otherwise just apply the required changes based on time\n\t\t} else if (type === \"animation\") {\n\t\t\t// Continue playing the layerTransition, waiting for its eventual end\n\t\t\trequestAnimationFrame(this._runLayerTransition.bind(this, layerTransition, null))\n\n\t\t} else {\n\t\t\tconst { viewportRect } = this._player\n\t\t\tconst { width, height } = viewportRect\n\t\t\tconst { content } = layer\n\n\t\t\tif (type === \"fade-in\") {\n\t\t\t\tcontent.setAlpha(percent)\n\t\t\t} else if (type === \"fade-out\") {\n\t\t\t\tcontent.setAlpha(1 - percent)\n\t\t\t} else if (type === \"slide-in\") {\n\t\t\t\tswitch (direction) {\n\t\t\t\tcase \"ltr\":\n\t\t\t\t\tcontent.setXOffset((percent - 1) * width)\n\t\t\t\t\tbreak\n\t\t\t\tcase \"rtl\":\n\t\t\t\t\tcontent.setXOffset((1 - percent) * width)\n\t\t\t\t\tbreak\n\t\t\t\tcase \"ttb\":\n\t\t\t\t\tcontent.setYOffset((percent - 1) * height)\n\t\t\t\t\tbreak\n\t\t\t\tcase \"btt\":\n\t\t\t\t\tcontent.setYOffset((1 - percent) * height)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t} else if (type === \"slide-out\") {\n\t\t\t\tswitch (direction) {\n\t\t\t\tcase \"ltr\":\n\t\t\t\t\tcontent.setXOffset(percent * width)\n\t\t\t\t\tbreak\n\t\t\t\tcase \"rtl\":\n\t\t\t\t\tcontent.setXOffset(-percent * width)\n\t\t\t\t\tbreak\n\t\t\t\tcase \"ttb\":\n\t\t\t\t\tcontent.setYOffset(percent * height)\n\t\t\t\t\tbreak\n\t\t\t\tcase \"btt\":\n\t\t\t\t\tcontent.setYOffset(-percent * height)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontent.setVisibility(true)\n\n\t\t\tif (layerTransitionPercent === null) {\n\t\t\t\trequestAnimationFrame(this._runLayerTransition.bind(this, layerTransition, null))\n\t\t\t}\n\t\t}\n\t}\n\n\t_endLayerTransition(layerTransition) {\n\t\tconst { layer, isExiting, slice } = layerTransition\n\n\t\tif (slice) {\n\t\t\tslice.finalizeExit()\n\t\t\tslice.removeFromParent()\n\t\t}\n\n\t\tconst { content } = layer\n\t\tcontent.setAlpha(1)\n\t\tcontent.setVisibility(true)\n\t\tcontent.setIsXPositionUpdating(false)\n\t\tcontent.setIsYPositionUpdating(false)\n\t\tcontent.resetPosition()\n\n\t\tif (isExiting === true) {\n\t\t\tlayer.finalizeExit()\n\t\t\tcontent.removeFromParent()\n\t\t} else {\n\t\t\tlayer.finalizeEntry()\n\t\t}\n\n\t\tthis._currentTransition.nbOfRunningLayerTransitions -= 1\n\n\t\tif (this._currentTransition.nbOfRunningLayerTransitions === 0) {\n\t\t\tconst { newStateIndex, endCallback } = this._currentTransition\n\t\t\tthis._stateIndex = newStateIndex\n\n\t\t\tthis._layerPile.finalizeEntry()\n\t\t\tthis._reset()\n\n\t\t\t// Run the callback if there was one\n\t\t\tif (endCallback) {\n\t\t\t\tendCallback()\n\t\t\t}\n\t\t}\n\t}\n\n\t// Functions linked to role in LayerPile\n\n\tattemptToGoForward(shouldCancelTransition = false, doIfIsUndergoingChanges = null,\n\t\tpercent = null) { // Go to next state\n\t\tconst isGoingForward = true\n\t\tif (this.isUndergoingChanges === true) { // If has looping layerTransitions\n\t\t\tthis.forceChangesToEnd(doIfIsUndergoingChanges, isGoingForward)\n\t\t\treturn true\n\t\t}\n\t\tif (this._statesArray.length === 0 || this._stateIndex >= this._statesArray.length - 1) {\n\t\t\treturn false\n\t\t}\n\t\tthis.goToState(this._stateIndex + 1, isGoingForward, shouldCancelTransition, percent)\n\t\treturn true\n\t}\n\n\tattemptToGoBackward(shouldCancelTransition = false, doIfIsUndergoingChanges = null,\n\t\tpercent = null) { // Go to previous state\n\t\tconst isGoingForward = false\n\t\tif (this.isUndergoingChanges === true) { // If has looping layerTransitions\n\t\t\tthis.forceChangesToEnd(doIfIsUndergoingChanges, isGoingForward)\n\t\t\treturn true\n\t\t}\n\t\tif (this._statesArray.length === 0 || this._stateIndex === 0) {\n\t\t\treturn false\n\t\t}\n\t\tthis.goToState(this._stateIndex - 1, isGoingForward, shouldCancelTransition, percent)\n\t\treturn true\n\t}\n\n\t// Go to start or end state depending on whether goes forward or not\n\tsetupForEntry(isGoingForward) {\n\t\tthis._reset()\n\n\t\tif (isGoingForward === true) {\n\t\t\tthis.goToState(0, isGoingForward)\n\t\t} else { // Go to last state\n\t\t\tthis.goToState(this._statesArray.length - 1, isGoingForward)\n\t\t}\n\t}\n\n\tfinalizeExit() {\n\t\tthis._stateIndex = null\n\t}\n\n\tresize() {\n\t\tif (this.isUndergoingChanges === false) {\n\t\t\treturn\n\t\t}\n\t\tthis._currentTransition.layerTransitionsArray.forEach((layerTransition) => {\n\t\t\tconst { slice } = layerTransition\n\t\t\tif (slice) {\n\t\t\t\tslice.resize()\n\t\t\t}\n\t\t})\n\t}\n\n}","import * as Utils from \"../../utils\"\nimport * as constants from \"../../constants\"\n\nexport default class Camera {\n\n\tget isZoomed() { return (this._zoomFactor !== 1) }\n\n\t// When the scene is jumping between two snap points, isAutoScrolling === true\n\tget isAutoScrolling() {\n\t\treturn (this._jumpData) ? this._jumpData.isAutoScrolling : false\n\t}\n\n\t// In a scene that is larger than the viewport, isAtStart = true on reaching it going forward\n\t// (while a scene that is not larger than the viewport is considered to be always at its start)\n\tget isAtStart() {\n\t\treturn (this.isZoomed === false && (this._progress === null || this._progress === 0))\n\t}\n\n\t// In a scene larger than the viewport, isAtEnd = true before leaving the scene going forward\n\t// (while a scene that is not larger than the viewport is considered to be always at its end)\n\tget isAtEnd() {\n\t\treturn (this.isZoomed === false && (this._progress === null || this._progress === 1))\n\t}\n\n\tget _hasSpaceToMove() {\n\t\treturn (Math.abs(this._maxX - this._minX) + Math.abs(this._maxY - this._minY) > 0)\n\t}\n\n\tconstructor(scene, overflow, player) {\n\t\t// A scene is just a layerPile (in the divina case, can only be a page)\n\t\tthis._scene = scene\n\t\tthis._overflow = overflow\n\t\t// Useful for viewportRect and updateDisplayForZoomFactor (and options just below)\n\t\tthis._player = player\n\n\t\tconst { eventEmitter, options } = player\n\t\tthis._eventEmitter = eventEmitter\n\t\tconst {\n\t\t\tallowsPaginatedScroll,\n\t\t\tisPaginationSticky,\n\t\t\tisPaginationGridBased,\n\t\t} = options\n\t\tthis._allowsPaginatedScroll = (allowsPaginatedScroll === true\n\t\t\t|| allowsPaginatedScroll === false)\n\t\t\t? allowsPaginatedScroll\n\t\t\t: constants.defaultAllowsPaginatedScroll\n\t\tthis._isPaginationSticky = (isPaginationSticky === true || isPaginationSticky === false)\n\t\t\t? isPaginationSticky\n\t\t\t: constants.defaultIsPaginationSticky\n\t\tthis._isPaginationGridBased = (isPaginationGridBased === true\n\t\t\t|| isPaginationGridBased === false)\n\t\t\t? isPaginationGridBased\n\t\t\t: constants.defaultIsPaginationGridBased\n\n\t\tthis._inScrollDirection = null\n\t\tthis._relativeStart = null\n\t\tthis._relativeEnd = null\n\n\t\t// Those values can change on a resize (because of the change in viewportRect) but not with zoom\n\t\t// (i.e. the values are those that apply when zoomFactor === 1)\n\t\tthis._distanceToCover = 0\n\t\tthis._startPosition = { x: 0, y: 0 } // Camera center position for progress = 0 (or null)\n\t\tthis._progressVector = { x: 0, y: 0 } // Cam center endPosition = startPosition + progressVector\n\n\t\t// The below values can necessarily change on a resize, but also with a zoom change\n\t\tthis._progress = null // However if null, progress remains null whatever the zoomFactor\n\t\tthis._minX = 0 // Minimum value for the camera center's coordinate on the x axis\n\t\tthis._maxX = 0\n\t\tthis._minY = 0\n\t\tthis._maxY = 0\n\t\tthis._currentPosition = { x: 0, y: 0 } // Camera center in non-scaled/non-zoomed referential\n\t\tthis._signedPercent = null // Signed % of currentPosition x or y over full scene width or height\n\n\t\t// Add an empty _rawSnapPointsArray to hold the values specified in the original linkObject\n\t\t// A real _snapPointsArray with progress values will later be computed if needed\n\t\t// (i.e. if the scene is larger than the viewport, which should be checked after each resize)\n\t\tthis._rawSnapPointsArray = []\n\t\tthis._snapPointsArray = null\n\t\tthis._reset()\n\t\tthis._possibleError = 0\n\t\tthis._paginationProgressStep = null\n\t\tthis._lastNonTemporaryProgress = null\n\t\tthis._virtualPointInfo = {}\n\n\t\tthis._zoomFactor = 1\n\t\tthis._zoomTouchPoint = null\n\t}\n\n\t_reset() {\n\t\tthis._jumpData = {\n\t\t\tisAutoScrolling: false,\n\t\t\tstartDate: null,\n\t\t\tduration: 0,\n\t\t\tstartProgress: null,\n\t\t\ttargetProgress: null,\n\t\t\tshouldForceToEnd: false,\n\t\t\tendCallback: null,\n\t\t}\n\t}\n\n\tsetInScrollDirection(inScrollDirection) {\n\t\tthis._inScrollDirection = inScrollDirection\n\t\tthis._setRelativeStartAndEnd(inScrollDirection)\n\t\tthis._setVirtualPointInfo(inScrollDirection)\n\t}\n\n\t// Based on the page's inScrollDirection, express the viewport \"start\"\n\t// and \"end\" points in relative coordinates (from the top left corner)\n\t_setRelativeStartAndEnd(inScrollDirection) {\n\t\tthis._relativeStart = null\n\t\tthis._relativeEnd = null\n\t\tswitch (inScrollDirection) {\n\t\tcase \"ltr\":\n\t\t\tthis._relativeStart = { x: 0, y: 0.5 } // Start is the middle left point\n\t\t\tthis._relativeEnd = { x: 1, y: 0.5 } // End is the middle right point\n\t\t\tbreak\n\t\tcase \"rtl\":\n\t\t\tthis._relativeStart = { x: 1, y: 0.5 }\n\t\t\tthis._relativeEnd = { x: 0, y: 0.5 }\n\t\t\tbreak\n\t\tcase \"ttb\":\n\t\t\tthis._relativeStart = { x: 0.5, y: 0 }\n\t\t\tthis._relativeEnd = { x: 0.5, y: 1 }\n\t\t\tbreak\n\t\tcase \"btt\":\n\t\t\tthis._relativeStart = { x: 0.5, y: 1 }\n\t\t\tthis._relativeEnd = { x: 0.5, y: 0 }\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\t}\n\n\t_setVirtualPointInfo(inScrollDirection) {\n\t\tlet getPercent = null\n\t\tlet referenceDimension = null\n\t\tlet coord = null\n\t\tlet worksBackward = false\n\n\t\tswitch (inScrollDirection) {\n\t\tcase \"ltr\":\n\t\t\tgetPercent = () => (\n\t\t\t\t(this._currentPosition.x - this._minX) / (this._maxX - this._minX)\n\t\t\t)\n\t\t\treferenceDimension = \"width\"\n\t\t\tcoord = \"x\"\n\t\t\tworksBackward = false\n\t\t\tbreak\n\t\tcase \"rtl\":\n\t\t\tgetPercent = () => (\n\t\t\t\t(this._maxX - this._currentPosition.x) / (this._maxX - this._minX)\n\t\t\t)\n\t\t\treferenceDimension = \"width\"\n\t\t\tcoord = \"x\"\n\t\t\tworksBackward = true\n\t\t\tbreak\n\t\tcase \"ttb\":\n\t\t\tgetPercent = () => (\n\t\t\t\t(this._currentPosition.y - this._minY) / (this._maxY - this._minY)\n\t\t\t)\n\t\t\treferenceDimension = \"height\"\n\t\t\tcoord = \"y\"\n\t\t\tworksBackward = false\n\t\t\tbreak\n\t\tcase \"btt\":\n\t\t\tgetPercent = () => (\n\t\t\t\t(this._maxY - this._currentPosition.y) / (this._maxY - this._minY)\n\t\t\t)\n\t\t\treferenceDimension = \"height\"\n\t\t\tcoord = \"y\"\n\t\t\tworksBackward = true\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\t\t/*if (inScrollDirection === \"ltr\" || inScrollDirection === \"rtl\") {\n\t\t\treferenceDimension = \"width\"\n\t\t\tcoord = \"x\"\n\t\t} else if (inScrollDirection === \"ttb\" || inScrollDirection === \"btt\") {\n\t\t\treferenceDimension = \"height\"\n\t\t\tcoord = \"y\"\n\t\t}\n\t\tconst worksBackward = (inScrollDirection === \"rtl\" || inScrollDirection === \"btt\")*/\n\t\tthis._virtualPointInfo = {\n\t\t\tgetPercent, referenceDimension, coord, worksBackward,\n\t\t}\n\t}\n\n\taddSnapPoints(snapPointsArray, lastSegmentIndex) {\n\t\tsnapPointsArray.forEach((snapPointInfo) => {\n\t\t\tconst { viewport, x, y } = snapPointInfo\n\t\t\tif ((viewport === \"start\" || viewport === \"center\" || viewport === \"end\")\n\t\t\t\t&& (x !== null || y !== null)) {\n\t\t\t\tconst snapPoint = {\n\t\t\t\t\tsegmentIndex: lastSegmentIndex,\n\t\t\t\t\tviewport,\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t}\n\t\t\t\tthis._rawSnapPointsArray.push(snapPoint)\n\t\t\t}\n\t\t})\n\t}\n\n\t// After an overflowHandler's _positionSegments() operation, so in particular after a resize:\n\t// - If the total length of all segments together is less than the viewport dimension,\n\t// then the camera will not have space to move (but beware: only if zoomFactor = 1),\n\t// so the camera's start and end positions will be set to the center of the whole segment block\n\t// - If not, _hasSpaceToMove = true and there is no need to move the camera initially,\n\t// since it is already well positioned respective to the first segment\n\t// (Also, do note that small pixel errors are accounted for!)\n\tsetBoundsAndUpdateOnResize() {\n\t\tlet distanceToCover = 0\n\t\tlet startCenter = null\n\n\t\tconst { viewportRect } = this._player\n\t\tconst { width, height } = viewportRect\n\t\tthis._startPosition = { x: 0, y: 0 }\n\t\tthis._progressVector = { x: 0, y: 0 }\n\n\t\tthis._referenceSceneSize = {\n\t\t\twidth: this._scene.size.width,\n\t\t\theight: this._scene.size.height,\n\t\t}\n\n\t\tif (this._inScrollDirection === \"ltr\" || this._inScrollDirection === \"rtl\") {\n\t\t\tconst sceneContainerWidth = this._scene.size.width\n\t\t\tdistanceToCover = sceneContainerWidth - width\n\t\t\tconst signFactor = (this._inScrollDirection === \"rtl\") ? -1 : 1\n\t\t\tif (distanceToCover <= constants.possiblePixelError) {\n\t\t\t\tdistanceToCover = 0\n\t\t\t\tstartCenter = signFactor * (sceneContainerWidth / 2)\n\t\t\t} else {\n\t\t\t\tstartCenter = signFactor * (width / 2)\n\t\t\t}\n\t\t\tthis._startPosition.x = startCenter\n\t\t\tthis._progressVector.x = signFactor * distanceToCover\n\n\t\t} else if (this._inScrollDirection === \"ttb\" || this._inScrollDirection === \"btt\") {\n\t\t\tconst sceneContainerHeight = this._scene.size.height\n\t\t\tdistanceToCover = sceneContainerHeight - height\n\t\t\tconst signFactor = (this._inScrollDirection === \"btt\") ? -1 : 1\n\t\t\tif (distanceToCover <= constants.possiblePixelError) {\n\t\t\t\tdistanceToCover = 0\n\t\t\t\tstartCenter = signFactor * (sceneContainerHeight / 2)\n\t\t\t} else {\n\t\t\t\tstartCenter = signFactor * (height / 2)\n\t\t\t}\n\t\t\tthis._startPosition.y = startCenter\n\t\t\tthis._progressVector.y = signFactor * distanceToCover\n\t\t}\n\t\tthis._distanceToCover = Math.max(distanceToCover, 0)\n\n\t\t// Now if the page is larger than the effective viewport...\n\t\tif (this._distanceToCover > 0) {\n\n\t\t\t// Compute the possible error for progress calculations\n\t\t\tthis._possibleError = this._getProgressStepForLength(constants.possiblePixelError)\n\n\t\t\t// Compute the progress delta corresponding to one pagination step forward\n\t\t\tthis._paginationProgressStep = this._getPaginationProgressStep()\n\n\t\t\t// Build snap points (i.e. define their progress values), if relevant\n\t\t\tthis._buildRelevantSnapPoints()\n\t\t}\n\n\t\tconst callback = () => {\n\t\t\t// Force zoomFactor to 1 and recompute x and y bounds\n\t\t\tthis._setZoomFactorAndUpdateBounds(1)\n\n\t\t\t// Now reposition the camera and update progress (if not null)\n\t\t\tthis._updatePositionAndProgressOnResize()\n\t\t}\n\n\t\t// If we were actually jumping between snap points, force jump to end\n\t\tif (this.isAutoScrolling === true) {\n\t\t\tthis._jumpData.shouldForceToEnd = true\n\t\t\tthis._jumpData.endCallback = callback\n\t\t} else {\n\t\t\tcallback()\n\t\t}\n\t}\n\n\t_getPaginationProgressStep() {\n\t\tconst { viewportRect } = this._player\n\t\tconst { width, height } = viewportRect\n\t\tlet progressStep = 0\n\t\tif (this._inScrollDirection === \"ltr\" || this._inScrollDirection === \"rtl\") {\n\t\t\tprogressStep = this._getProgressStepForLength(width)\n\t\t} else if (this._inScrollDirection === \"ttb\" || this._inScrollDirection === \"btt\") {\n\t\t\tprogressStep = this._getProgressStepForLength(height)\n\t\t}\n\t\treturn progressStep\n\t}\n\n\t_getProgressStepForLength(length) {\n\t\tconst progressStep = Math.min(Math.max(length / this._distanceToCover, 0), 1)\n\t\treturn progressStep\n\t}\n\n\t// Build relevant snap points by adding a progress value to their raw information\n\t_buildRelevantSnapPoints() {\n\t\tconst snapPointsArray = []\n\t\tlet lastProgress = -1\n\t\tthis._rawSnapPointsArray.forEach((rawSnapPoint) => {\n\t\t\tconst progress = this._getProgressForSnapPoint(rawSnapPoint)\n\t\t\tif (progress !== null && progress > lastProgress) {\n\t\t\t\tconst snapPoint = { ...rawSnapPoint, progress }\n\t\t\t\tsnapPointsArray.push(snapPoint)\n\t\t\t\tlastProgress = progress\n\t\t\t}\n\t\t})\n\t\tthis._snapPointsArray = snapPointsArray\n\t}\n\n\t_getProgressForSnapPoint(rawSnapPoint) {\n\t\tconst {\n\t\t\tsegmentIndex,\n\t\t\tviewport,\n\t\t\tx,\n\t\t\ty,\n\t\t} = rawSnapPoint\n\t\tconst segment = this._scene.layersArray[segmentIndex].content\n\t\tconst { size, positionInSegmentLine } = segment\n\n\t\t// Get the top left position of the camera for the snap point alignment\n\t\tconst position = this._getCameraPositionInSegmentForAlignment(viewport, { x, y }, size)\n\t\tif (!position) {\n\t\t\treturn null\n\t\t}\n\t\t// Update the position based on the segment's position in the scene\n\t\tposition.x += positionInSegmentLine.x\n\t\tposition.y += positionInSegmentLine.y\n\n\t\t// Compute the distance from the scene container's start point to that new point\n\t\tconst distanceToCenter = Utils.getDistance(this._startPosition, position)\n\t\t// Convert that value into an acceptable progress value (between 0 and 1)\n\t\tlet progress = null\n\t\tif (distanceToCenter < constants.possiblePixelError) {\n\t\t\tprogress = 0\n\t\t} else if (Math.abs(this._distanceToCover - distanceToCenter) < constants.possiblePixelError) {\n\t\t\tprogress = 1\n\t\t} else {\n\t\t\tprogress = Math.min(Math.max(distanceToCenter / this._distanceToCover, 0), 1)\n\t\t}\n\n\t\treturn progress\n\t}\n\n\t// Get the position of the camera's top left point corresponding to a given snap point alignment\n\t_getCameraPositionInSegmentForAlignment(viewportPoint, coords, segmentSize) {\n\t\tconst sign = (this._inScrollDirection === \"rtl\" || this._inScrollDirection === \"btt\") ? -1 : 1\n\t\tconst x = Utils.parseCoordinate(coords.x, segmentSize.width)\n\t\tconst y = Utils.parseCoordinate(coords.y, segmentSize.height)\n\t\tif (x === null || y === null) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst { viewportRect } = this._player\n\t\tconst { width, height } = viewportRect\n\t\tconst position = {\n\t\t\tx: sign * x,\n\t\t\ty: sign * y,\n\t\t}\n\t\tswitch (viewportPoint) {\n\t\tcase \"start\":\n\t\t\tposition.x -= (this._relativeStart.x - 0.5) * width\n\t\t\tposition.y -= (this._relativeStart.y - 0.5) * height\n\t\t\tbreak\n\t\tcase \"end\":\n\t\t\tposition.x -= (this._relativeEnd.x - 0.5) * width\n\t\t\tposition.y -= (this._relativeEnd.y - 0.5) * height\n\t\t\tbreak\n\t\tdefault: // \"center\"\n\t\t\tbreak\n\t\t}\n\t\treturn position\n\t}\n\n\t// Called by a resize or zoom change\n\t_setZoomFactorAndUpdateBounds(zoomFactor) {\n\t\tthis._zoomFactor = Math.min(Math.max(zoomFactor, 1), constants.maxZoomFactor)\n\t\tthis._scene.setScale(this._zoomFactor) // Reminder: this._scene is a Container\n\n\t\tthis._player.updateDisplayForZoomFactor(zoomFactor)\n\n\t\tthis._updateMinAndMaxX()\n\t\tthis._updateMinAndMaxY()\n\t\tthis._updateOffsetInScaledReferential()\n\t}\n\n\t_updateMinAndMaxX() {\n\t\tconst { rootSize, viewportRect } = this._player\n\t\tconst { width } = viewportRect\n\n\t\tconst tippingZoomFactorValue = width / this._referenceSceneSize.width\n\n\t\tif (this._inScrollDirection === \"ltr\") {\n\t\t\t// Reminder: this._startPosition.x does not change\n\t\t\t// And = this._referenceSceneSize.width / 2 if this._referenceSceneSize.width < width\n\t\t\tif (this._zoomFactor < tippingZoomFactorValue) {\n\t\t\t\tconst k = (this._zoomFactor - 1) / (tippingZoomFactorValue - 1)\n\t\t\t\tthis._minX = this._startPosition.x + k * (width / 2 - this._startPosition.x)\n\t\t\t\tthis._maxX = this._minX\n\t\t\t} else {\n\t\t\t\tthis._minX = width / 2\n\t\t\t\tthis._maxX = this._minX + this._referenceSceneSize.width * this._zoomFactor - width\n\t\t\t}\n\t\t} else if (this._inScrollDirection === \"rtl\") {\n\t\t\tif (this._zoomFactor < tippingZoomFactorValue) {\n\t\t\t\tconst k = (this._zoomFactor - 1) / (tippingZoomFactorValue - 1)\n\t\t\t\tthis._maxX = this._startPosition.x - k * (width / 2 + this._startPosition.x)\n\t\t\t\tthis._minX = this._maxX\n\t\t\t} else {\n\t\t\t\tthis._maxX = -width / 2\n\t\t\t\tthis._minX = this._maxX - this._referenceSceneSize.width * this._zoomFactor + width\n\t\t\t}\n\t\t} else {\n\t\t\tconst sizeDiff = this._referenceSceneSize.width * this._zoomFactor - rootSize.width\n\t\t\tconst delta = (sizeDiff > 0) ? sizeDiff / 2 : 0\n\t\t\tthis._minX = this._startPosition.x - delta\n\t\t\tthis._maxX = this._startPosition.x + delta\n\t\t}\n\t}\n\n\t_updateMinAndMaxY() {\n\t\tconst { rootSize, viewportRect } = this._player\n\t\tconst { height } = viewportRect\n\n\t\tconst tippingZoomFactorValue = height / this._referenceSceneSize.height\n\n\t\tif (this._inScrollDirection === \"ttb\") {\n\t\t\tif (this._zoomFactor < tippingZoomFactorValue) {\n\t\t\t\tconst k = (this._zoomFactor - 1) / (tippingZoomFactorValue - 1)\n\t\t\t\tthis._minY = this._startPosition.y + k * (height / 2 - this._startPosition.y)\n\t\t\t\tthis._maxY = this._minY\n\t\t\t} else {\n\t\t\t\tthis._minY = height / 2\n\t\t\t\tthis._maxY = this._minY + this._referenceSceneSize.height * this._zoomFactor - height\n\t\t\t}\n\t\t} else if (this._inScrollDirection === \"btt\") {\n\t\t\tif (this._zoomFactor < tippingZoomFactorValue) {\n\t\t\t\tconst k = (this._zoomFactor - 1) / (tippingZoomFactorValue - 1)\n\t\t\t\tthis._maxY = this._startPosition.y - k * (height / 2 + this._startPosition.y)\n\t\t\t\tthis._minY = this._maxY\n\t\t\t} else {\n\t\t\t\tthis._maxY = -height / 2\n\t\t\t\tthis._minY = this._maxY - this._referenceSceneSize.height * this._zoomFactor + height\n\t\t\t}\n\t\t} else {\n\t\t\tconst sizeDiff = this._referenceSceneSize.height * this._zoomFactor - rootSize.height\n\t\t\tconst delta = (sizeDiff > 0) ? sizeDiff / 2 : 0\n\t\t\tthis._minY = this._startPosition.y - delta\n\t\t\tthis._maxY = this._startPosition.y + delta\n\t\t}\n\t}\n\n\t_updateOffsetInScaledReferential() {\n\t\tlet distanceInScaledReferential = null\n\t\tif (this._inScrollDirection === \"ltr\" || this._inScrollDirection === \"rtl\") {\n\t\t\tdistanceInScaledReferential = this._maxX - this._minX\n\t\t} else if (this._inScrollDirection === \"ttb\" || this._inScrollDirection === \"btt\") {\n\t\t\tdistanceInScaledReferential = this._maxY - this._minY\n\t\t}\n\t\tif (!distanceInScaledReferential) {\n\t\t\treturn\n\t\t}\n\t\tthis._offsetInScaledReferential = distanceInScaledReferential\n\t\tthis._offsetInScaledReferential -= this._distanceToCover * this._zoomFactor\n\t\tthis._offsetInScaledReferential /= 2\n\t}\n\n\t_updatePositionAndProgressOnResize() { // Reminder: this._zoomFactor necessarily is 1\n\t\t// If the scene can now entirely fit within the viewport\n\t\tif (this._distanceToCover === 0) {\n\n\t\t\tthis._setPosition(this._startPosition)\n\t\t\tthis.setProgress(null)\n\n\t\t} else { // Note that progress may have been null before\n\n\t\t\t// Keep center of camera fixed\n\n\t\t\tconst { width, height } = this._scene.size\n\t\t\tconst newPosition = {\n\t\t\t\tx: Math.min(Math.max(this._signedPercent * width,\n\t\t\t\t\tthis._minX), this._maxX),\n\t\t\t\ty: Math.min(Math.max(this._signedPercent * height,\n\t\t\t\t\tthis._minY), this._maxY),\n\t\t\t}\n\n\t\t\tif (this._overflow === \"scrolled\") {\n\t\t\t\tthis._setPosition(newPosition)\n\t\t\t}\n\n\t\t\tconst shouldStoreLastNonTemporaryProgress = (this._overflow === \"paginated\"\n\t\t\t\t&& this._isPaginationSticky === true)\n\t\t\tthis._updateProgressForPosition(newPosition, shouldStoreLastNonTemporaryProgress)\n\n\t\t\tif (this._overflow === \"paginated\" && this.isAutoScrolling === false) {\n\t\t\t\tconst isTheResultOfADragEnd = false\n\t\t\t\tthis._moveToClosestSnapPoint(isTheResultOfADragEnd)\n\t\t\t}\n\n\t\t\t/*\n\t\t\t// Other method: keep virtual point fixed\n\t\t\tif (this._virtualPoint) {\n\t\t\t\tconst { segmentIndex, x, y } = this._virtualPoint\n\t\t\t\tconst virtualSnapPoint = {\n\t\t\t\t\tsegmentIndex,\n\t\t\t\t\tviewport: \"center\",\n\t\t\t\t\tx: `${(x || 0) * 100}%`,\n\t\t\t\t\ty: `${(y || 0) * 100}%`,\n\t\t\t\t}\n\t\t\t\tconst progress = this._getProgressForSnapPoint(virtualSnapPoint)\n\t\t\t\tconsole.log(this._progress, progress, virtualSnapPoint, this._minX, this._maxX)\n\t\t\t\tthis.setProgress(progress, true)\n\t\t\t}*/\n\n\t\t\t// Update snap point-related speeds based on inScrollDirection\n\t\t\tif (this._inScrollDirection === \"ltr\" || this._inScrollDirection === \"rtl\") {\n\t\t\t\tthis._snapJumpSpeed = width * constants.snapJumpSpeedFactor\n\t\t\t\tthis._stickyMoveSpeed = width * constants.stickyMoveSpeedFactor\n\t\t\t} else if (this._inScrollDirection === \"ttb\" || this._inScrollDirection === \"btt\") {\n\t\t\t\tthis._snapJumpSpeed = height * constants.snapJumpSpeedFactor\n\t\t\t\tthis._stickyMoveSpeed = height * constants.stickyMoveSpeedFactor\n\t\t\t}\n\t\t}\n\t}\n\n\t_setPosition({ x, y }) { // Note that x and y correspond to the camera's center position\n\t\tthis._currentPosition = { x, y }\n\t\tthis._scene.setPosition({ x: -x, y: -y }) // this._scene is still a Container\n\n\t\tif (this._inScrollDirection === \"ltr\" || this._inScrollDirection === \"rtl\") {\n\t\t\tthis._signedPercent = x / (this._scene.size.width * this._zoomFactor)\n\t\t} else if (this._inScrollDirection === \"ttb\" || this._inScrollDirection === \"btt\") {\n\t\t\tthis._signedPercent = y / (this._scene.size.height * this._zoomFactor)\n\t\t}\n\t}\n\n\t_updateProgressForPosition(position = this._currentPosition,\n\t\tshouldStoreLastNonTemporaryProgress = false) {\n\t\tif (this._progress === null) {\n\t\t\treturn\n\t\t}\n\t\tif (shouldStoreLastNonTemporaryProgress === true\n\t\t\t&& this._lastNonTemporaryProgress === null) {\n\t\t\tthis._lastNonTemporaryProgress = this._progress\n\t\t}\n\t\tconst progress = this._getProgressForPosition(position)\n\t\tconst shouldUpdatePosition = false\n\t\tthis.setProgress(progress, shouldUpdatePosition)\n\t}\n\n\t_getProgressForPosition(position) {\n\t\tlet progress = null\n\t\tif (this._inScrollDirection === \"ltr\") {\n\t\t\tprogress = (position.x - this._minX - this._offsetInScaledReferential)\n\t\t\tprogress /= (this._maxX - this._minX - 2 * this._offsetInScaledReferential)\n\t\t} else if (this._inScrollDirection === \"rtl\") {\n\t\t\tprogress = (this._maxX - position.x - this._offsetInScaledReferential)\n\t\t\tprogress /= (this._maxX - this._minX - 2 * this._offsetInScaledReferential)\n\t\t} else if (this._inScrollDirection === \"ttb\") {\n\t\t\tprogress = (position.y - this._minY - this._offsetInScaledReferential)\n\t\t\tprogress /= (this._maxY - this._minY - 2 * this._offsetInScaledReferential)\n\t\t} else if (this._inScrollDirection === \"btt\") {\n\t\t\tprogress = (this._maxY - position.y - this._offsetInScaledReferential)\n\t\t\tprogress /= (this._maxY - this._minY - 2 * this._offsetInScaledReferential)\n\t\t}\n\t\tprogress = Math.min(Math.max(progress, 0), 1)\n\t\treturn progress\n\t}\n\n\t// Position the scene container to conform to the specified progress value\n\tsetProgress(p = null, shouldUpdatePosition = true) {\n\t\tthis._progress = p\n\t\tthis._virtualPoint = this._getVirtualPoint()\n\n\t\tthis._eventEmitter.emit(\"inpagescroll\", this._virtualPoint)\n\n\t\tif (shouldUpdatePosition === false) {\n\t\t\treturn\n\t\t}\n\t\tif (p === null) {\n\t\t\tthis._setPosition(this._startPosition)\n\t\t} else if (this._inScrollDirection === \"ltr\") {\n\t\t\tthis._setPosition({\n\t\t\t\tx: this._minX + p * this._progressVector.x * this._zoomFactor,\n\t\t\t\ty: Math.min(Math.max(this._currentPosition.y, this._minY), this._maxY),\n\t\t\t})\n\t\t} else if (this._inScrollDirection === \"rtl\") {\n\t\t\tthis._setPosition({\n\t\t\t\tx: this._maxX + p * this._progressVector.x * this._zoomFactor,\n\t\t\t\ty: Math.min(Math.max(this._currentPosition.y, this._minY), this._maxY),\n\t\t\t})\n\t\t} else if (this._inScrollDirection === \"ttb\") {\n\t\t\tthis._setPosition({\n\t\t\t\tx: Math.min(Math.max(this._currentPosition.x, this._minX), this._maxX),\n\t\t\t\ty: this._minY + p * this._progressVector.y * this._zoomFactor,\n\t\t\t})\n\t\t} else if (this._inScrollDirection === \"btt\") {\n\t\t\tthis._setPosition({\n\t\t\t\tx: Math.min(Math.max(this._currentPosition.x, this._minX), this._maxX),\n\t\t\t\ty: this._maxY + p * this._progressVector.y * this._zoomFactor,\n\t\t\t})\n\t\t}\n\t}\n\n\t_getVirtualPoint() {\n\t\tif (this._progress === null) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst { viewportRect } = this._player\n\t\tconst { getPercent, referenceDimension, coord } = this._virtualPointInfo\n\n\t\t/*const percent = (coord === \"x\")\n\t\t\t? (this._currentPosition.x - this._minX) / (this._maxX - this._minX)\n\t\t\t: (this._currentPosition.y - this._minY) / (this._maxY - this._minY)*/\n\t\tconst percent = getPercent()\n\n\t\tlet i = 0\n\t\tlet virtualPoint = null\n\t\tlet remainingDistance = viewportRect[referenceDimension] / 2\n\t\tremainingDistance += (coord === \"x\")\n\t\t\t? (percent * (this._maxX - this._minX))\n\t\t\t: (percent * (this._maxY - this._minY))\n\t\tremainingDistance /= this._zoomFactor\n\n\t\twhile (i < this._scene.layersArray.length && virtualPoint === null) {\n\t\t\tconst segmentLayer = this._scene.layersArray[i]\n\t\t\tconst { size } = segmentLayer\n\t\t\tconst referenceDistance = size[referenceDimension]\n\t\t\tremainingDistance -= referenceDistance\n\n\t\t\tif (remainingDistance <= constants.possiblePixelError && referenceDistance > 0) {\n\t\t\t\tlet percentInSegment = (remainingDistance + referenceDistance) / referenceDistance\n\t\t\t\tpercentInSegment = Math.min(Math.max(percentInSegment, 0), 1)\n\t\t\t\tconst { worksBackward } = this._virtualPointInfo\n\t\t\t\tvirtualPoint = {\n\t\t\t\t\tsegmentIndex: i,\n\t\t\t\t\thref: segmentLayer.getFirstHref(),\n\t\t\t\t\t[coord]: (worksBackward === true) ? (1 - percentInSegment) : percentInSegment,\n\t\t\t\t\tpercent,\n\t\t\t\t\t//direction: this._inScrollDirection,\n\t\t\t\t}\n\t\t\t}\n\t\t\ti += 1\n\t\t}\n\n\t\treturn virtualPoint\n\t}\n\n\tsetPercent(percent) {\n\t\tswitch (this._inScrollDirection) {\n\t\tcase \"ltr\":\n\t\t\tthis._setPosition({\n\t\t\t\tx: this._minX + percent * (this._maxX - this._minX),\n\t\t\t\ty: Math.min(Math.max(this._currentPosition.y, this._minY), this._maxY),\n\t\t\t})\n\t\t\tbreak\n\t\tcase \"rtl\":\n\t\t\tthis._setPosition({\n\t\t\t\t//x: this._minX + percent * (this._maxX - this._minX),\n\t\t\t\tx: this._maxX - percent * (this._maxX - this._minX),\n\t\t\t\ty: Math.min(Math.max(this._currentPosition.y, this._minY), this._maxY),\n\t\t\t})\n\t\t\tbreak\n\t\tcase \"ttb\":\n\t\t\tthis._setPosition({\n\t\t\t\tx: Math.min(Math.max(this._currentPosition.x, this._minX), this._maxX),\n\t\t\t\ty: this._minY + percent * (this._maxY - this._minY),\n\t\t\t})\n\t\t\tbreak\n\t\tcase \"btt\":\n\t\t\tthis._setPosition({\n\t\t\t\tx: Math.min(Math.max(this._currentPosition.x, this._minX), this._maxX),\n\t\t\t\t//y: this._minY + percent * (this._maxY - this._minY),\n\t\t\t\ty: this._maxY - percent * (this._maxY - this._minY),\n\t\t\t})\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\t\tthis._updateProgressForPosition()\n\t}\n\n\t_moveToClosestSnapPoint(isTheResultOfADragEnd = true) {\n\t\tlet nextProgress = this._lastNonTemporaryProgress\n\t\tlet previousProgress = this._lastNonTemporaryProgress\n\n\t\tlet allowsSameProgress = false\n\t\t// For a sticky drag...\n\t\tif (isTheResultOfADragEnd === true) {\n\t\t\tif (this._lastNonTemporaryProgress === null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this._progress >= this._lastNonTemporaryProgress) {\n\t\t\t\tnextProgress = this._getNextSnapPointProgress(allowsSameProgress,\n\t\t\t\t\tthis._lastNonTemporaryProgress)\n\t\t\t} else {\n\t\t\t\tpreviousProgress = this._getPreviousSnapPointProgress(allowsSameProgress,\n\t\t\t\t\tthis._lastNonTemporaryProgress)\n\t\t\t}\n\n\t\t// ...whereas after a resize or dezoom\n\t\t} else {\n\t\t\tallowsSameProgress = true\n\t\t\tnextProgress = this._getNextSnapPointProgress(allowsSameProgress)\n\t\t\tpreviousProgress = this._getPreviousSnapPointProgress(allowsSameProgress)\n\t\t}\n\n\t\tconst progressDifferenceToNext = nextProgress - this._progress\n\t\tconst progressDifferenceToPrevious = this._progress - previousProgress\n\t\tlet targetProgress = this._progress\n\t\tif (progressDifferenceToNext <= progressDifferenceToPrevious) {\n\t\t\ttargetProgress = nextProgress\n\t\t} else if (progressDifferenceToNext > progressDifferenceToPrevious) {\n\t\t\ttargetProgress = previousProgress\n\t\t}\n\n\t\tif (isTheResultOfADragEnd === true) {\n\t\t\tconst isUpdate = false\n\t\t\tthis._startSnapPointJump(targetProgress, isUpdate)\n\t\t} else { // Move instantly\n\t\t\tconst shouldUpdatePosition = true\n\t\t\tthis.setProgress(targetProgress, shouldUpdatePosition)\n\t\t}\n\t\tthis._lastNonTemporaryProgress = null\n\t}\n\n\t// Get the progress value of the next snap point in the list (1 if there is none)\n\t_getNextSnapPointProgress(allowsSameProgress = false, lastNonTemporaryProgress = null) {\n\t\tif (!this._snapPointsArray\n\t\t\t|| (this._overflow === \"scrolled\" && this._allowsPaginatedScroll === false)) {\n\t\t\treturn null\n\t\t}\n\n\t\t// If lastNonTemporaryProgress is defined, then a step forward\n\t\t// (via a discontinuous gesture or a sticky drag) is under way\n\t\tconst referenceProgress = (lastNonTemporaryProgress !== null)\n\t\t\t? lastNonTemporaryProgress\n\t\t\t: this._progress\n\t\tlet i = 0\n\t\twhile (i < this._snapPointsArray.length\n\t\t\t&& ((allowsSameProgress === true)\n\t\t\t\t? this._snapPointsArray[i].progress <= referenceProgress + this._possibleError\n\t\t\t\t: this._snapPointsArray[i].progress < referenceProgress - this._possibleError)) {\n\t\t\ti += 1\n\t\t}\n\n\t\tlet nextProgress = 1\n\t\tif (i < this._snapPointsArray.length) {\n\t\t\tnextProgress = this._snapPointsArray[i].progress\n\t\t}\n\n\t\t// Select the closest value between that one and the one corresponding to one pagination away\n\t\tif (this._paginationProgressStep) {\n\t\t\tlet nextPaginatedProgress = nextProgress\n\n\t\t\tif (lastNonTemporaryProgress !== null && this._isPaginationGridBased === false) {\n\t\t\t\tnextPaginatedProgress = lastNonTemporaryProgress + this._paginationProgressStep\n\t\t\t} else {\n\t\t\t\tnextPaginatedProgress = (allowsSameProgress === true)\n\t\t\t\t\t? Math.ceil((this._progress - this._possibleError) / this._paginationProgressStep)\n\t\t\t\t\t: Math.floor((this._progress + this._possibleError) / this._paginationProgressStep + 1)\n\t\t\t\tnextPaginatedProgress *= this._paginationProgressStep\n\t\t\t}\n\t\t\tnextPaginatedProgress = Math.min(Math.max(nextPaginatedProgress, 0), 1)\n\n\t\t\tnextProgress = Math.min(nextProgress, nextPaginatedProgress)\n\t\t}\n\n\t\treturn nextProgress\n\t}\n\n\t// Get the progress value of the previous snap point in the list (0 if there is none)\n\t_getPreviousSnapPointProgress(allowsSameProgress = false, lastNonTemporaryProgress = null) {\n\t\tif (!this._snapPointsArray\n\t\t\t|| (this._overflow === \"scrolled\" && this._allowsPaginatedScroll === false)) {\n\t\t\treturn null\n\t\t}\n\n\t\t// If lastNonTemporaryProgress is defined, then a step backward\n\t\t// (via a discontinuous gesture or a sticky drag) is under way\n\t\tconst referenceProgress = (lastNonTemporaryProgress !== null)\n\t\t\t? lastNonTemporaryProgress\n\t\t\t: this._progress\n\t\tlet i = this._snapPointsArray.length - 1\n\t\twhile (i >= 0\n\t\t\t&& ((allowsSameProgress === true)\n\t\t\t\t? this._snapPointsArray[i].progress >= referenceProgress - this._possibleError\n\t\t\t\t: this._snapPointsArray[i].progress > referenceProgress + this._possibleError)) {\n\t\t\ti -= 1\n\t\t}\n\n\t\tlet previousProgress = 0\n\t\tif (i >= 0) {\n\t\t\tpreviousProgress = this._snapPointsArray[i].progress\n\t\t}\n\n\t\t// Select the closest value between that one and the one corresponding to one pagination away\n\t\tif (this._paginationProgressStep) {\n\t\t\tlet previousPaginatedProgress = previousProgress\n\n\t\t\tif (lastNonTemporaryProgress !== null && this._isPaginationGridBased === false) {\n\t\t\t\tpreviousPaginatedProgress = lastNonTemporaryProgress - this._paginationProgressStep\n\t\t\t} else {\n\t\t\t\tpreviousPaginatedProgress = (allowsSameProgress === true)\n\t\t\t\t\t? Math.floor((this._progress + this._possibleError) / this._paginationProgressStep)\n\t\t\t\t\t: Math.ceil((this._progress - this._possibleError) / this._paginationProgressStep - 1)\n\t\t\t\tpreviousPaginatedProgress *= this._paginationProgressStep\n\t\t\t}\n\t\t\tpreviousPaginatedProgress = Math.min(Math.max(previousPaginatedProgress, 0), 1)\n\n\t\t\tpreviousProgress = Math.max(previousProgress, previousPaginatedProgress)\n\t\t}\n\t\treturn previousProgress\n\t}\n\n\tzoom(zoomData) {\n\t\t// Prevent camera from zooming if is undergoing changes (i.e. jumping between points)\n\t\tif (this.isAutoScrolling === true) {\n\t\t\treturn\n\t\t}\n\n\t\tconst {\n\t\t\tisContinuous,\n\t\t\ttouchPoint,\n\t\t\tdelta,\n\t\t\tmultiplier,\n\t\t} = zoomData\n\t\tif (!touchPoint) {\n\t\t\treturn\n\t\t}\n\t\tconst { viewportRect } = this._player\n\n\t\tlet zoomFactor = this._zoomFactor\n\t\tlet zoomFixedPoint = this._currentPosition\n\n\t\t// For a \"quick change\" (toggle between min = 1 and maxZoomFactor value)\n\t\tif (isContinuous === false) {\n\n\t\t\t// Compute zoom factor\n\t\t\tzoomFactor = (this._zoomFactor !== 1) ? 1 : constants.maxZoomFactor\n\n\t\t\t// Compute camera's fixed point\n\t\t\tzoomFixedPoint = this._computeFixedPoint(touchPoint, viewportRect)\n\n\t\t} else {\n\t\t\tif (!delta && !multiplier) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Compute zoom factor\n\t\t\tif (delta) {\n\t\t\t\tconst { height } = viewportRect\n\t\t\t\tconst zoomSensitivity = constants.zoomSensitivityConstant / height\n\t\t\t\tzoomFactor = Math.min(Math.max(this._zoomFactor - delta * zoomSensitivity, 1),\n\t\t\t\t\tconstants.maxZoomFactor)\n\t\t\t} else {\n\t\t\t\tzoomFactor = this._zoomFactor * multiplier\n\t\t\t}\n\n\t\t\t// Compute camera's fixed point (only update it if the touch point has changed)\n\t\t\tzoomFixedPoint = (touchPoint !== this._zoomTouchPoint)\n\t\t\t\t? this._computeFixedPoint(touchPoint, viewportRect)\n\t\t\t\t: this._currentPosition\n\t\t\tthis._zoomTouchPoint = touchPoint\n\t\t}\n\n\t\t// Compute zoomChange difference now, before setting the new zoomFactor\n\t\tconst zoomChange = zoomFactor - this._zoomFactor\n\n\t\tthis._setZoomFactorAndUpdateBounds(zoomFactor, zoomFixedPoint)\n\n\t\tthis._updatePositionAndProgressOnZoomChange(zoomChange, zoomFixedPoint)\n\t}\n\n\t_computeFixedPoint(point, viewportRect) {\n\t\tconst {\n\t\t\tx, y, width, height,\n\t\t} = viewportRect\n\n\t\t// Express the point's coordinates in the non-scaled (i.e. non-zoomed) referential\n\t\t// centered on the scene container's center (from which resources are positioned)\n\t\tconst topLeftCameraPointInSceneReferential = {\n\t\t\tx: this._currentPosition.x - width / 2,\n\t\t\ty: this._currentPosition.y - height / 2,\n\t\t} // Reminder: this._currentPosition is the opposite of the position of the scene's container\n\n\t\tconst fixedPoint = {\n\t\t\tx: (topLeftCameraPointInSceneReferential.x + point.x - x) / this._zoomFactor,\n\t\t\ty: (topLeftCameraPointInSceneReferential.y + point.y - y) / this._zoomFactor,\n\t\t}\n\n\t\treturn fixedPoint\n\t}\n\n\t_updatePositionAndProgressOnZoomChange(zoomChange, zoomFixedPoint) {\n\t\t// Change currentPosition so that zoomFixedPoint remains visually fixed\n\t\tthis._setPosition({\n\t\t\tx: Math.min(Math.max(this._currentPosition.x + zoomChange * zoomFixedPoint.x,\n\t\t\t\tthis._minX), this._maxX),\n\t\t\ty: Math.min(Math.max(this._currentPosition.y + zoomChange * zoomFixedPoint.y,\n\t\t\t\tthis._minY), this._maxY),\n\t\t})\n\n\t\t// Update progress to conform to that new position\n\t\tconst shouldStoreLastNonTemporaryProgress = (this._overflow === \"paginated\"\n\t\t\t&& this._isPaginationSticky === true)\n\t\tthis._updateProgressForPosition(this._currentPosition, shouldStoreLastNonTemporaryProgress)\n\n\t\t// If reverting to normal zoomFactor=1 value when overflow=paginated, snap to closest snap point\n\t\tif (this._zoomFactor === 1 && this._overflow === \"paginated\") {\n\t\t\tconst isTheResultOfADragEnd = false\n\t\t\tthis._moveToClosestSnapPoint(isTheResultOfADragEnd)\n\t\t}\n\t}\n\n\tmoveToNextSnapPoint() {\n\t\tif (this.isAutoScrolling === true) {\n\t\t\tconst { startProgress, targetProgress } = this._jumpData\n\t\t\tconst isJumpGoingForward = (targetProgress - startProgress >= 0)\n\t\t\tif (isJumpGoingForward === true) {\n\t\t\t\tthis._jumpData.shouldForceToEnd = true\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tconst allowsSameProgress = false\n\t\tconst targetProgress = this._getNextSnapPointProgress(allowsSameProgress, this._progress)\n\t\tif (targetProgress === null) {\n\t\t\treturn\n\t\t}\n\t\tconst isUpdate = false\n\t\tthis._startSnapPointJump(targetProgress, isUpdate)\n\t}\n\n\tmoveToPreviousSnapPoint() {\n\t\tif (this.isAutoScrolling === true) {\n\t\t\tconst { startProgress, targetProgress } = this._jumpData\n\t\t\tconst isJumpGoingForward = (targetProgress - startProgress >= 0)\n\t\t\tif (isJumpGoingForward === false) {\n\t\t\t\tthis._jumpData.shouldForceToEnd = true\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tconst allowsSameProgress = false\n\t\tconst targetProgress = this._getPreviousSnapPointProgress(allowsSameProgress, this._progress)\n\t\tif (targetProgress === null) {\n\t\t\treturn\n\t\t}\n\t\tconst isUpdate = false\n\t\tthis._startSnapPointJump(targetProgress, isUpdate)\n\t}\n\n\t_startSnapPointJump(targetProgress, isUpdate = false) {\n\t\tthis._jumpData.isAutoScrolling = true\n\t\tthis._jumpData.startDate = Date.now()\n\t\tthis._jumpData.duration = this._getJumpDuration(this._progress, targetProgress)\n\t\tthis._jumpData.startProgress = this._progress\n\t\tthis._jumpData.targetProgress = targetProgress\n\n\t\t// If a jump was not under way, start one\n\t\tif (isUpdate === false) {\n\t\t\trequestAnimationFrame(this._autoProgress.bind(this))\n\t\t}\n\t}\n\n\t_getJumpDuration(startProgress, targetProgress) {\n\t\tif (this._distanceToCover === 0) {\n\t\t\treturn 0\n\t\t}\n\t\tconst distance = Math.abs((targetProgress - startProgress) * this._distanceToCover)\n\t\tconst duration = (this._isPaginationSticky === true)\n\t\t\t? distance / this._stickyMoveSpeed\n\t\t\t: distance / this._snapJumpSpeed\n\t\treturn duration\n\t}\n\n\t_autoProgress() {\n\t\tif (this.isAutoScrolling === false) {\n\t\t\treturn\n\t\t}\n\n\t\tconst {\n\t\t\tstartDate,\n\t\t\tduration,\n\t\t\tstartProgress,\n\t\t\ttargetProgress,\n\t\t\tshouldForceToEnd,\n\t\t\tendCallback,\n\t\t} = this._jumpData\n\n\t\tconst percent = (Date.now() - startDate) / duration\n\n\t\tif (duration === 0 || percent >= 1 || shouldForceToEnd === true) {\n\t\t\tthis.setProgress(targetProgress)\n\t\t\tthis._reset()\n\t\t\tif (endCallback) {\n\t\t\t\tendCallback()\n\t\t\t}\n\t\t} else {\n\t\t\tlet forcedProgress = startProgress + (targetProgress - startProgress) * percent\n\t\t\tforcedProgress = Math.min(Math.max(forcedProgress, 0), 1)\n\t\t\tthis.setProgress(forcedProgress)\n\t\t\trequestAnimationFrame(this._autoProgress.bind(this))\n\t\t}\n\t}\n\n\tattemptStickyStep() {\n\t\tif (this._hasSpaceToMove === false || this.isZoomed === true) {\n\t\t\treturn false\n\t\t}\n\t\tconst isTheResultOfADragEnd = true\n\t\tthis._moveToClosestSnapPoint(isTheResultOfADragEnd)\n\t\treturn true\n\t}\n\n\t// Apply the amount of user scrolling to the scene container's position via the camera\n\t// by computing what new progress value the delta corresponds to\n\thandleScroll(scrollData, isWheelScroll) {\n\t\tif (this._hasSpaceToMove === false\n\t\t\t|| (this.isZoomed === false && (this._overflow === \"paginated\"\n\t\t\t\t&& (this._isPaginationSticky === false || isWheelScroll === true)))) {\n\t\t\treturn\n\t\t}\n\t\tconst { deltaX, deltaY } = scrollData\n\t\tthis._setPosition({\n\t\t\tx: Math.min(Math.max(this._currentPosition.x - deltaX, this._minX), this._maxX),\n\t\t\ty: Math.min(Math.max(this._currentPosition.y - deltaY, this._minY), this._maxY),\n\t\t})\n\t\tconst shouldStoreLastNonTemporaryProgress = (this._overflow === \"paginated\"\n\t\t\t&& this._isPaginationSticky === true)\n\t\tthis._updateProgressForPosition(this._currentPosition, shouldStoreLastNonTemporaryProgress)\n\t}\n\n\tmoveToSegmentIndex(segmentIndex, isGoingForward) {\n\t\t// If the scene is not larger than the viewport, just display it\n\t\tif (this._hasSpaceToMove === false) {\n\t\t\treturn\n\t\t}\n\t\t// If a segmentIndex is specified and progress is defined,\n\t\t// then get the progress value to which the segment corresponds\n\t\tif (segmentIndex !== null && this._progress !== null) {\n\t\t\tconst progress = this._getProgressForSegmentIndex(segmentIndex)\n\t\t\tthis.setProgress(progress || 0)\n\t\t// Otherwise just go to the start or end of the scene\n\t\t} else {\n\t\t\tthis.moveToStartOrEnd(isGoingForward)\n\t\t}\n\t}\n\n\t_getProgressForSegmentIndex(segmentIndex) {\n\t\t// The progress value is computed for the \"start\" viewport point in the case\n\t\t// the inScrollDirection is ltr or btt, and for the \"end\" point otherwise\n\t\tconst snapPoint = {\n\t\t\tsegmentIndex,\n\t\t\tviewport: \"start\",\n\t\t\tx: \"0%\",\n\t\t\ty: \"0%\",\n\t\t}\n\t\tconst progress = this._getProgressForSnapPoint(snapPoint)\n\t\treturn progress\n\t}\n\n\tmoveToStartOrEnd(isGoingForward = true) {\n\t\tif (this._distanceToCover === 0) {\n\t\t\treturn\n\t\t}\n\n\t\tthis._reset()\n\t\tthis.setProgress((isGoingForward === true) ? 0 : 1)\n\n\t\tif (isGoingForward === true) {\n\t\t\tthis._signedPercent = 0\n\t\t} else {\n\t\t\tthis._signedPercent = (this._inScrollDirection === \"rtl\"\n\t\t\t\t|| this._inScrollDirection === \"btt\")\n\t\t\t\t? -1\n\t\t\t\t: 1\n\t\t}\n\t}\n\n}","import Camera from \"./Camera\"\n\nexport default class OverflowHandler {\n\n\tget type() { return this._type }\n\n\t// Used in LayerPile\n\n\tget activeLayersArray() { return (this._layerPile) ? this._layerPile.layersArray : [] }\n\n\tget isAtStart() { return (this._camera) ? this._camera.isAtStart : true }\n\n\tget isAtEnd() { return (this._camera) ? this._camera.isAtEnd : true }\n\n\tget isUndergoingChanges() { return (this._camera.isAutoScrolling === true) }\n\n\tget inScrollDirection() { return this._inScrollDirection }\n\n\t// Constructor\n\n\tconstructor(layerPile, overflow, player) {\n\t\tthis._layerPile = layerPile\n\n\t\t// An overflowHandler necessarily has a camera\n\t\tthis._camera = new Camera(layerPile, overflow, player)\n\n\t\tthis._type = \"overflowHandler\"\n\n\t\tthis._inScrollDirection = null\n\t}\n\n\tsetInScrollDirection(inScrollDirection) {\n\t\tthis._inScrollDirection = inScrollDirection\n\t\tthis._camera.setInScrollDirection(inScrollDirection)\n\t\tthis.resize() // Will reposition segments\n\t}\n\n\t// Functions linked to segments\n\n\t// Add snap points to the last segment - since we are still in the process of adding segments\n\taddSnapPointsForLastSegment(snapPointsArray) {\n\t\tconst segmentsArray = this._layerPile.layersArray.map((layer) => (layer.content))\n\t\tif (segmentsArray.length === 0) {\n\t\t\treturn\n\t\t}\n\t\tconst lastSegmentIndex = segmentsArray.length - 1\n\t\tthis._camera.addSnapPoints(snapPointsArray, lastSegmentIndex)\n\t}\n\n\tgoToSegmentIndex(segmentIndex, isGoingForward) {\n\t\tthis._camera.moveToSegmentIndex(segmentIndex, isGoingForward)\n\t}\n\n\tsetupForEntry(isGoingForward) {\n\t\tif (this._camera.isZoomed === true) { // Should never hapen\n\t\t\treturn\n\t\t}\n\t\tthis._camera.moveToStartOrEnd(isGoingForward)\n\t}\n\n\t// Functions linked to LayerPile\n\n\tattemptToGoForward(shouldGoInstantly = false) { // Step forward\n\t\tif (this._camera.isZoomed === true) { // Block all interactions\n\t\t\treturn true\n\t\t}\n\t\tif (this._camera.isAtEnd === true) {\n\t\t\treturn false\n\t\t}\n\n\t\tthis._camera.moveToNextSnapPoint(shouldGoInstantly)\n\t\treturn true\n\t}\n\n\tattemptToGoBackward(shouldGoInstantly = false) { // Step backward\n\t\tif (this._camera.isZoomed === true) { // Block all interactions\n\t\t\treturn true\n\t\t}\n\t\tif (this._camera.isAtStart === true) {\n\t\t\treturn false\n\t\t}\n\t\tthis._camera.moveToPreviousSnapPoint(shouldGoInstantly)\n\t\treturn true\n\t}\n\n\t// Functions to deal with continuous gestures and zoom\n\n\tattemptStickyStep() {\n\t\treturn (this.isUndergoingChanges === false && this._camera.attemptStickyStep())\n\t}\n\n\thandleScroll(scrollData, isWheelScroll) {\n\t\tif (this.isUndergoingChanges === true) {\n\t\t\treturn\n\t\t}\n\t\tthis._camera.handleScroll(scrollData, isWheelScroll)\n\t}\n\n\tzoom(zoomData) {\n\t\tif (this.isUndergoingChanges === true) {\n\t\t\treturn\n\t\t}\n\t\tthis._camera.zoom(zoomData)\n\t}\n\n\tsetPercent(percent) {\n\t\tif (this.isUndergoingChanges === true) {\n\t\t\treturn\n\t\t}\n\t\tthis._camera.setPercent(percent)\n\t}\n\n\t// Functions to deal with inner changes (jumps) and resize\n\n\tresize() {\n\t\t// After all segments have been resized, (re)position them\n\t\tthis._positionSegments()\n\n\t\t// Update camera and possible snap points (note that zoomFactor will be forced to 1)\n\t\tthis._camera.setBoundsAndUpdateOnResize()\n\t}\n\n\t_positionSegments() {\n\t\tlet sumOfPreviousSegmentDimensions = 0\n\n\t\t// Translate all segment containers in the page by half their size plus the sum\n\t\t// of all previous segment dimensions (so that the first one is translated only\n\t\t// half its size and all others are then glued next to it, one after the other)\n\t\tthis._layerPile.layersArray.forEach((layer) => {\n\t\t\tconst segment = layer.content\n\t\t\tconst { size } = segment\n\t\t\tconst { width, height } = size\n\t\t\tif (!width || !height) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tswitch (this._inScrollDirection) {\n\t\t\tcase \"ltr\":\n\t\t\t\tsegment.setPositionInSegmentLine({ x: sumOfPreviousSegmentDimensions, y: 0 })\n\t\t\t\tsegment.setPosition({\n\t\t\t\t\tx: sumOfPreviousSegmentDimensions + width / 2,\n\t\t\t\t\ty: 0,\n\t\t\t\t})\n\t\t\t\tsumOfPreviousSegmentDimensions += width\n\t\t\t\tbreak\n\t\t\tcase \"rtl\":\n\t\t\t\tsegment.setPositionInSegmentLine({ x: -sumOfPreviousSegmentDimensions, y: 0 })\n\t\t\t\tsegment.setPosition({\n\t\t\t\t\tx: -sumOfPreviousSegmentDimensions - width / 2,\n\t\t\t\t\ty: 0,\n\t\t\t\t})\n\t\t\t\tsumOfPreviousSegmentDimensions += width\n\t\t\t\tbreak\n\t\t\tcase \"ttb\":\n\t\t\t\tsegment.setPositionInSegmentLine({ x: 0, y: sumOfPreviousSegmentDimensions })\n\t\t\t\tsegment.setPosition({\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: sumOfPreviousSegmentDimensions + height / 2,\n\t\t\t\t})\n\t\t\t\tsumOfPreviousSegmentDimensions += height\n\t\t\t\tbreak\n\t\t\tcase \"btt\":\n\t\t\t\tsegment.setPositionInSegmentLine({ x: 0, y: -sumOfPreviousSegmentDimensions })\n\t\t\t\tsegment.setPosition({\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: -sumOfPreviousSegmentDimensions - height / 2,\n\t\t\t\t})\n\t\t\t\tsumOfPreviousSegmentDimensions += height\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t\t}\n\t\t})\n\t}\n\n}","import { Container } from \"../Renderer\"\nimport StateHandler from \"./StateHandler\"\nimport OverflowHandler from \"./OverflowHandler\"\n\nexport default class LayerPile extends Container {\n\n\t// Used below\n\n\tget layersArray() { return this._layersArray }\n\n\tget activeLayersArray() {\n\t\treturn this._layersArray.filter((layer) => (layer.isActive === true))\n\t}\n\n\tget isAtStart() { return (this._handler) ? this._handler.isAtStart : true }\n\n\tget isAtEnd() { return (this._handler) ? this._handler.isAtEnd : true }\n\n\tget isUndergoingChanges() { return (this._handler) ? this._handler.isUndergoingChanges : false }\n\n\t// Note that isAtStart, isAtEnd and isUndergoingChanges are not recursive!\n\n\tget resourcePath() { // Return the resourcePath of the first slice if there is one\n\t\tif (this._layersArray.length === 0 || !this._layersArray[0]) {\n\t\t\treturn null\n\t\t}\n\t\treturn this._layersArray[0].resourcePath\n\t}\n\n\tget size() {\n\t\t// Size of a page (in a divina)\n\t\tif (this._handler && this._handler.type === \"overflowHandler\") {\n\t\t\tconst { inScrollDirection } = this._handler\n\t\t\tlet width = 0\n\t\t\tlet height = 0\n\t\t\t// The size is derived from the sizes of all segments\n\t\t\tthis._layersArray.forEach((layer) => {\n\t\t\t\tconst { size } = layer\n\t\t\t\tif (inScrollDirection === \"ltr\" || inScrollDirection === \"rtl\") {\n\t\t\t\t\twidth += size.width\n\t\t\t\t\tif (height === 0) {\n\t\t\t\t\t\theight = size.height\n\t\t\t\t\t}\n\t\t\t\t} else if (inScrollDirection === \"ttb\" || inScrollDirection === \"btt\") {\n\t\t\t\t\theight += size.height\n\t\t\t\t\tif (width === 0) {\n\t\t\t\t\t\twidth = size.width\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn { width, height }\n\t\t}\n\n\t\t// Size of a segment (in a divina)\n\n\t\t// If multiple layers (a Segment with multiple layers should have a parentSlice)\n\t\tif (this._parentSlice) {\n\t\t\treturn this._parentSlice.size\n\t\t}\n\n\t\t// If a unique layer\n\t\tif (this._layersArray.length === 1 && this._layersArray[0]) {\n\t\t\treturn this._layersArray[0].size\n\t\t}\n\n\t\t// All cases must have been covered already, but just in case\n\t\treturn { width: 0, height: 0 }\n\t}\n\n\t// Used in Layer\n\tget loadStatus() { return this._loadStatus }\n\n\tconstructor(name, parent = null, layersArray = [], isFirstSliceAParentSlice = false) {\n\t\tsuper(name, parent)\n\n\t\tthis._name = name\n\t\tthis._parent = parent\n\n\t\t// Build layers\n\t\tthis._layersArray = []\n\t\t// Note that the fallback slice is added too, although its texture will be hidden (in Slice.js)\n\t\tif (layersArray) {\n\t\t\tlayersArray.forEach((layer) => {\n\t\t\t\tthis._addLayer(layer)\n\t\t\t\tlayer.setParent(this)\n\t\t\t})\n\t\t}\n\n\t\tconst parentSliceLayer = (isFirstSliceAParentSlice === true && layersArray.length > 0)\n\t\t\t? layersArray[0]\n\t\t\t: null\n\t\tthis._parentSlice = (parentSliceLayer) ? parentSliceLayer.content : null\n\n\t\tthis._loadStatus = null\n\n\t\tthis._handler = null\n\t}\n\n\t_addLayer(layer, shouldAddLayerAtStart = false) {\n\t\tif (shouldAddLayerAtStart === true) { // For an empty segment\n\t\t\tthis._layersArray.unshift(layer)\n\t\t\tconst slice = layer.content\n\t\t\tthis.addChildAtIndex(slice, 0)\n\t\t} else {\n\t\t\tthis._layersArray.push(layer)\n\t\t}\n\t\t// Note that we do not add containerObjects right away,\n\t\t// since the PageNavigator's stateHandler will deal with that\n\t}\n\n\tgetDepthOfNewLayer() {\n\t\treturn this._depth\n\t}\n\n\t_addStateHandler(shouldStateLayersCoexistOutsideTransitions, player) {\n\t\tthis._handler = new StateHandler(this, shouldStateLayersCoexistOutsideTransitions,\n\t\t\tplayer)\n\t}\n\n\t_addOverflowHandler(overflow, player) {\n\t\tthis._handler = new OverflowHandler(this, overflow, player)\n\t}\n\n\tgetLayerAtIndex(layerIndex) {\n\t\tif (this._layersArray.length === 0\n\t\t\t|| layerIndex < 0 || layerIndex >= this._layersArray.length) {\n\t\t\treturn null\n\t\t}\n\t\tconst layer = this._layersArray[layerIndex]\n\t\treturn layer\n\t}\n\n\t// Following a discontinuous gesture\n\n\tattemptToGoForward(shouldCancelTransition = false, doIfIsUndergoingChanges = null) {\n\t\t// If a change is under way, end it\n\t\tif (this._handler && this.isUndergoingChanges === true) {\n\t\t\treturn (this._handler.attemptToGoForward(shouldCancelTransition,\n\t\t\t\tdoIfIsUndergoingChanges) === true)\n\t\t}\n\t\t// If not, try to go forward in the first layer (child)\n\t\tif (this.activeLayersArray.length > 0) {\n\t\t\tconst layer = this.activeLayersArray[0]\n\t\t\tif (layer.attemptToGoForward(shouldCancelTransition, doIfIsUndergoingChanges) === true) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\t// Otherwise try go forward via the handler if there is one\n\t\treturn (this._handler\n\t\t\t&& this._handler.attemptToGoForward(shouldCancelTransition, doIfIsUndergoingChanges) === true)\n\t}\n\n\tattemptToGoBackward(shouldCancelTransition = false, doIfIsUndergoingChanges = null) {\n\t\t// If a change is under way, end it then go backward\n\t\tif (this._handler && this.isUndergoingChanges === true) {\n\t\t\treturn (this._handler.attemptToGoBackward(shouldCancelTransition,\n\t\t\t\tdoIfIsUndergoingChanges) === true)\n\t\t}\n\t\t// If not, try to go backward in the last layer (child)\n\t\tif (this.activeLayersArray.length > 0) {\n\t\t\tconst layer = this.activeLayersArray[this.activeLayersArray.length - 1]\n\t\t\tif (layer.attemptToGoBackward(shouldCancelTransition, doIfIsUndergoingChanges) === true) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\t// Otherwise try go backward via the handler if there is one\n\t\treturn (this._handler\n\t\t\t&& this._handler.attemptToGoBackward(shouldCancelTransition,\n\t\t\t\tdoIfIsUndergoingChanges) === true)\n\t}\n\n\tresize() {\n\t\tthis.activeLayersArray.forEach((layer) => layer.resize())\n\t\tthis._resizeMyself()\n\t}\n\n\t_resizeMyself() {\n\t\tif (this._parentSlice) { // If this is a Segment with multiple layers\n\t\t\tthis._parentSlice.resize()\n\t\t\tthis._layersArray.forEach((layer) => { layer.setScale(this._parentSlice.scale) })\n\t\t}\n\t\tif (this._handler && this._handler.resize) {\n\t\t\tthis._handler.resize()\n\t\t}\n\t}\n\n\tsetupForEntry(isGoingForward = true) {\n\t\tthis._layersArray.forEach((layer) => {\n\t\t\t// If the LayerPile is a Segment with a unique Slice (or eventually a basic LayerPile)\n\t\t\tif (!this._handler) {\n\t\t\t\tconst slice = layer.content\n\t\t\t\tthis.addChild(slice)\n\t\t\t}\n\t\t\tlayer.setupForEntry(isGoingForward)\n\t\t})\n\n\t\tthis._resizeMyself()\n\n\t\t// If the LayerPile has a StateHandler (i.e. it is a PageNavigator or a multi-layered\n\t\t// Segment with layer transitions) or an OverflowHandler (i.e. it is a Page)\n\t\tif (this._handler) {\n\t\t\tthis._handler.setupForEntry(isGoingForward)\n\t\t}\n\t}\n\n\tfinalizeEntry() {\n\t\tthis.activeLayersArray.forEach((layer) => { layer.finalizeEntry() })\n\t}\n\n\tfinalizeExit() {\n\t\tthis.activeLayersArray.forEach((layer) => { layer.finalizeExit() })\n\n\t\t// If a Segment with multiple states\n\t\tif (this._handler && this._handler.type === \"stateHandler\") {\n\t\t\tthis._handler.finalizeExit()\n\t\t}\n\t}\n\n\tgetPathsToLoad() {\n\t\tconst fullPathsArray = []\n\t\tthis._layersArray.forEach((layer) => {\n\t\t\tconst pathsArray = layer.getPathsToLoad()\n\t\t\tfullPathsArray.push(...pathsArray)\n\t\t})\n\t\treturn fullPathsArray\n\t}\n\n\tdestroyTexturesIfPossible() {\n\t\tthis._layersArray.forEach((layer) => { layer.destroyTexturesIfPossible() })\n\t}\n\n\tgetFirstHref() {\n\t\tif (this._layersArray.length === 0) {\n\t\t\treturn null\n\t\t}\n\t\treturn this._layersArray[0].getFirstHref()\n\t}\n\n\t// Slice functions\n\n\tresizePage() {\n\t\tif (!this._parent || !this._parent.resizePage) {\n\t\t\treturn\n\t\t}\n\t\tthis._parent.resizePage()\n\t}\n\n\tupdateLoadStatus() {\n\t\tconst oldLoadStatus = this._loadStatus\n\n\t\tlet nbOfLoadedLayers = 0\n\t\tlet hasAtLeastOneLoadingLayer = false\n\t\tlet hasAtLeastOnePartiallyLoadedLayer = false\n\n\t\tthis._layersArray.forEach((layer) => {\n\t\t\tif (hasAtLeastOneLoadingLayer === false\n\t\t\t\t&& hasAtLeastOnePartiallyLoadedLayer === false) {\n\t\t\t\tconst { loadStatus } = layer\n\t\t\t\tswitch (loadStatus) {\n\t\t\t\tcase 2:\n\t\t\t\t\tnbOfLoadedLayers += 1\n\t\t\t\t\tbreak\n\t\t\t\tcase 1:\n\t\t\t\t\thasAtLeastOneLoadingLayer = true\n\t\t\t\t\tbreak\n\t\t\t\tcase -1:\n\t\t\t\t\thasAtLeastOnePartiallyLoadedLayer = true\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tif (hasAtLeastOnePartiallyLoadedLayer === true\n\t\t\t|| (nbOfLoadedLayers > 0 && nbOfLoadedLayers < this._layersArray.length)) {\n\t\t\tthis._loadStatus = -1\n\t\t} else if (hasAtLeastOneLoadingLayer === true) {\n\t\t\tthis._loadStatus = 1\n\t\t} else if (nbOfLoadedLayers > 0 && nbOfLoadedLayers === this._layersArray.length) {\n\t\t\tthis._loadStatus = 2\n\t\t} else {\n\t\t\tthis._loadStatus = 0\n\t\t}\n\n\t\tif (this._loadStatus !== oldLoadStatus && this._parent\n\t\t\t&& this._parent.updateLoadStatus) {\n\t\t\tthis._parent.updateLoadStatus()\n\t\t}\n\t}\n\n}","import LayerPile from \"./LayerPile\"\n\nimport * as constants from \"../constants\"\n\nexport default class PageNavigator extends LayerPile {\n\n\t// Used in StateHandler\n\tget doOnStateChangeStart() { return this.updateLoadTasks }\n\n\t// Used in Player and ResourceManager\n\tget type() { return this._type }\n\n\t// Used in ResourceManager (and below)\n\tget pageIndex() {\n\t\tconst pageIndex = (this._handler && this._handler.type === \"stateHandler\")\n\t\t\t? this._handler.stateIndex\n\t\t\t: 0\n\t\treturn pageIndex\n\t}\n\n\t// Used in InteractionManager\n\tget currentPage() { return this._currentPage }\n\n\t// Used in Slice\n\tget metadata() { return this._metadata }\n\n\t// Used below\n\tget nbOfPages() { return (this._pagesArray) ? this._pagesArray.length : 0 }\n\n\tconstructor(type, metadata, pageLayersArray, player) {\n\t\tconst name = `${type}PageNav`\n\t\tconst parent = null\n\t\tsuper(name, parent, pageLayersArray)\n\n\t\tthis._type = type\n\t\tthis._metadata = metadata\n\n\t\tconst {\n\t\t\teventEmitter, interactionManager, resourceManager, options,\n\t\t} = player\n\t\tthis._eventEmitter = eventEmitter\n\t\tthis._interactionManager = interactionManager\n\t\tthis._resourceManager = resourceManager\n\n\t\tconst { allowsDestroy } = options\n\t\tthis._allowsDestroy = (allowsDestroy === true || allowsDestroy === false)\n\t\t\t? allowsDestroy\n\t\t\t: constants.defaultAllowsDestroy\n\n\t\tconst shouldStateLayersCoexistOutsideTransitions = false\n\t\tthis._addStateHandler(shouldStateLayersCoexistOutsideTransitions, player)\n\n\t\tthis._pagesArray = (this._layersArray)\n\t\t\t? this._layersArray.map(({ content }) => (content))\n\t\t\t: []\n\n\t\tthis._currentPage = null // The current page will be the page pointed to by pageIndex\n\n\t\tthis._targetSegmentIndex = null\n\n\t\t// Pages for which textures are required to be loaded\n\t\tthis._loadingPageRange = {\n\t\t\tstartIndex: null,\n\t\t\tendIndex: null,\n\t\t}\n\n\t\tthis._tags = null\n\t}\n\n\tsetLoadingProperties(maxNbOfPagesBefore, maxNbOfPagesAfter) {\n\t\tthis._maxNbOfPagesBefore = maxNbOfPagesBefore\n\t\tthis._maxNbOfPagesAfter = maxNbOfPagesAfter\n\t}\n\n\t// Used above and in Player\n\tupdateLoadTasks(targetPageIndex, oldPathsSet = null) {\n\t\tconst actualTargetPageIndex = (targetPageIndex === null) ? this.pageIndex : targetPageIndex\n\n\t\t// Update priorities for load tasks (if some tasks are still pending)\n\t\tthis._resourceManager.updateForTargetPageIndex(actualTargetPageIndex)\n\n\t\t// Determine which pages have been added or removed\n\n\t\tif (oldPathsSet) { // On a reading mode or tag change\n\t\t\tthis._loadingPageRange = {\n\t\t\t\tstartIndex: null,\n\t\t\t\tendIndex: null,\n\t\t\t}\n\t\t}\n\n\t\tconst { startIndex, endIndex } = this._getPageIndexLoadingRange(actualTargetPageIndex)\n\t\t// If start and end indices have not changed, do nothing\n\t\tif (startIndex !== this._loadingPageRange.startIndex\n\t\t\t|| endIndex !== this._loadingPageRange.endIndex) {\n\n\t\t\tconst pagesToAddIndices = []\n\t\t\tconst pagesToRemoveIndices = []\n\t\t\t// Determine added page indices\n\t\t\tfor (let i = startIndex; i <= endIndex; i += 1) {\n\t\t\t\tif (this._loadingPageRange.startIndex === null\n\t\t\t\t\t|| (i < this._loadingPageRange.startIndex || i > this._loadingPageRange.endIndex)\n\t\t\t\t\t|| this._layersArray[i].loadStatus === 1\n\t\t\t\t\t|| this._layersArray[i].loadStatus === 0\n\t\t\t\t\t|| this._pagesArray[i].loadStatus === -1) {\n\t\t\t\t\tpagesToAddIndices.push(i)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Determine removed page indices\n\t\t\tif (this._loadingPageRange.startIndex !== null) {\n\t\t\t\tfor (let i = this._loadingPageRange.startIndex;\n\t\t\t\t\ti <= this._loadingPageRange.endIndex; i += 1) {\n\t\t\t\t\tif (i < startIndex || i > endIndex) {\n\t\t\t\t\t\tpagesToRemoveIndices.push(i)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Store active page range for next time (i.e. next page change)\n\t\t\tthis._loadingPageRange = { startIndex, endIndex }\n\n\t\t\t// Load relevant textures\n\t\t\tconst newPathsSet = new Set() // Used to list all *individual* paths\n\t\t\tpagesToAddIndices.forEach((pageIndex) => {\n\t\t\t\tconst layer = this._getLayerWithIndex(pageIndex)\n\t\t\t\tif (layer) {\n\t\t\t\t\tconst pathsArrayAndSliceIdsArray = layer.getPathsToLoad()\n\t\t\t\t\tpathsArrayAndSliceIdsArray.forEach(({ pathsArray, sliceId }) => {\n\t\t\t\t\t\t// Reminder: at this stage each pathsArray actually = { pathsArray, sliceId }\n\t\t\t\t\t\tthis._resourceManager.loadTexturesAtPaths(pathsArray, sliceId, pageIndex)\n\t\t\t\t\t\tpathsArray.forEach((path) => {\n\t\t\t\t\t\t\tnewPathsSet.add(path)\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// Destroy relevant textures\n\t\t\tif (this._allowsDestroy === true) {\n\n\t\t\t\tif (oldPathsSet) {\n\t\t\t\t\tconst destroyablePathsArray = []\n\t\t\t\t\t// All those in old that are not in new!\n\t\t\t\t\toldPathsSet.forEach((oldPath) => {\n\t\t\t\t\t\tlet canBeDestroyed = true\n\t\t\t\t\t\tnewPathsSet.forEach((newPath) => {\n\t\t\t\t\t\t\tif (newPath === oldPath) {\n\t\t\t\t\t\t\t\tcanBeDestroyed = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (canBeDestroyed === true) {\n\t\t\t\t\t\t\tdestroyablePathsArray.push(oldPath)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tdestroyablePathsArray.forEach((path) => {\n\t\t\t\t\t\tthis._resourceManager.forceDestroyTexturesForPath(path)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tpagesToRemoveIndices.forEach((pageIndex) => {\n\t\t\t\t\tconst layer = this._getLayerWithIndex(pageIndex)\n\t\t\t\t\tif (layer) {\n\t\t\t\t\t\tlayer.destroyTexturesIfPossible()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t_getPageIndexLoadingRange(pageIndex) {\n\t\tlet startIndex = 0\n\t\tlet endIndex = this.nbOfPages - 1\n\t\tif (this._maxNbOfPagesAfter) {\n\t\t\tstartIndex = Math.max(0, pageIndex - this._maxNbOfPagesBefore)\n\t\t\tendIndex = Math.min(this.nbOfPages - 1, pageIndex + this._maxNbOfPagesAfter)\n\t\t}\n\t\treturn { startIndex, endIndex }\n\t}\n\n\t// On a successful page change (post-transition), when this.pageIndex (= stateIndex) has changed\n\tfinalizeEntry() {\n\t\tif (this.pageIndex < this._pagesArray.length) {\n\t\t\tthis._currentPage = this._pagesArray[this.pageIndex]\n\t\t} else {\n\t\t\treturn\n\t\t}\n\t\tif (!this._currentPage) {\n\t\t\treturn\n\t\t}\n\n\t\t// If _doOnStateChangeEnd has been called by a goTo, go to the relevant segment directly\n\t\tif (this._targetSegmentIndex !== null) {\n\t\t\tthis._currentPage.goToSegmentIndex(this._targetSegmentIndex)\n\t\t\tthis._targetSegmentIndex = null\n\t\t}\n\n\t\t// If required, do something with the page change information (e.g. signal it via an event)\n\t\tconst customData = { pageIndex: this.pageIndex, nbOfPages: this.nbOfPages }\n\t\tthis._eventEmitter.emit(\"pagechange\", customData)\n\t}\n\n\t// Used in StateHandler\n\tgetDepthOfNewLayer(oldPageIndex, isGoingForward) {\n\t\tif (oldPageIndex < 0 || oldPageIndex >= this._layersArray.length\n\t\t\t|| !this._layersArray[oldPageIndex]) {\n\t\t\treturn 1\n\t\t}\n\t\tconst { exitForward, exitBackward } = this._layersArray[oldPageIndex]\n\t\tif ((isGoingForward === true && exitForward && exitForward.type === \"slide-out\")\n\t\t\t|| (isGoingForward === false && exitBackward\n\t\t\t\t&& (exitBackward.type === \"fade-out\" || exitBackward.type === \"slide-out\"))) {\n\t\t\treturn 0\n\t\t}\n\t\treturn 1\n\t}\n\n\tattemptStickyStep() {\n\t\tif (!this._currentPage || this.isUndergoingChanges === true\n\t\t\t|| this._metadata.overflow !== \"paginated\") {\n\t\t\treturn false\n\t\t}\n\t\treturn this._currentPage.attemptStickyStep()\n\t}\n\n\thandleScroll(scrollData, isWheelScroll) {\n\t\t// If the page is being changed, do nothing\n\t\tif (!this._currentPage || this.isUndergoingChanges === true) {\n\t\t\treturn\n\t\t}\n\t\tthis._currentPage.handleScroll(scrollData, isWheelScroll)\n\t}\n\n\tzoom(zoomData) {\n\t\tif (!this._currentPage || this.isUndergoingChanges === true) {\n\t\t\treturn\n\t\t}\n\t\tthis._currentPage.zoom(zoomData)\n\t}\n\n\t// Player functions\n\n\tgoToPageWithIndex(pageIndex, segmentIndex = null, shouldCancelTransition = false) {\n\t\tconst isGoingForward = true\n\t\tthis._targetSegmentIndex = segmentIndex\n\n\t\tif (!this._handler || this._handler.type !== \"stateHandler\") {\n\t\t\treturn\n\t\t}\n\n\t\tconst callback = () => {\n\t\t\t// If changing pages\n\t\t\tif (pageIndex !== this.pageIndex) {\n\t\t\t\tthis._handler.goToState(pageIndex, isGoingForward, shouldCancelTransition)\n\t\t\t\t// And then the finalizeEntry above will ensure we go to segmentIndex directly\n\n\t\t\t// Or if staying on the same page but changing segments\n\t\t\t} else if (this._targetSegmentIndex !== null) {\n\t\t\t\tthis._currentPage.goToSegmentIndex(this._targetSegmentIndex, isGoingForward)\n\t\t\t\tthis._targetSegmentIndex = null\n\t\t\t}\n\t\t}\n\n\t\t// If forcing a page change (e.g. via ToC while a transition is running)\n\t\tif (this._handler.isUndergoingChanges === true) {\n\t\t\tthis._handler.forceChangesToEnd(callback)\n\t\t} else {\n\t\t\tcallback()\n\t\t}\n\t}\n\n\t_getLayerWithIndex(pageIndex) {\n\t\tif (this._layersArray.length > 0 && pageIndex >= 0 && pageIndex < this.nbOfPages) {\n\t\t\tconst layer = this._layersArray[pageIndex]\n\t\t\treturn layer\n\t\t}\n\t\treturn null\n\t}\n\n\tfinalizeExit() { // But no need for a setupForEntry\n\t\tsuper.finalizeExit()\n\t\tthis._currentPage = null\n\t\tthis.removeFromParent()\n\t}\n\n\tsetPercentInCurrentPage(percent) {\n\t\tif (!this._currentPage) {\n\t\t\treturn\n\t\t}\n\t\tthis._currentPage.setPercent(percent)\n\t}\n\n\tgetFirstHrefInCurrentPage() {\n\t\tif (!this._currentPage) {\n\t\t\treturn null\n\t\t}\n\t\treturn this._currentPage.getFirstHref()\n\t}\n\n\tdestroy() {\n\t\tthis.removeFromParent()\n\t}\n\n}","import PageNavigator from \"./PageNavigator\"\n\nexport default class Slideshow extends PageNavigator {\n\n\tconstructor(type, metadata, pageLayersArray, player) {\n\t\tsuper(type, metadata, pageLayersArray, player)\n\n\t\tconst { direction } = metadata || {}\n\t\tthis._direction = direction\n\n\t\tthis._pagesArray.forEach((page) => {\n\t\t\tpage.setDirection(direction)\n\t\t})\n\t}\n\n\tgo(way, shouldGoToTheMax) {\n\t\tif (!this._direction\n\t\t\t|| ((way === \"right\" || way === \"left\")\n\t\t\t\t&& (this._direction === \"ttb\" || this._direction === \"btt\"))\n\t\t\t|| ((way === \"down\" || way === \"up\")\n\t\t\t\t&& (this._direction === \"rtl\" || this._direction === \"ltr\"))) {\n\t\t\treturn\n\t\t}\n\n\t\tif (shouldGoToTheMax === true) {\n\t\t\tlet targetPageIndex = null\n\t\t\tif (way === \"right\" || way === \"down\") {\n\t\t\t\ttargetPageIndex = (this._direction === \"ltr\"\n\t\t\t\t\t|| this._direction === \"ttb\")\n\t\t\t\t\t? this._pagesArray.length - 1\n\t\t\t\t\t: 0\n\t\t\t} else if (way === \"left\" || way === \"up\") {\n\t\t\t\ttargetPageIndex = (this._direction === \"rtl\"\n\t\t\t\t\t|| this._direction === \"btt\")\n\t\t\t\t\t? this._pagesArray.length - 1\n\t\t\t\t\t: 0\n\t\t\t}\n\t\t\tif (targetPageIndex !== null) {\n\t\t\t\tconst shouldCancelTransition = true\n\t\t\t\tif (targetPageIndex !== this.pageIndex) {\n\t\t\t\t\tthis.goToPageWithIndex(targetPageIndex, null, shouldCancelTransition)\n\t\t\t\t} else {\n\t\t\t\t\tthis.goToPageWithIndex(targetPageIndex, 0, shouldCancelTransition)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tswitch (way) {\n\t\t\tcase \"right\":\n\t\t\t\tthis._interactionManager.goRight()\n\t\t\t\tbreak\n\t\t\tcase \"left\":\n\t\t\t\tthis._interactionManager.goLeft()\n\t\t\t\tbreak\n\t\t\tcase \"down\":\n\t\t\t\tthis._interactionManager.goDown()\n\t\t\t\tbreak\n\t\t\tcase \"up\":\n\t\t\t\tthis._interactionManager.goUp()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tgoForward() {\n\t\tconst doIfIsUndergoingChanges = () => { this.attemptToGoForward(true) }\n\t\tthis.attemptToGoForward(false, doIfIsUndergoingChanges)\n\t}\n\n\tgoBackward() {\n\t\tconst doIfIsUndergoingChanges = () => { this.attemptToGoBackward(true) }\n\t\tthis.attemptToGoBackward(false, doIfIsUndergoingChanges)\n\t}\n\n}","export default class Layer {\n\n\tget type() { return this._type }\n\n\tget content() { return this._content } // A Container in any case\n\n\tget entryForward() { return this._entryForward }\n\n\tget exitForward() { return this._exitForward }\n\n\tget entryBackward() { return this._entryBackward }\n\n\tget exitBackward() { return this._exitBackward }\n\n\tget loadStatus() { return (this._content) ? this._content.loadStatus : 0 }\n\n\tget size() {\n\t\tif (!this._content) {\n\t\t\treturn { width: 0, height: 0 }\n\t\t}\n\t\treturn this._content.size\n\t}\n\n\tget resourcePath() {\n\t\tif (this._type !== \"slice\" || !this._content) {\n\t\t\treturn null\n\t\t}\n\t\treturn this._content.resourcePath\n\t}\n\n\t// Used in LayerPile: only a layer can be active, and it basically means that its content\n\t// could be displayed on screen right now (i.e. it is an on-screen page, an on-screen page's\n\t// on-screen or out-of-screen segment, or such a segment's slice - however slice transitions,\n\t// which never form the content of a layer, will not be concerned by this property)\n\tget isActive() { return this._isActive }\n\n\tconstructor(type, content) {\n\t\tthis._type = type\n\t\tthis._content = content\n\n\t\tthis._isActive = false\n\t}\n\n\tsetParent(parent) {\n\t\tif (!this._content) {\n\t\t\treturn\n\t\t}\n\t\tthis._content.setParent(parent)\n\t}\n\n\tsetEntryForward(entryForward) {\n\t\tthis._entryForward = entryForward\n\t}\n\n\tsetExitForward(exitForward) {\n\t\tthis._exitForward = exitForward\n\t}\n\n\tsetEntryBackward(entryBackward) {\n\t\tthis._entryBackward = entryBackward\n\t}\n\n\tsetExitBackward(exitBackward) {\n\t\tthis._exitBackward = exitBackward\n\t}\n\n\tattemptToGoForward(shouldCancelTransition, doIfIsUndergoingChanges) {\n\t\tif (!this._content || !this._content.attemptToGoForward) {\n\t\t\treturn false\n\t\t}\n\t\treturn this._content.attemptToGoForward(shouldCancelTransition, doIfIsUndergoingChanges)\n\t}\n\n\tattemptToGoBackward(shouldCancelTransition, doIfIsUndergoingChanges) {\n\t\tif (!this._content || !this._content.attemptToGoBackward) {\n\t\t\treturn false\n\t\t}\n\t\treturn this._content.attemptToGoBackward(shouldCancelTransition, doIfIsUndergoingChanges)\n\t}\n\n\tsetScale(scale) {\n\t\tif (!this._content) {\n\t\t\treturn\n\t\t}\n\t\tthis._content.setScale(scale)\n\t}\n\n\t// Recursive functions (used in LayerPile)\n\n\tresize() {\n\t\tif (!this._content) {\n\t\t\treturn\n\t\t}\n\t\tthis._content.resize()\n\t}\n\n\tsetupForEntry(isGoingForward) {\n\t\tthis._isActive = true\n\t\tif (!this._content) {\n\t\t\treturn\n\t\t}\n\t\tthis._content.setupForEntry(isGoingForward)\n\t}\n\n\tfinalizeEntry() {\n\t\tif (!this._content) {\n\t\t\treturn\n\t\t}\n\t\tthis._content.finalizeEntry()\n\t}\n\n\tfinalizeExit() {\n\t\tthis._isActive = false\n\t\tif (!this._content) {\n\t\t\treturn\n\t\t}\n\t\tthis._content.finalizeExit()\n\t}\n\n\t// Used in PageNavigator\n\tgetPathsToLoad() {\n\t\tif (!this._content) {\n\t\t\treturn []\n\t\t}\n\n\t\tconst fullPathsArray = []\n\n\t\tlet pathsArray = this._content.getPathsToLoad()\n\t\tfullPathsArray.push(...pathsArray)\n\n\t\tif (this._entryForward) {\n\t\t\tpathsArray = Layer.getPathsForLayerTransition(this._entryForward)\n\t\t\tfullPathsArray.push(...pathsArray)\n\t\t}\n\t\tif (this._exitForward) {\n\t\t\tpathsArray = Layer.getPathsForLayerTransition(this._exitForward)\n\t\t\tfullPathsArray.push(...pathsArray)\n\t\t}\n\t\tif (this._entryBackward) {\n\t\t\tpathsArray = Layer.getPathsForLayerTransition(this._entryBackward)\n\t\t\tfullPathsArray.push(...pathsArray)\n\t\t}\n\t\tif (this._exitBackward) {\n\t\t\tpathsArray = Layer.getPathsForLayerTransition(this._exitBackward)\n\t\t\tfullPathsArray.push(...pathsArray)\n\t\t}\n\n\t\treturn fullPathsArray\n\t}\n\n\tstatic getPathsForLayerTransition(layerTransition) {\n\t\tconst { slice } = layerTransition\n\t\tif (!slice) {\n\t\t\treturn []\n\t\t}\n\t\treturn slice.getPathsToLoad()\n\t}\n\n\tdestroyTexturesIfPossible() {\n\t\tif (!this._content) {\n\t\t\treturn\n\t\t}\n\t\tthis._content.destroyTexturesIfPossible()\n\n\t\tif (this._entryForward) {\n\t\t\tLayer.destroyTexturesIfPossibleForHalfTransition(this._entryForward)\n\t\t}\n\t\tif (this._exitForward) {\n\t\t\tLayer.destroyTexturesIfPossibleForHalfTransition(this._exitForward)\n\t\t}\n\t\tif (this._entryBackward) {\n\t\t\tLayer.destroyTexturesIfPossibleForHalfTransition(this._entryBackward)\n\t\t}\n\t\tif (this._exitBackward) {\n\t\t\tLayer.destroyTexturesIfPossibleForHalfTransition(this._exitBackward)\n\t\t}\n\t}\n\n\tstatic destroyTexturesIfPossibleForHalfTransition(halfTransition) {\n\t\tconst { slice } = halfTransition\n\t\tif (!slice) {\n\t\t\treturn\n\t\t}\n\t\tslice.destroyTexturesIfPossible()\n\t}\n\n\tgetFirstHref() {\n\t\tif (!this._content || !this._content.getFirstHref) {\n\t\t\treturn null\n\t\t}\n\t\treturn this._content.getFirstHref()\n\t}\n\n}","import LayerPile from \"./LayerPile\"\nimport Layer from \"./Layer\"\n\nexport default class Page extends LayerPile {\n\n\tget isAtStart() {\n\t\treturn (this._handler && this._handler.type === \"overflowHandler\"\n\t\t\t&& this._handler.isAtStart === true)\n\t}\n\n\tget isAtEnd() {\n\t\treturn (this._handler && this._handler.type === \"overflowHandler\"\n\t\t\t&& this._handler.isAtEnd === true)\n\t}\n\n\t// Used in Segment\n\tget pageIndex() { return this._pageIndex }\n\n\t// Used in StoryLoader and below\n\tget segmentsArray() { return this._layersArray.map(({ content }) => (content)) }\n\n\t// Used in InteractionManager\n\n\tget hitZoneToPrevious() { return this._hitZoneToPrevious }\n\n\tget hitZoneToNext() { return this._hitZoneToNext }\n\n\tget inScrollDirection() { return this._inScrollDirection }\n\n\tconstructor(pageIndex, overflow, player) {\n\t\tconst name = `page${pageIndex}`\n\t\tsuper(name)\n\n\t\tthis._pageIndex = pageIndex\n\n\t\tthis._hitZoneToPrevious = null\n\t\tthis._hitZoneToNext = null\n\t\tthis._inScrollDirection = null\n\n\t\tthis._addOverflowHandler(overflow, player)\n\n\t\tconst { options } = player\n\t\tconst { doOnPageLoadStatusUpdate } = options\n\t\tif (doOnPageLoadStatusUpdate) {\n\t\t\tthis._doOnPageLoadStatusUpdate = doOnPageLoadStatusUpdate\n\t\t}\n\t}\n\n\t// Used in Slideshow\n\tsetDirection(direction) {\n\t\tthis._setInScrollDirection(direction)\n\n\t\tswitch (direction) {\n\t\tcase \"ltr\":\n\t\t\tthis._setHitZoneToPrevious(\"left\")\n\t\t\tthis._setHitZoneToNext(\"right\")\n\t\t\tbreak\n\t\tcase \"rtl\":\n\t\t\tthis._setHitZoneToPrevious(\"right\")\n\t\t\tthis._setHitZoneToNext(\"left\")\n\t\t\tbreak\n\t\tcase \"ttb\":\n\t\t\tthis._setHitZoneToPrevious(\"top\")\n\t\t\tthis._setHitZoneToNext(\"bottom\")\n\t\t\tbreak\n\t\tcase \"btt\":\n\t\t\tthis._setHitZoneToPrevious(\"bottom\")\n\t\t\tthis._setHitZoneToNext(\"top\")\n\t\t\t// Ditto\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\t}\n\n\t_setHitZoneToPrevious(quadrant) {\n\t\tthis._hitZoneToPrevious = quadrant\n\t}\n\n\t_setHitZoneToNext(quadrant) {\n\t\tthis._hitZoneToNext = quadrant\n\t}\n\n\t_setInScrollDirection(inScrollDirection) {\n\t\tthis._inScrollDirection = inScrollDirection\n\t\tif (!this._handler || this._handler.type !== \"overflowHandler\") {\n\t\t\treturn\n\t\t}\n\t\tthis._handler.setInScrollDirection(inScrollDirection)\n\t}\n\n\taddSegment(segment, shouldAddSegmentAtStart = false) {\n\t\t// Add the segment to the layer pile\n\t\tconst segmentLayer = new Layer(\"segment\", segment)\n\t\tthis._addLayer(segmentLayer, shouldAddSegmentAtStart)\n\t}\n\n\taddSnapPointsForLastSegment(snapPointsArray) {\n\t\tif (!this._handler || this._handler.type !== \"overflowHandler\") {\n\t\t\treturn\n\t\t}\n\t\tthis._handler.addSnapPointsForLastSegment(snapPointsArray)\n\t}\n\n\t// Used in PageNavigator\n\tgoToSegmentIndex(segmentIndex, isGoingForward = true) {\n\t\tif (!this._handler || this._handler.type !== \"overflowHandler\") {\n\t\t\treturn\n\t\t}\n\t\tthis._handler.goToSegmentIndex(segmentIndex, isGoingForward)\n\t}\n\n\tattemptStickyStep() {\n\t\tif (!this._handler || this._handler.type !== \"overflowHandler\") {\n\t\t\treturn false\n\t\t}\n\t\treturn this._handler.attemptStickyStep()\n\t}\n\n\thandleScroll(scrollData, isWheelScroll) {\n\t\tif (!this._handler || this._handler.type !== \"overflowHandler\") {\n\t\t\treturn\n\t\t}\n\t\tthis._handler.handleScroll(scrollData, isWheelScroll)\n\t}\n\n\tzoom(zoomData) {\n\t\tif (!this._handler || this._handler.type !== \"overflowHandler\") {\n\t\t\treturn\n\t\t}\n\t\tthis._handler.zoom(zoomData)\n\t}\n\n\tsetPercent(percent) {\n\t\tif (!this._handler || this._handler.type !== \"overflowHandler\") {\n\t\t\treturn\n\t\t}\n\t\tthis._handler.setPercent(percent)\n\t}\n\n\tresizePage() {\n\t\tconst storyNavigator = this._parent\n\t\tif (storyNavigator) {\n\t\t\tstoryNavigator.layersArray.forEach((layer) => {\n\t\t\t\tconst { content, isActive } = layer // content is a Page\n\t\t\t\tif (content === this && isActive === true) {\n\t\t\t\t\tthis.resize()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tupdateLoadStatus() {\n\t\tconst oldStatus = this._loadStatus\n\n\t\tsuper.updateLoadStatus()\n\n\t\tif (this._loadStatus !== oldStatus && this._doOnPageLoadStatusUpdate) {\n\t\t\tthis._doOnPageLoadStatusUpdate(this._pageIndex, this._loadStatus)\n\t\t}\n\t}\n\n}","import LayerPile from \"./LayerPile\"\n\nexport default class Segment extends LayerPile {\n\n\t// Used in StoryBuilder\n\tget segmentIndex() { return this._segmentIndex }\n\n\tconstructor(segmentIndex, page, sliceLayersArray, player) {\n\t\tconst { pageIndex } = page\n\t\tconst name = `page${pageIndex}Segment${segmentIndex}`\n\t\tconst isFirstSliceAParentSlice = (sliceLayersArray.length > 1)\n\t\tsuper(name, page, sliceLayersArray, isFirstSliceAParentSlice)\n\n\t\tthis._pageIndex = pageIndex\n\t\tthis._segmentIndex = segmentIndex\n\n\t\t// Add a StateHandler to the Segment if it has multiple layers\n\t\tif (sliceLayersArray.length > 1) {\n\t\t\tconst shouldStateLayersCoexistOutsideTransitions = true\n\t\t\tthis._addStateHandler(shouldStateLayersCoexistOutsideTransitions, player)\n\t\t}\n\n\t\t// It is useful to do the following right away for (double page) empty slices,\n\t\t// so that their loadStatus will always be = 2\n\t\tthis.updateLoadStatus()\n\t}\n\n}","import { Slice } from \"../Slice\"\nimport Slideshow from \"./Slideshow\"\nimport Page from \"./Page\"\nimport Segment from \"./Segment\"\nimport Layer from \"./Layer\"\n\nexport default class StoryBuilder {\n\n\tstatic createPageNavigatorsInfo(storyData) {\n\t\tconst { metadata, mainLinkObjectsArray, guidedLinkObjectsArray } = storyData || {}\n\t\tconst {\n\t\t\treadingProgression, continuous, fit, overflow, clipped, spread,\n\t\t} = metadata || {}\n\n\t\tconst cleanMetadata = {\n\t\t\tdirection: readingProgression,\n\t\t\tfit,\n\t\t\toverflow,\n\t\t\tclipped,\n\t\t}\n\n\t\tconst pageNavigatorsInfo = { metadata: cleanMetadata }\n\n\t\tif (continuous === true) {\n\t\t\tpageNavigatorsInfo.scroll = StoryBuilder.createPageNavigatorInfo(\"scroll\",\n\t\t\t\tmainLinkObjectsArray)\n\t\t} else {\n\t\t\tpageNavigatorsInfo.single = StoryBuilder.createPageNavigatorInfo(\"single\",\n\t\t\t\tmainLinkObjectsArray)\n\n\t\t\t// If the double page reading mode is a possibility\n\t\t\tif (spread !== \"none\") {\n\t\t\t\tconst direction = (readingProgression === \"rtl\") ? \"rtl\" : \"ltr\"\n\t\t\t\tpageNavigatorsInfo.double = StoryBuilder.createPageNavigatorInfo(\"double\",\n\t\t\t\t\tmainLinkObjectsArray, direction)\n\t\t\t}\n\t\t}\n\n\t\tif (guidedLinkObjectsArray) {\n\t\t\tpageNavigatorsInfo.guided = StoryBuilder.createPageNavigatorInfo(\"guided\",\n\t\t\t\tguidedLinkObjectsArray)\n\t\t}\n\n\t\treturn pageNavigatorsInfo\n\t}\n\n\tstatic createPageNavigatorInfo(type, linkObjectsArray, direction) {\n\t\tlet metadata = {}\n\t\tlet grouping = null\n\n\t\tswitch (type) {\n\t\tcase \"single\":\n\t\t\tgrouping = \"single\"\n\t\t\tbreak\n\t\tcase \"double\": // Transitions will be discarded\n\t\t\tmetadata = {\n\t\t\t\tdirection, // Force direction to be ltr or rtl\n\t\t\t\tforcedFit: \"contain\",\n\t\t\t\tforcedTransitionType: \"cut\",\n\t\t\t}\n\t\t\tgrouping = \"double\"\n\t\t\tbreak\n\t\tcase \"scroll\":\n\t\t\tgrouping = \"stitched\"\n\t\t\tbreak\n\t\tcase \"guided\":\n\t\t\tmetadata = {\n\t\t\t\tforcedFit: \"contain\",\n\t\t\t}\n\t\t\tgrouping = \"single\"\n\t\t\tbreak\n\t\tdefault:\n\t\t\tbreak\n\t\t}\n\n\t\tconst pageNavInfo = { metadata }\n\n\t\tlet pageIndex = -1\n\t\tlet segmentIndex = 0\n\n\t\tif (grouping === \"single\" || grouping === \"stitched\") {\n\t\t\tconst transitionsArray = []\n\n\t\t\tlinkObjectsArray.forEach((linkObject) => {\n\t\t\t\tconst {\n\t\t\t\t\tslice, transitionForward, transitionBackward, children,\n\t\t\t\t} = linkObject\n\n\t\t\t\t// It is time to create a new page...\n\t\t\t\tif (pageIndex === -1 // ... if we are at the beginning of the story\n\t\t\t\t\t|| grouping === \"single\" // ... or with each new resource in a discontinuous story\n\t\t\t\t\t|| transitionForward) { // ... or with each new \"chapter\" in a \"chaptered webtoon\"\n\t\t\t\t\tpageIndex += 1\n\t\t\t\t\tsegmentIndex = 0\n\t\t\t\t}\n\n\t\t\t\tslice.setPageNavInfo(type, { pageIndex, segmentIndex })\n\n\t\t\t\t// Only consider transitions on the first segment of a page\n\t\t\t\tif (transitionForward && segmentIndex === 0) {\n\t\t\t\t\ttransitionsArray.push({\n\t\t\t\t\t\ttransition: transitionForward, isForward: true, pageIndex,\n\t\t\t\t\t})\n\t\t\t\t\tif (transitionForward.slice) {\n\t\t\t\t\t\ttransitionForward.slice.setPageNavInfo(type, { pageIndex, segmentIndex })\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (transitionBackward && segmentIndex === 0) {\n\t\t\t\t\ttransitionsArray.push({\n\t\t\t\t\t\ttransition: transitionBackward, isForward: false, pageIndex,\n\t\t\t\t\t})\n\t\t\t\t\tif (transitionBackward.slice) {\n\t\t\t\t\t\ttransitionBackward.slice.setPageNavInfo(type, { pageIndex, segmentIndex })\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// For layer slices\n\t\t\t\tif (children) {\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tif (child.linkObject && child.linkObject.slice) {\n\t\t\t\t\t\t\tconst childSlice = child.linkObject.slice\n\t\t\t\t\t\t\tchildSlice.setPageNavInfo(type, { pageIndex, segmentIndex })\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tsegmentIndex += 1\n\t\t\t})\n\n\t\t\tpageNavInfo.transitionsArray = transitionsArray\n\n\t\t} else if (grouping === \"double\") { // Transitions are discarded in double page reading mode\n\n\t\t\tlet lastPageSide = null\n\t\t\tlet isLonely = false\n\n\t\t\tlinkObjectsArray.forEach((linkObject, i) => {\n\t\t\t\tconst { slice } = linkObject\n\t\t\t\tconst { resource } = slice || {}\n\t\t\t\tconst { pageSide } = resource || {}\n\n\t\t\t\tif (!lastPageSide\n\t\t\t\t\t|| lastPageSide === \"center\" || lastPageSide === null\n\t\t\t\t\t|| pageSide === \"center\" || pageSide === null\n\t\t\t\t\t|| (direction === \"ltr\" && (lastPageSide === \"right\" || pageSide === \"left\"))\n\t\t\t\t\t|| (direction === \"rtl\" && (lastPageSide === \"left\" || pageSide === \"right\"))) {\n\n\t\t\t\t\tpageIndex += 1\n\n\t\t\t\t\tconst nextLinkObject = (i < linkObjectsArray.length - 1)\n\t\t\t\t\t\t? linkObjectsArray[i + 1]\n\t\t\t\t\t\t: null\n\t\t\t\t\tconst nextPageSide = (nextLinkObject && nextLinkObject.slice\n\t\t\t\t\t\t&& nextLinkObject.slice.resource)\n\t\t\t\t\t\t? nextLinkObject.slice.resource.pageSide\n\t\t\t\t\t\t: null\n\t\t\t\t\tif (direction === \"ltr\") {\n\t\t\t\t\t\tsegmentIndex = (pageSide === \"right\") ? 1 : 0\n\t\t\t\t\t\tif (pageSide === \"left\" && nextPageSide !== \"right\") {\n\t\t\t\t\t\t\tisLonely = true\n\t\t\t\t\t\t}\n\t\t\t\t\t} else { // direction === \"rtl\"\n\t\t\t\t\t\tsegmentIndex = (pageSide === \"left\") ? 1 : 0\n\t\t\t\t\t\tif (pageSide === \"right\" && nextPageSide !== \"left\") {\n\t\t\t\t\t\t\tisLonely = true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tslice.setPageNavInfo(type, { pageIndex, segmentIndex, isLonely })\n\n\t\t\t\tisLonely = false\n\t\t\t\tlastPageSide = pageSide\n\n\t\t\t\tsegmentIndex += 1\n\t\t\t})\n\t\t}\n\n\t\t// Do not forget to add the last created page to the list\n\t\tpageIndex += 1\n\n\t\tpageNavInfo.nbOfPages = pageIndex\n\n\t\treturn pageNavInfo\n\t}\n\n\tstatic createPageNavigator(type, linkObjectsArray, pageNavigatorInfo, defaultMetadata, player) {\n\t\tconst { metadata, transitionsArray } = pageNavigatorInfo\n\t\tconst fullMetadata = {\n\t\t\t...defaultMetadata,\n\t\t\t...metadata,\n\t\t}\n\t\tconst pageLayersArray = StoryBuilder.buildPageLayersArray(type, fullMetadata, linkObjectsArray,\n\t\t\ttransitionsArray, player)\n\t\tconst pageNavigator = new Slideshow(type, fullMetadata, pageLayersArray, player)\n\t\treturn pageNavigator\n\t}\n\n\tstatic buildPageLayersArray(type, metadata, linkObjectsArray, transitionsArray, player) {\n\t\tconst { overflow } = metadata\n\n\t\tconst pagesArray = []\n\n\t\tlet currentPageIndex = -1\n\t\tlet currentSegmentIndex = 0\n\t\tlet currentPage = null\n\n\t\tlinkObjectsArray.forEach((linkObject) => {\n\t\t\tconst { slice, children, snapPoints } = linkObject\n\t\t\tconst { pageNavInfo } = slice\n\t\t\tconst info = pageNavInfo[type]\n\t\t\tif (info) {\n\t\t\t\tconst { pageIndex, segmentIndex, isLonely } = info\n\n\t\t\t\tif (pageIndex > currentPageIndex) {\n\t\t\t\t\tif (currentPage) {\n\t\t\t\t\t\tpagesArray.push(currentPage)\n\t\t\t\t\t}\n\t\t\t\t\tcurrentPageIndex += 1\n\t\t\t\t\tcurrentSegmentIndex = 0\n\n\t\t\t\t\tcurrentPage = new Page(currentPageIndex, overflow, player)\n\t\t\t\t}\n\n\t\t\t\tconst sliceLayersArray = [new Layer(\"slice\", slice)]\n\n\t\t\t\tif (children) {\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tentryForward, exitForward, entryBackward, exitBackward,\n\t\t\t\t\t\t} = child\n\t\t\t\t\t\tconst layerSlice = child.linkObject.slice\n\t\t\t\t\t\tconst sliceLayer = new Layer(\"slice\", layerSlice)\n\t\t\t\t\t\tif (entryForward) {\n\t\t\t\t\t\t\tsliceLayer.setEntryForward(entryForward)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (exitForward) {\n\t\t\t\t\t\t\tsliceLayer.setExitForward(exitForward)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (entryBackward) {\n\t\t\t\t\t\t\tsliceLayer.setEntryBackward(entryBackward)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (exitBackward) {\n\t\t\t\t\t\t\tsliceLayer.setExitBackward(exitBackward)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsliceLayersArray.push(sliceLayer)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t// Now create a segment for the slice and add it to the page\n\t\t\t\t// (do note that, for a divina, a page can only have several segments if continuous=true)\n\n\t\t\t\tlet segment = null\n\n\t\t\t\tif (type === \"double\" && currentSegmentIndex === 0 && segmentIndex === 1) {\n\t\t\t\t\tcurrentSegmentIndex = 1\n\t\t\t\t\tsegment = new Segment(currentSegmentIndex, currentPage, sliceLayersArray, player)\n\n\t\t\t\t\tconst neighbor = segment\n\t\t\t\t\tStoryBuilder.addEmptySegmentToPage(currentPage, 0, neighbor, player)\n\n\t\t\t\t} else {\n\t\t\t\t\tsegment = new Segment(currentSegmentIndex, currentPage, sliceLayersArray, player)\n\t\t\t\t}\n\n\t\t\t\tcurrentPage.addSegment(segment)\n\n\t\t\t\t// If the linkObject has snapPoints, add them to the page too\n\t\t\t\tif (snapPoints) {\n\t\t\t\t\tcurrentPage.addSnapPointsForLastSegment(snapPoints)\n\t\t\t\t}\n\n\t\t\t\tif (type === \"double\" && segmentIndex === 0 && isLonely === true) {\n\t\t\t\t\tconst neighbor = segment\n\t\t\t\t\tStoryBuilder.addEmptySegmentToPage(currentPage, 1, neighbor, player)\n\t\t\t\t}\n\n\t\t\t\tcurrentSegmentIndex += 1\n\t\t\t}\n\t\t})\n\n\t\t// Do not forget to add the last created page to the list\n\t\tif (currentPage) {\n\t\t\tpagesArray.push(currentPage)\n\t\t}\n\n\t\t// Create pageLayerDataArray\n\t\tconst pageLayersArray = pagesArray.map((page) => (new Layer(\"page\", page)))\n\n\t\t// Now assign entry and exit (half-)transitions\n\t\t// If forcedTransitionType === \"cut\", don't add a transition at all!\n\t\tconst { forcedTransitionType } = metadata\n\n\t\tif (!forcedTransitionType && transitionsArray) {\n\t\t\ttransitionsArray.forEach(({ transition, isForward, pageIndex }) => {\n\t\t\t\tconst { slice } = transition\n\t\t\t\tif (slice) {\n\t\t\t\t\t// Set the second page in the readingOrder as parent for a transition slice\n\t\t\t\t\tslice.setParent(pagesArray[pageIndex])\n\t\t\t\t}\n\n\t\t\t\tconst { entry, exit } = transition.getEntryAndExitTransitions(isForward)\n\n\t\t\t\tif (isForward === true) {\n\t\t\t\t\tif (pageIndex > 0) {\n\t\t\t\t\t\tpageLayersArray[pageIndex - 1].setExitForward(exit)\n\t\t\t\t\t}\n\t\t\t\t\tpageLayersArray[pageIndex].setEntryForward(entry)\n\n\t\t\t\t} else {\n\t\t\t\t\tif (pageIndex > 0) {\n\t\t\t\t\t\tpageLayersArray[pageIndex - 1].setEntryBackward(entry)\n\t\t\t\t\t}\n\t\t\t\t\tpageLayersArray[pageIndex].setExitBackward(exit)\n\t\t\t\t}\n\n\t\t\t})\n\t\t}\n\n\t\treturn pageLayersArray\n\t}\n\n\tstatic addEmptySegmentToPage(page, segmentIndex, neighbor, player) {\n\t\tconst emptySlice = Slice.createEmptySlice(player, neighbor)\n\t\tconst emptySliceLayersArray = [new Layer(\"slice\", emptySlice)]\n\t\tconst emptySegment = new Segment(segmentIndex, page, emptySliceLayersArray, player)\n\t\tconst shouldAddSegmentAtStart = (segmentIndex === 0)\n\t\tpage.addSegment(emptySegment, shouldAddSegmentAtStart)\n\t}\n\n}","export default class EventEmitter {\n\n\tconstructor() {\n\t\tthis._callbacks = {}\n\t}\n\n\ton(event, callback) {\n\t\tif (!this._callbacks[event]) {\n\t\t\tthis._callbacks[event] = []\n\t\t}\n\t\tthis._callbacks[event].push(callback)\n\t}\n\n\temit(event, data) {\n\t\tconst callbacksArray = this._callbacks[event]\n\t\tif (callbacksArray) {\n\t\t\tcallbacksArray.forEach((callback) => {\n\t\t\t\tcallback(data)\n\t\t\t})\n\t\t}\n\t}\n\n}","import { Renderer } from \"./Renderer\"\n\nimport TextManager from \"./TextManager\"\nimport InteractionManager from \"./InteractionManager\"\nimport DivinaParser from \"./DivinaParser\"\nimport ResourceManager from \"./ResourceManager\"\nimport StoryBuilder from \"./StoryBuilder\"\nimport EventEmitter from \"./EventEmitter\"\n\nimport * as Utils from \"./utils\"\nimport * as constants from \"./constants\"\n\nexport default class Player {\n\n\t// Size of the rootElement (used in Camera)\n\tget rootSize() { return this._renderer.size }\n\n\t// Size of the effective viewport (i.e. once viewport ratio constraint is applied),\n\t// used in TextureElement, InteractionManager, StateHandler, PageNavigator and Cameram\n\tget viewportRect() { return this._viewportRect }\n\n\t// Used in PageNavigator and Camera\n\tget options() { return this._options }\n\n\t// Used in TextureElement\n\tget readingMode() { return (this._pageNavigator) ? this._pageNavigator.type : null }\n\n\t// Used in PageNavigator\n\tget interactionManager() { return this._interactionManager }\n\n\t// Used in TextureElement and PageNavigator\n\tget resourceManager() { return this._resourceManager }\n\n\t// Used in ResourceManager\n\tget slices() { return this._slices }\n\n\t// Used in Slice\n\n\tget pageNavigator() { return this._pageNavigator }\n\n\tget tags() { return this._tags }\n\n\t// Used in outside app and PageNavigator\n\tget eventEmitter() { return this._eventEmitter }\n\n\t// The rootElement is the parent DOM element (HTML page's body)\n\tconstructor(rootElement) {\n\t\tthis._rootElement = rootElement\n\n\t\t// Create the player's renderer\n\t\tthis._renderer = new Renderer(rootElement, constants.defaultBackgroundColor)\n\n\t\t// Create the container that will hold the loading message\n\t\tthis._textManager = new TextManager(this._renderer.mainContainer)\n\n\t\t// Create an object that will pass important variables around\n\t\tconst defaultRect = {\n\t\t\tx: 0, y: 0, width: 0, height: 0,\n\t\t}\n\t\tthis._rootSize = defaultRect\n\t\tthis._viewportRect = defaultRect\n\t\tthis._tags = {}\n\t\tthis._options = {}\n\n\t\t// Size those managers\n\t\tconst shouldResizeImmediately = true\n\t\tthis.resize(shouldResizeImmediately)\n\n\t\t// Create the interaction manager (which will deal with user gestures)\n\t\tthis._interactionManager = new InteractionManager(this, rootElement)\n\n\t\t// Initialize story data\n\t\tthis._minRatio = null\n\t\tthis._maxRatio = null\n\t\tthis._spread = constants.defaultSpread\n\n\t\tthis._startHref = null\n\t\tthis._haveFirstResourcesLoaded = false\n\t\tthis._resourceManager = null\n\n\t\tthis._maxNbOfPagesBefore = 0\n\t\tthis._maxNbOfPagesAfter = 0\n\t\tthis._priorityFactor = 1\n\n\t\tthis._storyData = {}\n\t\tthis._slices = {}\n\t\tthis._pageNavigatorsInfo = {}\n\t\tthis._pageNavigator = null\n\t\tthis._wasDoublePageReadingModeAvailable = false\n\n\t\tthis._eventEmitter = new EventEmitter()\n\n\t\t// Add resize event listener\n\t\tthis.resize = this.resize.bind(this)\n\t\twindow.addEventListener(\"resize\", this.resize)\n\t}\n\n\t// The resize function is called on creating the Player\n\t// and whenever a \"resize\" event is detected (e.g. after an orientation change)\n\tresize(shouldResizeImmediately = false) {\n\t\tconst callback = () => {\n\t\t\tconst { width, height } = this._rootElement.getBoundingClientRect()\n\n\t\t\t// Size viewport based on _rootElement's size (and applicable viewport ratio constraints)\n\t\t\tthis._sizeViewport(width, height)\n\n\t\t\t// Now resize the current pageNavigator if there is one\n\t\t\tif (this._pageNavigator) {\n\t\t\t\tthis._pageNavigator.resize()\n\t\t\t}\n\t\t\t// Note that the list of available story navigators can also be updated\n\t\t}\n\t\tif (shouldResizeImmediately === true) {\n\t\t\tcallback()\n\t\t} else {\n\t\t\trequestAnimationFrame(callback)\n\t\t}\n\t}\n\n\t// This function sizes the viewport based on _rootElement's size and viewport ratio constraints\n\t_sizeViewport(width, height) {\n\t\tlet viewportWidth = width\n\t\tlet viewportHeight = height\n\n\t\t// Get the (target) ratio value that conforms to the viewport ratio constraints\n\t\tconst applicableRatio = this._getApplicableRatio(width, height)\n\t\tconst rootElementRatio = width / height\n\n\t\tconst topLeftPoint = { x: 0, y: 0 }\n\n\t\tif (rootElementRatio >= applicableRatio) {\n\t\t\t// The _rootElement's height becomes the viewport's and constrains the viewport's width\n\t\t\tviewportWidth = height * applicableRatio\n\t\t\ttopLeftPoint.x = (width - viewportWidth) / 2\n\n\t\t} else if (rootElementRatio < applicableRatio) {\n\t\t\t// The _rootElement's width becomes the viewport's and constrains the viewport's height\n\t\t\tviewportHeight = width / applicableRatio\n\t\t\ttopLeftPoint.y = (height - viewportHeight) / 2\n\t\t}\n\n\t\t// Resize the renderer\n\t\tthis._renderer.setSize(width, height)\n\n\t\t// Store the viewport's rectangle\n\t\tthis._viewportRect = {\n\t\t\tx: topLeftPoint.x,\n\t\t\ty: topLeftPoint.y,\n\t\t\twidth: viewportWidth,\n\t\t\theight: viewportHeight,\n\t\t}\n\n\t\t// Update the renderer's display (note that zoomFactor is forced to 1 on a resize)\n\t\tthis.updateDisplayForZoomFactor(1, this._viewportRect)\n\n\t\t// Update availability of double reading mode if necessary\n\t\tif (this._pageNavigator\n\t\t\t&& this._isDoublePageReadingModeAvailable() !== this._wasDoublePageReadingModeAvailable) {\n\n\t\t\tconst customData = { readingMode: this._pageNavigator.type }\n\t\t\tconst actualReadingModes = { ...this._pageNavigatorsInfo }\n\t\t\tdelete actualReadingModes.metadata\n\t\t\tif (this._wasDoublePageReadingModeAvailable === true) {\n\t\t\t\tdelete actualReadingModes.double\n\t\t\t\tthis.setReadingMode(\"single\")\n\t\t\t}\n\t\t\tcustomData.readingModesArray = Object.keys(actualReadingModes)\n\t\t\tthis._eventEmitter.emit(\"readingmodesupdate\", customData)\n\n\t\t\tthis._wasDoublePageReadingModeAvailable = !this._wasDoublePageReadingModeAvailable\n\t\t}\n\t}\n\n\t// _getApplicableRatio computes the (target) ratio that conforms to viewportRatio constraints\n\t// Reminder: viewportRatio = { min, max } where both min and max are written as \"width:height\"\n\t_getApplicableRatio(width, height) {\n\t\t// The default ratio is that of the rootElement's dimensions\n\t\tconst currentRatio = width / height\n\n\t\t// If there are no viewportRatio constraints, then keep the rootElement's ratio\n\t\tif (!this._minRatio && !this._maxRatio) {\n\t\t\treturn currentRatio\n\t\t}\n\n\t\t// If there's only a min, or only a max, then apply the constraint\n\t\tif (this._minRatio && !this._maxRatio) {\n\t\t\treturn Math.max(this._minRatio, currentRatio)\n\t\t}\n\t\tif (this._maxRatio && !this._minRatio) {\n\t\t\treturn Math.min(this._maxRatio, currentRatio)\n\t\t}\n\n\t\t// If both a min and max are defined, then apply both constraints\n\t\treturn Math.min(Math.max(currentRatio, this._minRatio), this._maxRatio)\n\t}\n\n\t// Used above (after a resize) and in Camera (when changing zoom)\n\tupdateDisplayForZoomFactor(zoomFactor, viewportRect = this._viewportRect) {\n\t\tthis._renderer.updateDisplay(viewportRect, zoomFactor)\n\t}\n\n\t_isDoublePageReadingModeAvailable() {\n\t\treturn (this._spread === \"both\"\n\t\t\t|| (this._spread === \"landscape\" && this._viewportRect.width >= this._viewportRect.height))\n\t}\n\n\t// For loading the divina data from a folder path\n\topenDivinaFromPath(folderPath, href = null, options = null) {\n\t\tconst textureSource = { folderPath }\n\t\tconst parseAndHandleDivinaData = (divinaParser) => { divinaParser.loadFromPath(folderPath) }\n\t\tthis._parseDivina(href, textureSource, options, parseAndHandleDivinaData)\n\t}\n\n\t// For loading the divina data from a json and its file URLs (via folder path)\n\topenDivinaFromJsonAndPath(json, folderPath, href = null, options = null) {\n\t\tconst textureSource = { folderPath }\n\t\tconst parseAndHandleDivinaData = (divinaParser) => { divinaParser.loadFromJsonAndPath(json) }\n\t\tthis._parseDivina(href, textureSource, options, parseAndHandleDivinaData)\n\t}\n\n\t// For loading the divina data from data = { json, base64DataByHref }\n\topenDivinaFromData(data, href = null, options = null) {\n\t\tconst textureSource = { data }\n\t\tconst parseAndHandleDivinaData = (divinaParser) => { divinaParser.loadFromData(data) }\n\t\tthis._parseDivina(href, textureSource, options, parseAndHandleDivinaData)\n\t}\n\n\t_parseDivina(href = null, textureSource, options, parseAndHandleDivinaData) {\n\t\tthis._startHref = href\n\t\tthis._options = options || {}\n\n\t\t// Set loading properties, which shall be common to all page navigators\n\t\tthis._setLoadingProperties()\n\n\t\t// Set allowed story interactions based on options\n\t\tthis._interactionManager.setStoryInteractions(options)\n\n\t\t// Create resource manager (now that options and possibly data exist)\n\t\tthis._createResourceManager(textureSource)\n\n\t\tconst doWithParsedDivinaData = (parsedDivinaData) => {\n\t\t\tconst { metadata } = parsedDivinaData || {}\n\t\t\tconst { readingProgression, orientation } = metadata || {}\n\t\t\tconst customData = { readingProgression, orientation }\n\t\t\tthis._eventEmitter.emit(\"jsonload\", customData)\n\n\t\t\tthis._buildStoryFromStoryData(parsedDivinaData)\n\t\t}\n\t\tconst divinaParser = new DivinaParser(this, this._textManager, doWithParsedDivinaData)\n\t\tparseAndHandleDivinaData(divinaParser)\n\t}\n\n\t_setLoadingProperties() {\n\t\tconst { maxNbOfPagesAfter } = this._options || {}\n\t\tconst nbOfPages = (maxNbOfPagesAfter > 0)\n\t\t\t? maxNbOfPagesAfter\n\t\t\t: constants.defaultMaxNbOfPagesAfter\n\t\tthis._maxNbOfPagesAfter = Math.ceil(nbOfPages)\n\t\tthis._maxNbOfPagesBefore = Math.ceil(this._maxNbOfPagesAfter * constants.maxShareOfPagesBefore)\n\t\tthis._priorityFactor = this._maxNbOfPagesAfter / this._maxNbOfPagesBefore\n\t}\n\n\t_createResourceManager(textureSource) {\n\t\tconst doWithLoadPercent = (loadPercent) => {\n\t\t\tif (this._textManager) {\n\t\t\t\tthis._textManager.showMessage({ type: \"loading\", data: loadPercent })\n\t\t\t}\n\t\t}\n\t\tthis._resourceManager = new ResourceManager(doWithLoadPercent, textureSource, this)\n\t}\n\n\t_buildStoryFromStoryData(storyData) {\n\t\tthis._storyData = storyData\n\n\t\tconst { metadata, mainLinkObjectsArray, guidedLinkObjectsArray } = storyData\n\t\tconst { spread, viewportRatio } = metadata || {}\n\n\t\t// Set spread (used to check whether the double reading mode is available)\n\t\tthis._spread = spread\n\n\t\t// Update HTML canvas size to conform to viewportRatio constraints (will trigger a resize)\n\t\tthis._setRatioConstraint(viewportRatio)\n\n\t\t// Store all slices\n\t\tthis._slices = this._getSlices(mainLinkObjectsArray, guidedLinkObjectsArray)\n\n\t\t// Store all tags\n\t\tconst { languagesArray } = metadata\n\t\tthis._tags = {\n\t\t\tlanguage: {\n\t\t\t\tarray: languagesArray,\n\t\t\t\tindex: null,\n\t\t\t},\n\t\t}\n\t\tPlayer.addTagsForSlices(this._tags, this._slices)\n\n\t\t// Now create build info for all available page navigators\n\t\t// (note that _pageNavigatorsInfo.metadata will be a (c)leaner version of the above metadata)\n\t\tthis._pageNavigatorsInfo = StoryBuilder.createPageNavigatorsInfo(storyData)\n\n\t\t// If required, do something with the information on available reading modes and languages\n\t\tconst actualReadingModes = { ...this._pageNavigatorsInfo }\n\t\tdelete actualReadingModes.metadata\n\n\t\tif (this._pageNavigatorsInfo.double) {\n\t\t\tif (this._isDoublePageReadingModeAvailable() === true) {\n\t\t\t\tthis._wasDoublePageReadingModeAvailable = true\n\t\t\t} else {\n\t\t\t\tthis._wasDoublePageReadingModeAvailable = false\n\t\t\t\tdelete actualReadingModes.double\n\t\t\t}\n\t\t}\n\t\tconst customData = {\n\t\t\treadingModesArray: Object.keys(actualReadingModes),\n\t\t\tlanguagesArray,\n\t\t}\n\t\tthis._eventEmitter.emit(\"pagenavigatorscreation\", customData)\n\n\t\t// Now build (and set) the page navigator to start with\n\t\tif (this._pageNavigatorsInfo.single) {\n\t\t\tthis._setPageNavigator(\"single\")\n\t\t} else if (this._pageNavigatorsInfo.scroll) {\n\t\t\tthis._setPageNavigator(\"scroll\")\n\t\t}\n\t}\n\n\t_setRatioConstraint(viewportRatio) {\n\t\tif (!viewportRatio) {\n\t\t\treturn\n\t\t}\n\n\t\t// Parse viewportRatio properties to compute the applicable min and max ratio\n\t\tlet minRatio\n\t\tlet maxRatio\n\t\tconst { aspectRatio, constraint } = viewportRatio\n\t\tconst ratio = Utils.parseAspectRatio(aspectRatio)\n\t\tswitch (constraint) {\n\t\tcase \"min\":\n\t\t\tminRatio = ratio\n\t\t\tbreak\n\t\tcase \"max\":\n\t\t\tmaxRatio = ratio\n\t\t\tbreak\n\t\tcase \"exact\":\n\t\t\tminRatio = ratio\n\t\t\tmaxRatio = ratio\n\t\t\tbreak\n\t\tdefault:\n\t\t\treturn\n\t\t}\n\n\t\t// If the min and max values are contradictory, then discard them\n\t\tif (minRatio && maxRatio && minRatio > maxRatio) {\n\t\t\treturn\n\t\t}\n\n\t\t// Now store those min and max values and resize the viewport\n\t\tthis._minRatio = minRatio\n\t\tthis._maxRatio = maxRatio\n\t\tconst shouldResizeImmediately = true\n\t\tthis.resize(shouldResizeImmediately)\n\t}\n\n\t_getSlices(mainLinkObjectsArray, guidedLinkObjectsArray = null) {\n\t\tlet slices = {}\n\t\tconst mainSlices = this._getSlicesFromLinkObjectsArray(mainLinkObjectsArray)\n\t\tslices = { ...mainSlices }\n\n\t\tif (guidedLinkObjectsArray) {\n\t\t\tconst guidedSlices = this._getSlicesFromLinkObjectsArray(guidedLinkObjectsArray)\n\t\t\tslices = {\n\t\t\t\t...slices,\n\t\t\t\t...guidedSlices,\n\t\t\t}\n\t\t}\n\n\t\treturn slices\n\t}\n\n\t_getSlicesFromLinkObjectsArray(linkObjectsArray) {\n\t\tlet slices = {}\n\t\tlinkObjectsArray.forEach((linkObject) => {\n\t\t\tconst newSlices = this._getSlicesFromLinkObject(linkObject)\n\t\t\tslices = {\n\t\t\t\t...slices,\n\t\t\t\t...newSlices,\n\t\t\t}\n\t\t})\n\t\treturn slices\n\t}\n\n\t_getSlicesFromLinkObject(linkObject) {\n\t\tlet slices = {}\n\t\tconst {\n\t\t\tslice, transitionForward, transitionBackward, children,\n\t\t} = linkObject\n\t\tconst { id } = slice\n\t\tslices[id] = slice\n\n\t\tif (transitionForward && transitionForward.slice) {\n\t\t\tslices[transitionForward.slice.id] = transitionForward.slice\n\t\t}\n\t\tif (transitionBackward && transitionBackward.slice) {\n\t\t\tslices[transitionBackward.slice.id] = transitionBackward.slice\n\t\t}\n\n\t\tchildren.forEach((child) => {\n\t\t\tconst childSlices = this._getSlicesFromLinkObject(child.linkObject)\n\t\t\tslices = {\n\t\t\t\t...slices,\n\t\t\t\t...childSlices,\n\t\t\t}\n\t\t})\n\n\t\treturn slices\n\t}\n\n\tstatic addTagsForSlices(tags, slices) {\n\t\tObject.values(slices).forEach((slice) => {\n\t\t\tconst { resource, resourcesArray } = slice\n\t\t\tif (resource) {\n\t\t\t\tPlayer.updateTagsArrayForResource(tags, resource)\n\t\t\t} else if (resourcesArray) {\n\t\t\t\tresourcesArray.forEach((sequenceResource) => {\n\t\t\t\t\tPlayer.updateTagsArrayForResource(tags, sequenceResource)\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic updateTagsArrayForResource(tags, sliceResource) {\n\t\tconst updatedTags = { ...tags }\n\t\tif (sliceResource && sliceResource.usedTags) {\n\t\t\tObject.entries(sliceResource.usedTags).forEach(([tagName, possibleTagValues]) => {\n\t\t\t\tif (!updatedTags[tagName]) {\n\t\t\t\t\tupdatedTags[tagName] = {\n\t\t\t\t\t\tarray: [],\n\t\t\t\t\t\tindex: null,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpossibleTagValues.forEach((tagValue) => {\n\t\t\t\t\tif (updatedTags[tagName].array.indexOf(tagValue) < 0) {\n\t\t\t\t\t\tupdatedTags[tagName].array.push(tagValue)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\treturn tags\n\t}\n\n\t// Set the pageNavigator, load its first resources and start playing the story\n\t_setPageNavigator(pageNavigatorType) {\n\t\tconst oldPageNavigator = this._pageNavigator\n\n\t\tconst pageNavigatorInfo = this._pageNavigatorsInfo[pageNavigatorType]\n\n\t\tconst defaultMetadata = this._pageNavigatorsInfo.metadata\n\n\t\tconst { mainLinkObjectsArray, guidedLinkObjectsArray } = this._storyData\n\t\tif (pageNavigatorType === \"guided\") {\n\t\t\tthis._pageNavigator = StoryBuilder.createPageNavigator(pageNavigatorType,\n\t\t\t\tguidedLinkObjectsArray, pageNavigatorInfo, defaultMetadata, this)\n\t\t} else {\n\t\t\tthis._pageNavigator = StoryBuilder.createPageNavigator(pageNavigatorType,\n\t\t\t\tmainLinkObjectsArray, pageNavigatorInfo, defaultMetadata, this)\n\t\t}\n\n\t\tthis._pageNavigator.setLoadingProperties(this._maxNbOfPagesBefore, this._maxNbOfPagesAfter)\n\n\t\t// Set language if none has been defined yet (otherwise keep it)\n\t\tconst { index, array } = this._tags.language\n\t\tif (index === null) {\n\t\t\tlet languageIndex = 0 // The language array is always at least [\"unspecified\"]\n\t\t\tif (this._options.language) {\n\t\t\t\tconst { language } = this._options\n\t\t\t\tconst foundLanguageIndex = array.indexOf(language)\n\t\t\t\tif (foundLanguageIndex >= 0) {\n\t\t\t\t\tlanguageIndex = foundLanguageIndex\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst currentLanguage = array[languageIndex]\n\t\t\tconst shouldUpdatePageNavigator = false\n\t\t\tthis.setLanguage(currentLanguage, shouldUpdatePageNavigator)\n\t\t}\n\n\t\t// Repopulate the main container\n\t\tthis._renderer.mainContainer.addChild(this._pageNavigator)\n\n\t\t// Configure _interactionManager depending on the divina's features\n\t\tthis._interactionManager.setPageNavigator(this._pageNavigator)\n\n\t\t// Create (or update) the _resourceManager's priority function based on the number of pages,\n\t\t// while also (killing tasks and re)building the async task queue (and clearing sliceIdsSets\n\t\t// so they can be populated again for the considered pageNavigatorType)\n\t\tconst maxPriority = this._maxNbOfPagesAfter || this._pageNavigator.nbOfPages\n\t\tthis._resourceManager.reset(maxPriority, this._priorityFactor)\n\n\n\t\t// Get target page and segment indices\n\t\tlet href = this._startHref\n\t\tif (this._haveFirstResourcesLoaded === true) {\n\t\t\thref = (oldPageNavigator) ? oldPageNavigator.getFirstHrefInCurrentPage() : null\n\t\t}\n\t\tconst canUseShortenedHref = true\n\t\tconst target = this._getTargetPageAndSegmentIndices(href, canUseShortenedHref)\n\n\t\t// Now clean old story navigator\n\t\tif (oldPageNavigator) {\n\t\t\toldPageNavigator.finalizeExit() // Will also remove its container from its parent\n\t\t}\n\n\t\tthis._resourceManager.killPendingLoads()\n\n\t\t// Store a list (Set) of used paths\n\t\tconst oldPathsSet = new Set()\n\t\tObject.values(this._slices).forEach((slice) => {\n\t\t\tconst pathsArray = slice.unlinkTexturesAndGetPaths()\n\t\t\tpathsArray.forEach((path) => {\n\t\t\t\toldPathsSet.add(path)\n\t\t\t})\n\t\t})\n\n\t\t// Do any required updates on the calling app side (e.g. color loadViewer cells differently)\n\t\tconst customData = {\n\t\t\treadingMode: pageNavigatorType,\n\t\t\tnbOfPages: this._pageNavigator.nbOfPages,\n\t\t}\n\t\tthis._eventEmitter.emit(\"readingmodechange\", customData)\n\n\t\t// Populate the resourceManager's textureResources with relevant sliceIds,\n\t\t// i.e. only for those slices actually used in this page navigator\n\t\tObject.values(this._slices).forEach((slice) => {\n\t\t\tconst {\n\t\t\t\tpageNavInfo, id, resource, resourcesArray,\n\t\t\t} = slice\n\t\t\tif (pageNavInfo[pageNavigatorType]) { // If slice used in this PageNavigator\n\t\t\t\tconst virtualResourcesArray = resourcesArray || [resource]\n\t\t\t\tvirtualResourcesArray.forEach((virtualResource) => {\n\t\t\t\t\tthis._resourceManager.storeResourceInfo(virtualResource, id)\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t\t// Create async tasks for destroying and loading resources\n\t\tthis._pageNavigator.updateLoadTasks(target.pageIndex, oldPathsSet)\n\n\t\t// If the story navigator change occurred before the first resources were loaded\n\t\tif (this._haveFirstResourcesLoaded === false) {\n\n\t\t\t// Add a last task to trigger to start async queue (if not already running)\n\t\t\tconst doAfterLoadingFirstPagesOrSegments = () => {\n\t\t\t\tthis._haveFirstResourcesLoaded = true\n\n\t\t\t\t// Remove the _textManager\n\t\t\t\tif (this._textManager) {\n\t\t\t\t\tthis._textManager.destroy()\n\t\t\t\t\tthis._textManager = null\n\t\t\t\t}\n\n\t\t\t\t// Signal the end of the initial load\n\t\t\t\tthis._eventEmitter.emit(\"initialload\", {})\n\n\t\t\t\t// Now go to required resource in current story navigator\n\t\t\t\tthis._goToTargetPageAndSegmentIndices(target)\n\t\t\t}\n\n\t\t\tthis._resourceManager.addStoryOpenTaskAndLoad(doAfterLoadingFirstPagesOrSegments,\n\t\t\t\tmaxPriority)\n\n\t\t// Otherwise determine what page the new story navigator should start on by getting the href\n\t\t// of the first resource in the page (in the old story navigator)\n\t\t} else {\n\t\t\tthis._goToTargetPageAndSegmentIndices(target)\n\t\t}\n\t}\n\n\t// For reaching a specific resource directly in the story (typically via a table of contents,\n\t// however it is also used as the first step into the story navigation)\n\t_getTargetPageAndSegmentIndices(targetHref, canUseShortenedHref = false) {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn { pageIndex: 0, segmentIndex: 0 }\n\t\t}\n\t\tconst { mainLinkObjectsArray, guidedLinkObjectsArray } = this._storyData\n\t\tif (this._pageNavigator.type === \"guided\") {\n\t\t\treturn this._getTargetInLinkObjectsArray(targetHref, canUseShortenedHref,\n\t\t\t\tguidedLinkObjectsArray)\n\t\t}\n\t\treturn this._getTargetInLinkObjectsArray(targetHref, canUseShortenedHref, mainLinkObjectsArray)\n\t}\n\n\t_getTargetInLinkObjectsArray(targetHref, canUseShortenedHref = false, linkObjectsArray) {\n\t\tconst targetPath = (canUseShortenedHref === true)\n\t\t\t? Utils.getShortenedHref(targetHref) // Which is actually the resource path\n\t\t\t: null\n\n\t\tlet hardTarget = null\n\t\tlet softTarget = null\n\n\t\tlinkObjectsArray.forEach((linkObject) => {\n\t\t\tconst { slice } = linkObject || {}\n\t\t\tconst { resource, pageNavInfo } = slice || {}\n\t\t\tconst { href, path } = resource || {}\n\t\t\tif (hardTarget === null && targetHref === href) {\n\t\t\t\thardTarget = pageNavInfo[this._pageNavigator.type]\n\t\t\t} else if (softTarget === null && targetPath === path) {\n\t\t\t\tsoftTarget = pageNavInfo[this._pageNavigator.type]\n\t\t\t}\n\t\t})\n\n\t\tif (hardTarget) {\n\t\t\treturn hardTarget\n\t\t}\n\t\tif (softTarget) {\n\t\t\treturn softTarget\n\t\t}\n\t\treturn { pageIndex: 0, segmentIndex: 0 }\n\t}\n\n\t_goToTargetPageAndSegmentIndices(target) {\n\t\tconst { pageIndex, segmentIndex } = target\n\n\t\tconst shouldCancelTransition = true\n\t\tthis._pageNavigator.goToPageWithIndex(pageIndex || 0, segmentIndex, shouldCancelTransition)\n\t}\n\n\tsetReadingMode(readingMode) { // Called externally\n\t\tif (!readingMode || readingMode === this._pageNavigator.type) {\n\t\t\treturn\n\t\t}\n\t\tthis._setPageNavigator(readingMode)\n\t}\n\n\t// Used above or externally (in the latter case the change will be validated here)\n\tsetLanguage(language, shouldUpdatePageNavigator) {\n\t\tthis.setTag(\"language\", language, shouldUpdatePageNavigator)\n\t}\n\n\tsetTag(tagName, tagValue, shouldUpdatePageNavigator = true) {\n\t\tif (!this._tags[tagName]) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { array } = this._tags[tagName]\n\t\tconst index = array.indexOf(tagValue)\n\t\tif (index < 0) {\n\t\t\treturn\n\t\t}\n\n\t\tthis._tags[tagName].index = index\n\n\t\tif (shouldUpdatePageNavigator === true) {\n\t\t\tthis._resourceManager.killPendingLoads()\n\n\t\t\tconst oldPathsSet = new Set()\n\t\t\tObject.values(this._slices).forEach((slice) => {\n\t\t\t\tconst pathsArray = slice.unlinkTexturesAndGetPaths()\n\t\t\t\tpathsArray.forEach((path) => {\n\t\t\t\t\toldPathsSet.add(path)\n\t\t\t\t})\n\t\t\t})\n\n\t\t\t// Create async tasks for destroying and loading resources\n\t\t\tconst targetPageIndex = null // Keep the same page index\n\t\t\tthis._pageNavigator.updateLoadTasks(targetPageIndex, oldPathsSet)\n\t\t}\n\n\t\tif (tagName === \"language\") {\n\t\t\tconst customData = { language: tagValue }\n\t\t\tthis._eventEmitter.emit(\"languagechange\", customData)\n\t\t}\n\t}\n\n\t// For accessing a resource in the story from the table of contents\n\tgoTo(href, canUseShortenedHref = false) {\n\t\t// Get target page and segment indices\n\t\tconst target = this._getTargetPageAndSegmentIndices(href, canUseShortenedHref)\n\n\t\t// Now go to target page and segment indices\n\t\tthis._goToTargetPageAndSegmentIndices(target)\n\t}\n\n\tgoToPageWithIndex(pageIndex) {\n\t\tif (!this._pageNavigator || pageIndex === null || pageIndex === undefined) {\n\t\t\treturn\n\t\t}\n\t\tconst segmentIndex = null\n\t\tconst shouldCancelTransition = true\n\t\tthis._pageNavigator.goToPageWithIndex(pageIndex, segmentIndex, shouldCancelTransition)\n\t}\n\n\tgoRight() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = false\n\t\tthis._pageNavigator.go(\"right\", shouldGoToTheMax)\n\t}\n\n\tgoLeft() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = false\n\t\tthis._pageNavigator.go(\"left\", shouldGoToTheMax)\n\t}\n\n\tgoDown() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = false\n\t\tthis._pageNavigator.go(\"down\", shouldGoToTheMax)\n\t}\n\n\tgoUp() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = false\n\t\tthis._pageNavigator.go(\"up\", shouldGoToTheMax)\n\t}\n\n\tgoToMaxRight() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = true\n\t\tthis._pageNavigator.go(\"right\", shouldGoToTheMax)\n\t}\n\n\tgoToMaxLeft() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = true\n\t\tthis._pageNavigator.go(\"left\", shouldGoToTheMax)\n\t}\n\n\tgoToMaxDown() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = true\n\t\tthis._pageNavigator.go(\"down\", shouldGoToTheMax)\n\t}\n\n\tgoToMaxUp() {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldGoToTheMax = true\n\t\tthis._pageNavigator.go(\"up\", shouldGoToTheMax)\n\t}\n\n\tsetPercentInPage(percent) {\n\t\tif (!this._pageNavigator) {\n\t\t\treturn\n\t\t}\n\t\tthis._pageNavigator.setPercentInCurrentPage(percent)\n\t}\n\n\t// For exiting the application\n\tdestroy() {\n\t\twindow.removeEventListener(\"resize\", this.resize)\n\n\t\tif (this._pageNavigator) {\n\t\t\tthis._pageNavigator.destroy()\n\t\t}\n\n\t\t// Remove textures and event listeners from slices\n\t\tObject.values(this._slices).forEach((slice) => {\n\t\t\tslice.destroy()\n\t\t})\n\n\t\tif (this._resourceManager) {\n\t\t\tthis._resourceManager.destroy()\n\t\t\tthis._resourceManager = null\n\t\t}\n\t\tif (this._interactionManager) {\n\t\t\tthis._interactionManager.destroy()\n\t\t\tthis._interactionManager = null\n\t\t}\n\t\tif (this._textManager) {\n\t\t\tthis._textManager.destroy()\n\t\t\tthis._textManager = null\n\t\t}\n\n\t\tthis._renderer.destroy()\n\t\tthis._renderer = null\n\t}\n\n}","/*! divinaPlayer\n *\n * Copyright (c) 2019 Florian Dupas (Kwalia);\n * Licensed under the MIT license */\n\n/*!\n * divinaPlayer - v1.0.0\n * Compiled Thu, 3 oct 2019 16:04:36 UTC\n *\n * divinaPlayer is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n\nimport Player from \"./Player\"\n\nexport default Player"],"names":["PIXIContainer","PIXIGraphics","PIXIApplication","PIXITextContainer","PIXISprite","PIXITexture","constants.defaultDummyColor","constants.defaultBackgroundColor","PIXIAnimatedSprite","PIXILoader","constants.acceptableVideoExtensions","Utils.getRectForMediaFragmentAndSize","PIXIRectangle","Hammer.Manager","Hammer.Tap","constants.defaultAllowsZoom","constants.defaultAllowsSwipe","constants.defaultAllowsWheelScroll","constants.defaultIsPaginationSticky","Hammer.Pinch","Hammer.Swipe","Hammer.DIRECTION_ALL","Hammer.Pan","Utils.getDistance","constants.velocityFactor","constants.timeConstant","Utils.isANumber","Utils.getPathAndMediaFragment","Utils.isAVideo","constants.possibleTagNames","constants.defaultDuration","constants.defaultManifestFilename","constants.defaultContinuous","constants.defaultFit","constants.defaultOverflow","constants.defaultClipped","constants.defaultSpread","constants.defaultAllowsParallel","constants.defaultVideoLoadTimeout","constants.defaultAllowsPaginatedScroll","constants.defaultIsPaginationGridBased","constants.possiblePixelError","Utils.parseCoordinate","constants.maxZoomFactor","constants.snapJumpSpeedFactor","constants.stickyMoveSpeedFactor","constants.zoomSensitivityConstant","constants.defaultAllowsDestroy","constants.defaultMaxNbOfPagesAfter","constants.maxShareOfPagesBefore","Utils.parseAspectRatio","Utils.getShortenedHref"],"mappings":"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"}